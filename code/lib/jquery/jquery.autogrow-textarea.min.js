(function(b){b.fn.autogrow=function(j){return this.filter("textarea").each(function(){var g=this,a=b(g),h=a.height(),i=a.hasClass("autogrow-short")?0:parseInt(a.css("lineHeight"))||0,e=b.extend({preGrowCallback:null,postGrowCallback:null},j),f=b("<div></div>").css({position:"absolute",top:-1E4,left:-1E4,width:a.width(),fontSize:a.css("fontSize"),fontFamily:a.css("fontFamily"),fontWeight:a.css("fontWeight"),lineHeight:a.css("lineHeight"),resize:"none","word-wrap":"break-word"}).appendTo(document.body),
d=function(c){var b=g.value.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n$/,"<br/>&#xa0;").replace(/\n/g,"<br/>").replace(/ {2,}/g,function(a){for(var b=0,c="";b<a.length-1;b++)c+="&#xa0;";return c+" "});c&&(c.data&&"keydown"===c.data.event&&13===c.keyCode)&&(b+="<br />");f.css("width",a.width());f.html(b+(0===i?"...":""));c=Math.max(f.height()+i,h);null!=e.preGrowCallback&&(c=e.preGrowCallback(a,f,c,h));a.height(c);null!=e.postGrowCallback&&e.postGrowCallback(a)};a.change(d).keyup(d).keydown({event:"keydown"},
d);b(window).resize(d);d()})}})(jQuery);
