(function(){var c={dev:!1};c.tooltip=c.tooltip||{};c.utils=c.utils||{};c.models=c.models||{};c.charts={};c.logs={};c.dom={};c.dispatch=d3.dispatch("render_start","render_end");Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,j=function(){},f=function(){return c.apply(this instanceof j&&a?this:a,b.concat(Array.prototype.slice.call(arguments)))};
j.prototype=this.prototype;f.prototype=new j;return f});c.dev&&(c.dispatch.on("render_start",function(){c.logs.startTime=+new Date}),c.dispatch.on("render_end",function(){c.logs.endTime=+new Date;c.logs.totalTime=c.logs.endTime-c.logs.startTime;c.log("total",c.logs.totalTime)}));c.log=function(){c.dev&&window.console&&console.log&&console.log.apply?console.log.apply(console,arguments):c.dev&&(window.console&&typeof console.log=="function"&&Function.prototype.bind)&&Function.prototype.bind.call(console.log,
console).apply(console,arguments);return arguments[arguments.length-1]};c.deprecated=function(a,b){console&&console.warn&&console.warn("nvd3 warning: `"+a+"` has been deprecated. ",b||"")};c.render=function(a){a=a||1;c.render.active=true;c.dispatch.render_start();var b=function(){for(var e,j,f=0;f<a&&(j=c.render.queue[f]);f++){e=j.generate();typeof j.callback==typeof Function&&j.callback(e)}c.render.queue.splice(0,f);if(c.render.queue.length)setTimeout(b);else{c.dispatch.render_end();c.render.active=
false}};setTimeout(b)};c.render.active=!1;c.render.queue=[];c.addGraph=function(a,b){typeof a===typeof Function&&(a={generate:a,callback:b});c.render.queue.push(a);c.render.active||c.render()};"undefined"!==typeof module&&"undefined"!==typeof exports&&(module.exports=c);"undefined"!==typeof window&&(window.nv=c);c.dom.write=function(a){return window.fastdom!==void 0?fastdom.write(a):a()};c.dom.read=function(a){return window.fastdom!==void 0?fastdom.read(a):a()};c.interactiveGuideline=function(){function a(r){r.each(function(r){function o(){var c=
d3.mouse(this),e=c[0],c=c[1],d=true,u=false;if(l){e=d3.event.offsetX;c=d3.event.offsetY;d3.event.target.tagName!=="svg"&&(d=false);d3.event.target.className.baseVal.match("nv-legend")&&(u=true)}if(d){e=e-b.left;c=c-b.top}if(e<0||c<0||e>n||c>m||d3.event.relatedTarget&&d3.event.relatedTarget.ownerSVGElement===void 0||u){if(!l||!d3.event.relatedTarget||!(d3.event.relatedTarget.ownerSVGElement===void 0&&(d3.event.relatedTarget.className===void 0||d3.event.relatedTarget.className.match(k.nvPointerEventsClass)))){g.elementMouseout({mouseX:e,
mouseY:c});a.renderGuideLine(null);k.hidden(true)}}else{k.hidden(false);d=f.invert(e);g.elementMousemove({mouseX:e,mouseY:c,pointXValue:d});d3.event.type==="dblclick"&&g.elementDblclick({mouseX:e,mouseY:c,pointXValue:d});d3.event.type==="click"&&g.elementClick({mouseX:e,mouseY:c,pointXValue:d});d3.event.type==="mousedown"&&g.elementMouseDown({mouseX:e,mouseY:c,pointXValue:d});d3.event.type==="mouseup"&&g.elementMouseUp({mouseX:e,mouseY:c,pointXValue:d})}}var w=d3.select(this),n=e||960,m=j||400,B=
w.selectAll("g.nv-wrap.nv-interactiveLineLayer").data([r]);B.enter().append("g").attr("class"," nv-wrap nv-interactiveLineLayer").append("g").attr("class","nv-interactiveGuideLine");if(d){d.on("touchmove",o).on("mousemove",o,true).on("mouseout",o,true).on("mousedown",o,true).on("mouseup",o,true).on("dblclick",o).on("click",o);a.guideLine=null;a.renderGuideLine=function(b){i&&(a.guideLine&&a.guideLine.attr("x1")===b||c.dom.write(function(){var a=B.select(".nv-interactiveGuideLine").selectAll("line").data(b!=
null?[c.utils.NaNtoZero(b)]:[],String);a.enter().append("line").attr("class","nv-guideline").attr("x1",function(a){return a}).attr("x2",function(a){return a}).attr("y1",m).attr("y2",0);a.exit().remove()}))}}})}var b={left:0,top:0},e=null,j=null,f=d3.scale.linear(),g=d3.dispatch("elementMousemove","elementMouseout","elementClick","elementDblclick","elementMouseDown","elementMouseUp"),i=true,d=null,k=c.models.tooltip(),l="ActiveXObject"in window;k.duration(0).hideDelay(0).hidden(false);a.dispatch=g;
a.tooltip=k;a.margin=function(c){if(!arguments.length)return b;b.top=typeof c.top!="undefined"?c.top:b.top;b.left=typeof c.left!="undefined"?c.left:b.left;return a};a.width=function(b){if(!arguments.length)return e;e=b;return a};a.height=function(b){if(!arguments.length)return j;j=b;return a};a.xScale=function(b){if(!arguments.length)return f;f=b;return a};a.showGuideLine=function(b){if(!arguments.length)return i;i=b;return a};a.svgContainer=function(b){if(!arguments.length)return d;d=b;return a};
return a};c.interactiveBisect=function(a,b,c){if(!(a instanceof Array))return null;var j;j=typeof c!=="function"?function(a){return a.x}:c;var c=d3.bisector(function(a,b){return j(a)-b}).left,c=d3.max([0,c(a,b)-1]),f=j(a[c]);typeof f==="undefined"&&(f=c);if(f===b)return c;var g=d3.min([c+1,a.length-1]),a=j(a[g]);typeof a==="undefined"&&(a=g);return Math.abs(a-b)>=Math.abs(f-b)?c:g};c.nearestValueIndex=function(a,b,c){var j=Infinity,f=null;a.forEach(function(a,i){var d=Math.abs(b-a);if(a!=null&&d<=
j&&d<c){j=d;f=i}});return f};c.models.tooltip=function(){function a(){if(w){var m;a:{if(e&&e.series){if(e.series instanceof Array){m=!!e.series.length;break a}if(e.series instanceof Object){e.series=[e.series];m=true;break a}}m=false}if(m){c.dom.write(function(){if(!r){r=d3.select(d?d:document.body).append("div").attr("class","nvtooltip "+(i?i:"xy-tooltip")).attr("id",b);r.style("top",0).style("left",0);r.style("opacity",0);r.style("position","fixed");r.selectAll("div, table, td, tr").classed(B,true);
r.classed(B,true)}var a=C(e);if(a)r.node().innerHTML=a;t()});return a}}}var b="nvtooltip-"+Math.floor(Math.random()*1E5),e=null,j="w",f=25,g=0,i=null,d=null,k=true,l=200,r=null,p=null,o=null,w=true,n=100,m=true,B="nv-pointer-events-none",E=function(){return{left:d3.event.clientX,top:d3.event.clientY}},s=function(a){return a},q=function(a){return a},u=function(a){return a},C=function(a){if(a===null)return"";var b=d3.select(document.createElement("table"));m&&b.selectAll("thead").data([a]).enter().append("thead").append("tr").append("td").attr("colspan",
3).append("strong").classed("x-value",true).html(q(a.value));var c=b.selectAll("tbody").data([a]).enter().append("tbody").selectAll("tr").data(function(a){return a.series}).enter().append("tr").classed("highlight",function(a){return a.highlight});c.append("td").classed("legend-color-guide",true).append("div").style("background-color",function(a){return a.color});c.append("td").classed("key",true).classed("total",function(a){return!!a.total}).html(function(a,b){return u(a.key,b)});c.append("td").classed("value",
true).html(function(a,b){return s(a.value,b)});c.selectAll("td").each(function(a){if(a.highlight){a=d3.scale.linear().domain([0,1]).range(["#fff",a.color]);d3.select(this).style("border-bottom-color",a(0.6)).style("border-top-color",a(0.6))}});b=b.node().outerHTML;a.footer!==void 0&&(b=b+("<div class='footer'>"+a.footer+"</div>"));return b},A=function(a){var b=r.node().offsetHeight,c=r.node().offsetWidth,e=document.documentElement.clientWidth,d=document.documentElement.clientHeight,h,I,y;switch(j){case "e":h=
-c-f;I=-(b/2);a.left+h<0&&(h=f);if((y=a.top+I)<0)I=I-y;if((y=a.top+I+b)>d)I=I-(y-d);break;case "w":h=f;I=-(b/2);a.left+h+c>e&&(h=-c-f);if((y=a.top+I)<0)I=I-y;if((y=a.top+I+b)>d)I=I-(y-d);break;case "n":h=-(c/2)-5;I=f;a.top+I+b>d&&(I=-b-f);if((y=a.left+h)<0)h=h-y;if((y=a.left+h+c)>e)h=h-(y-e);break;case "s":h=-(c/2);I=-b-f;a.top+I<0&&(I=f);if((y=a.left+h)<0)h=h-y;if((y=a.left+h+c)>e)h=h-(y-e);break;case "center":h=-(c/2);I=-(b/2);break;default:I=h=0}return{left:h,top:I}},t=function(){c.dom.read(function(){var a=
E(),b=A(a),c=a.left+b.left,a=a.top+b.top;if(k)r.interrupt().transition().delay(l).duration(0).style("opacity",0);else{var b="translate("+c+"px, "+a+"px)",e=d3.interpolateString("translate("+p+"px, "+o+"px)",b),d=r.style("opacity")<0.1;r.interrupt().transition().duration(d?0:n).styleTween("transform",function(){return e},"important").styleTween("-webkit-transform",function(){return e}).style("-ms-transform",b).style("opacity",1)}p=c;o=a})};a.nvPointerEventsClass=B;a.options=c.utils.optionsFunc.bind(a);
a._options=Object.create({},{duration:{get:function(){return n},set:function(a){n=a}},gravity:{get:function(){return j},set:function(a){j=a}},distance:{get:function(){return f},set:function(a){f=a}},snapDistance:{get:function(){return g},set:function(a){g=a}},classes:{get:function(){return i},set:function(a){i=a}},chartContainer:{get:function(){return d},set:function(a){d=a}},enabled:{get:function(){return w},set:function(a){w=a}},hideDelay:{get:function(){return l},set:function(a){l=a}},contentGenerator:{get:function(){return C},
set:function(a){C=a}},valueFormatter:{get:function(){return s},set:function(a){s=a}},headerFormatter:{get:function(){return q},set:function(a){q=a}},keyFormatter:{get:function(){return u},set:function(a){u=a}},headerEnabled:{get:function(){return m},set:function(a){m=a}},position:{get:function(){return E},set:function(a){E=a}},hidden:{get:function(){return k},set:function(b){if(k!=b){k=!!b;a()}}},data:{get:function(){return e},set:function(a){if(a.point){a.value=a.point.x;a.series=a.series||{};a.series.value=
a.point.y;a.series.color=a.point.color||a.series.color}e=a}},node:{get:function(){return r.node()},set:function(){}},id:{get:function(){return b},set:function(){}}});c.utils.initOptions(a);return a};c.utils.windowSize=function(){var a={width:640,height:480};if(window.innerWidth&&window.innerHeight){a.width=window.innerWidth;a.height=window.innerHeight;return a}if(document.compatMode=="CSS1Compat"&&document.documentElement&&document.documentElement.offsetWidth){a.width=document.documentElement.offsetWidth;
a.height=document.documentElement.offsetHeight;return a}if(document.body&&document.body.offsetWidth){a.width=document.body.offsetWidth;a.height=document.body.offsetHeight}return a};c.utils.windowResize=function(a){window.addEventListener?window.addEventListener("resize",a):c.log("ERROR: Failed to bind to window.resize with: ",a);return{callback:a,clear:function(){window.removeEventListener("resize",a)}}};c.utils.getColor=function(a){if(a===void 0)return c.utils.defaultColor();if(Array.isArray(a)){var b=
d3.scale.ordinal().range(a);return function(a,c){return a.color||b(c===void 0?a:c)}}return a};c.utils.defaultColor=function(){return c.utils.getColor(d3.scale.category20().range())};c.utils.customTheme=function(a,b,c){var b=b||function(a){return a.key},c=c||d3.scale.category20().range(),j=c.length;return function(f){f=b(f);if(typeof a[f]==="function")return a[f]();if(a[f]!==void 0)return a[f];if(!j)j=c.length;j=j-1;return c[j]}};c.utils.pjax=function(a,b){var e=function(e){d3.html(e,function(e){var g=
d3.select(b).node();g.parentNode.replaceChild(d3.select(e).select(b).node(),g);c.utils.pjax(a,b)})};d3.selectAll(a).on("click",function(){history.pushState(this.href,this.textContent,this.href);e(this.href);d3.event.preventDefault()});d3.select(window).on("popstate",function(){d3.event.state&&e(d3.event.state)})};c.utils.calcApproxTextWidth=function(a){if(typeof a.style==="function"&&typeof a.text==="function"){var b=parseInt(a.style("font-size").replace("px",""),10);return a.text().length*b*0.5}return 0};
c.utils.NaNtoZero=function(a){return typeof a!=="number"||isNaN(a)||a===null||a===Infinity||a===-Infinity?0:a};d3.selection.prototype.watchTransition=function(a){var b=[this].concat([].slice.call(arguments,1));return a.transition.apply(a,b)};c.utils.renderWatch=function(a,b){if(!(this instanceof c.utils.renderWatch))return new c.utils.renderWatch(a,b);var e=b!==void 0?b:250,j=[],f=this;this.models=function(a){a=[].slice.call(arguments,0);a.forEach(function(a){a.__rendered=false;(function(a){a.dispatch.on("renderEnd",
function(){a.__rendered=true;f.renderEnd("model")})})(a);j.indexOf(a)<0&&j.push(a)});return this};this.reset=function(a){a!==void 0&&(e=a);j=[]};this.transition=function(a,b,c){b=arguments.length>1?[].slice.call(arguments,1):[];c=b.length>1?b.pop():e!==void 0?e:250;a.__rendered=false;j.indexOf(a)<0&&j.push(a);if(c===0){a.__rendered=true;a.delay=function(){return this};a.duration=function(){return this};return a}a.__rendered=a.length===0?true:a.every(function(a){return!a.length})?true:false;var k=
0;return a.transition().duration(c).each(function(){++k}).each("end",function(){if(--k===0){a.__rendered=true;f.renderEnd.apply(this,b)}})};this.renderEnd=function(){if(j.every(function(a){return a.__rendered})){j.forEach(function(a){a.__rendered=false});a.renderEnd.apply(this,arguments)}}};c.utils.deepExtend=function(a){(arguments.length>1?[].slice.call(arguments,1):[]).forEach(function(b){for(var e in b){var j=a[e]instanceof Array,f=typeof b[e]==="object";typeof a[e]==="object"&&!j&&f?c.utils.deepExtend(a[e],
b[e]):a[e]=b[e]}})};c.utils.state=function(){if(!(this instanceof c.utils.state))return new c.utils.state;var a={},b=function(){},e=function(){return{}},j=null;this.dispatch=d3.dispatch("change","set");this.dispatch.on("set",function(a){b(a,true)});this.getter=function(a){e=a;return this};this.setter=function(a,c){c||(c=function(){});b=function(b,e){a(b);e&&c()};return this};this.init=function(a){j=j||{};c.utils.deepExtend(j,a)};this.update=function(){if(j){b(j,false);j=null}var c;c=e();if(JSON.stringify(c)===
JSON.stringify(a))c=false;else{for(var g in c){a[g]===void 0&&(a[g]={});a[g]=c[g]}c=true}c&&this.dispatch.change(a)}};c.utils.optionsFunc=function(a){a&&d3.map(a).forEach(function(a,c){if(typeof this[a]==="function")this[a](c)}.bind(this));return this};c.utils.calcTicksX=function(a,b){var e=1,j=0;for(j;j<b.length;j=j+1)var f=b[j]&&b[j].values?b[j].values.length:0,e=f>e?f:e;c.log("Requested number of ticks: ",a);c.log("Calculated max values to be: ",e);a=a>e?a=e-1:a;a=Math.floor(a<1?1:a);c.log("Calculating tick count as: ",
a);return a};c.utils.calcTicksY=function(a,b){return c.utils.calcTicksX(a,b)};c.utils.initOption=function(a,b){if(a._calls&&a._calls[b])a[b]=a._calls[b];else{a[b]=function(c){if(!arguments.length)return a._options[b];a._overrides[b]=true;a._options[b]=c;return a};a["_"+b]=function(c){if(!arguments.length)return a._options[b];a._overrides[b]||(a._options[b]=c);return a}}};c.utils.initOptions=function(a){a._overrides=a._overrides||{};var b=Object.getOwnPropertyNames(a._options||{}),e=Object.getOwnPropertyNames(a._calls||
{}),b=b.concat(e),j;for(j in b)c.utils.initOption(a,b[j])};c.utils.inheritOptionsD3=function(a,b,c){a._d3options=c.concat(a._d3options||[]);c.unshift(b);c.unshift(a);d3.rebind.apply(this,c)};c.utils.arrayUnique=function(a){return a.sort().filter(function(b,c){return!c||b!=a[c-1]})};c.utils.symbolMap=d3.map();c.utils.symbol=function(){function a(a,f){var g=b.call(this,a,f),i=e.call(this,a,f);return d3.svg.symbolTypes.indexOf(g)!==-1?d3.svg.symbol().type(g).size(i)():c.utils.symbolMap.get(g)(i)}var b,
e=64;a.type=function(c){if(!arguments.length)return b;b=d3.functor(c);return a};a.size=function(b){if(!arguments.length)return e;e=d3.functor(b);return a};return a};c.utils.inheritOptions=function(a,b){var e=Object.getOwnPropertyNames(b._options||{}),j=Object.getOwnPropertyNames(b._calls||{}),f=b._inherited||[],g=b._d3options||[],i=e.concat(j).concat(f).concat(g);i.unshift(b);i.unshift(a);d3.rebind.apply(this,i);a._inherited=c.utils.arrayUnique(e.concat(j).concat(f).concat(e).concat(a._inherited||
[]));a._d3options=c.utils.arrayUnique(g.concat(a._d3options||[]))};c.utils.initSVG=function(a){a.classed({"nvd3-svg":true})};c.utils.sanitizeHeight=function(a,b){return a||parseInt(b.style("height"),10)||400};c.utils.sanitizeWidth=function(a,b){return a||parseInt(b.style("width"),10)||960};c.utils.availableHeight=function(a,b,e){return c.utils.sanitizeHeight(a,b)-e.top-e.bottom};c.utils.availableWidth=function(a,b,e){return c.utils.sanitizeWidth(a,b)-e.left-e.right};c.utils.noData=function(a,b){var e=
a.options(),j=e.margin(),e=e.noData(),e=e==null?["No Data Available."]:[e],f=c.utils.availableHeight(null,b,j),g=c.utils.availableWidth(null,b,j),g=j.left+g/2,j=j.top+f/2;b.selectAll("g").remove();e=b.selectAll(".nv-noData").data(e);e.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");e.attr("x",g).attr("y",j).text(function(a){return a})};c.utils.wrapTicks=function(a,b){a.each(function(){for(var a=d3.select(this),c=a.text().split(/\s+/).reverse(),
f,g=[],i=0,d=a.attr("y"),k=parseFloat(a.attr("dy")),l=a.text(null).append("tspan").attr("x",0).attr("y",d).attr("dy",k+"em");f=c.pop();){g.push(f);l.text(g.join(" "));if(l.node().getComputedTextLength()>b){g.pop();l.text(g.join(" "));g=[f];l=a.append("tspan").attr("x",0).attr("y",d).attr("dy",++i*1.1+k+"em").text(f)}}})};c.models.axis=function(){function a(m){E.reset();m.each(function(a){var m=d3.select(this);c.utils.initSVG(m);a=m.selectAll("g.nv-wrap.nv-axis").data([a]);a.enter().append("g").attr("class",
"nvd3 nv-wrap nv-axis").append("g");m=a.select("g");o!==null?b.ticks(o):(b.orient()=="top"||b.orient()=="bottom")&&b.ticks(Math.abs(e.range()[1]-e.range()[0])/100);m.watchTransition(E,"axis").call(b);B=B||b.scale();var g=b.tickFormat();g==null&&(g=B.tickFormat());var n=m.selectAll("text.nv-axislabel").data([i||null]);n.exit().remove();var t,s;switch(b.orient()){case "top":n.enter().append("text").attr("class","nv-axislabel");s=0;e.range().length===1?s=p?e.range()[0]*2+e.rangeBand():0:e.range().length===
2?s=p?e.range()[0]+e.range()[1]+e.rangeBand():e.range()[1]:e.range().length>2&&(s=e.range()[e.range().length-1]+(e.range()[1]-e.range()[0]));n.attr("text-anchor","middle").attr("y",0).attr("x",s/2);if(d){t=a.selectAll("g.nv-axisMaxMin").data(e.domain());t.enter().append("g").attr("class",function(a,b){return["nv-axisMaxMin nv-axisMaxMin-x",b==0?"nv-axisMin-x":"nv-axisMax-x"].join(" ")}).append("text");t.exit().remove();t.attr("transform",function(a){return"translate("+c.utils.NaNtoZero(e(a))+",0)"}).select("text").attr("dy",
"-0.5em").attr("y",-b.tickPadding()).attr("text-anchor","middle").text(function(a){a=g(a);return(""+a).match("NaN")?"":a});t.watchTransition(E,"min-max top").attr("transform",function(a,b){return"translate("+c.utils.NaNtoZero(e.range()[b])+",0)"})}break;case "bottom":t=w+36;var v=30,x=0,z=m.selectAll("g").select("text"),F="";if(k%360){z.each(function(){var a=this.getBoundingClientRect(),b=a.width;x=a.height;b>v&&(v=b)});F="rotate("+k+" 0,"+(x/2+b.tickPadding())+")";t=Math.abs(Math.sin(k*Math.PI/180));
t=(t?t*v:v)+30;z.attr("transform",F).style("text-anchor",k%360>0?"start":"end")}n.enter().append("text").attr("class","nv-axislabel");s=0;e.range().length===1?s=p?e.range()[0]*2+e.rangeBand():0:e.range().length===2?s=p?e.range()[0]+e.range()[1]+e.rangeBand():e.range()[1]:e.range().length>2&&(s=e.range()[e.range().length-1]+(e.range()[1]-e.range()[0]));n.attr("text-anchor","middle").attr("y",t).attr("x",s/2);if(d){t=a.selectAll("g.nv-axisMaxMin").data([e.domain()[0],e.domain()[e.domain().length-1]]);
t.enter().append("g").attr("class",function(a,b){return["nv-axisMaxMin nv-axisMaxMin-x",b==0?"nv-axisMin-x":"nv-axisMax-x"].join(" ")}).append("text");t.exit().remove();t.attr("transform",function(a){return"translate("+c.utils.NaNtoZero(e(a)+(p?e.rangeBand()/2:0))+",0)"}).select("text").attr("dy",".71em").attr("y",b.tickPadding()).attr("transform",F).style("text-anchor",k?k%360>0?"start":"end":"middle").text(function(a){a=g(a);return(""+a).match("NaN")?"":a});t.watchTransition(E,"min-max bottom").attr("transform",
function(a){return"translate("+c.utils.NaNtoZero(e(a)+(p?e.rangeBand()/2:0))+",0)"})}r&&z.attr("transform",function(a,b){return"translate(0,"+(b%2==0?"0":"12")+")"});break;case "right":n.enter().append("text").attr("class","nv-axislabel");n.style("text-anchor",l?"middle":"begin").attr("transform",l?"rotate(90)":"").attr("y",l?-Math.max(j.right,f)+12:-10).attr("x",l?d3.max(e.range())/2:b.tickPadding());if(d){t=a.selectAll("g.nv-axisMaxMin").data(e.domain());t.enter().append("g").attr("class",function(a,
b){return["nv-axisMaxMin nv-axisMaxMin-y",b==0?"nv-axisMin-y":"nv-axisMax-y"].join(" ")}).append("text").style("opacity",0);t.exit().remove();t.attr("transform",function(a){return"translate(0,"+c.utils.NaNtoZero(e(a))+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",b.tickPadding()).style("text-anchor","start").text(function(a){a=g(a);return(""+a).match("NaN")?"":a});t.watchTransition(E,"min-max right").attr("transform",function(a,b){return"translate(0,"+c.utils.NaNtoZero(e.range()[b])+
")"}).select("text").style("opacity",1)}break;case "left":n.enter().append("text").attr("class","nv-axislabel");n.style("text-anchor",l?"middle":"end").attr("transform",l?"rotate(-90)":"").attr("y",l?-Math.max(j.left,f)+25-(w||0):-10).attr("x",l?-d3.max(e.range())/2:-b.tickPadding());if(d){t=a.selectAll("g.nv-axisMaxMin").data(e.domain());t.enter().append("g").attr("class",function(a,b){return["nv-axisMaxMin nv-axisMaxMin-y",b==0?"nv-axisMin-y":"nv-axisMax-y"].join(" ")}).append("text").style("opacity",
0);t.exit().remove();t.attr("transform",function(a){return"translate(0,"+c.utils.NaNtoZero(B(a))+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",-b.tickPadding()).attr("text-anchor","end").text(function(a){a=g(a);return(""+a).match("NaN")?"":a});t.watchTransition(E,"min-max right").attr("transform",function(a,b){return"translate(0,"+c.utils.NaNtoZero(e.range()[b])+")"}).select("text").style("opacity",1)}}n.text(function(a){return a});if(d&&(b.orient()==="left"||b.orient()==="right")){m.selectAll("g").each(function(a){d3.select(this).select("text").attr("opacity",
1);if(e(a)<e.range()[1]+10||e(a)>e.range()[0]-10){(a>1.0E-10||a<-1.0E-10)&&d3.select(this).attr("opacity",0);d3.select(this).select("text").attr("opacity",0)}});e.domain()[0]==e.domain()[1]&&e.domain()[0]==0&&a.selectAll("g.nv-axisMaxMin").style("opacity",function(a,b){return!b?1:0})}if(d&&(b.orient()==="top"||b.orient()==="bottom")){var h=[];a.selectAll("g.nv-axisMaxMin").each(function(a,b){try{b?h.push(e(a)-this.getBoundingClientRect().width-4):h.push(e(a)+this.getBoundingClientRect().width+4)}catch(c){b?
h.push(e(a)-4):h.push(e(a)+4)}});m.selectAll("g").each(function(a){if(e(a)<h[0]||e(a)>h[1])a>1.0E-10||a<-1.0E-10?d3.select(this).remove():d3.select(this).select("text").remove()})}m.selectAll(".tick").filter(function(a){return!parseFloat(Math.round(a*1E5)/1E6)&&a!==void 0}).classed("zero",true);B=e.copy()});E.renderEnd("axis immediate");return a}var b=d3.svg.axis(),e=d3.scale.linear(),j={top:0,right:0,bottom:0,left:0},f=75,g=60,i=null,d=true,k=0,l=true,r=false,p=false,o=null,w=0,n=250,m=d3.dispatch("renderEnd");
b.scale(e).orient("bottom").tickFormat(function(a){return a});var B,E=c.utils.renderWatch(m,n);a.axis=b;a.dispatch=m;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{axisLabelDistance:{get:function(){return w},set:function(a){w=a}},staggerLabels:{get:function(){return r},set:function(a){r=a}},rotateLabels:{get:function(){return k},set:function(a){k=a}},rotateYLabel:{get:function(){return l},set:function(a){l=a}},showMaxMin:{get:function(){return d},set:function(a){d=a}},axisLabel:{get:function(){return i},
set:function(a){i=a}},height:{get:function(){return g},set:function(a){g=a}},ticks:{get:function(){return o},set:function(a){o=a}},width:{get:function(){return f},set:function(a){f=a}},margin:{get:function(){return j},set:function(a){j.top=a.top!==void 0?a.top:j.top;j.right=a.right!==void 0?a.right:j.right;j.bottom=a.bottom!==void 0?a.bottom:j.bottom;j.left=a.left!==void 0?a.left:j.left}},duration:{get:function(){return n},set:function(a){n=a;E.reset(n)}},scale:{get:function(){return e},set:function(d){e=
d;b.scale(e);p=typeof e.rangeBands==="function";c.utils.inheritOptionsD3(a,e,["domain","range","rangeBand","rangeBands"])}}});c.utils.initOptions(a);c.utils.inheritOptionsD3(a,b,["orient","tickValues","tickSubdivide","tickSize","tickPadding","tickFormat"]);c.utils.inheritOptionsD3(a,e,["domain","range","rangeBand","rangeBands"]);return a};c.models.boxPlot=function(){function a(f){q.reset();f.each(function(a){var f=e-b.left-b.right,u=j-b.top-b.bottom;r=d3.select(this);c.utils.initSVG(r);g.domain(p||
a.map(function(a,b){return d(a,b)})).rangeBands(w||[0,f],0.1);f=[];if(!o)var f=d3.min(a.map(function(a){var b=[];b.push(a.values.Q1);a.values.hasOwnProperty("whisker_low")&&a.values.whisker_low!==null&&b.push(a.values.whisker_low);a.values.hasOwnProperty("outliers")&&a.values.outliers!==null&&(b=b.concat(a.values.outliers));return d3.min(b)})),k=d3.max(a.map(function(a){var b=[];b.push(a.values.Q3);a.values.hasOwnProperty("whisker_high")&&a.values.whisker_high!==null&&b.push(a.values.whisker_high);
a.values.hasOwnProperty("outliers")&&a.values.outliers!==null&&(b=b.concat(a.values.outliers));return d3.max(b)})),f=[f,k];i.domain(o||f);i.range(n||[u,0]);s=s||i.copy().range([i(0),i(0)]);u=r.selectAll("g.nv-wrap").data([a]);u.enter().append("g").attr("class","nvd3 nv-wrap");u.attr("transform","translate("+b.left+","+b.top+")");var v=u.selectAll(".nv-boxplot").data(function(a){return a}),x=v.enter().append("g").style("stroke-opacity",1.0E-6).style("fill-opacity",1.0E-6);v.attr("class","nv-boxplot").attr("transform",
function(a,b){return"translate("+(g(d(a,b))+g.rangeBand()*0.05)+", 0)"}).classed("hover",function(a){return a.hover});v.watchTransition(q,"nv-boxplot: boxplots").style("stroke-opacity",1).style("fill-opacity",0.75).delay(function(b,c){return c*B/a.length}).attr("transform",function(a,b){return"translate("+(g(d(a,b))+g.rangeBand()*0.05)+", 0)"});v.exit().remove();x.each(function(a,b){var c=d3.select(this);["low","high"].forEach(function(h){if(a.values.hasOwnProperty("whisker_"+h)&&a.values["whisker_"+
h]!==null){c.append("line").style("stroke",a.color?a.color:l(a,b)).attr("class","nv-boxplot-whisker nv-boxplot-"+h);c.append("line").style("stroke",a.color?a.color:l(a,b)).attr("class","nv-boxplot-tick nv-boxplot-"+h)}})});u=v.selectAll(".nv-boxplot-outlier").data(function(a){return a.values.hasOwnProperty("outliers")&&a.values.outliers!==null?a.values.outliers:[]});u.enter().append("circle").style("fill",function(a,b,c){return l(a,c)}).style("stroke",function(a,b,c){return l(a,c)}).on("mouseover",
function(a,b,c){d3.select(this).classed("hover",true);m.elementMouseover({series:{key:a,color:l(a,c)},e:d3.event})}).on("mouseout",function(a,b,c){d3.select(this).classed("hover",false);m.elementMouseout({series:{key:a,color:l(a,c)},e:d3.event})}).on("mousemove",function(){m.elementMousemove({e:d3.event})});u.attr("class","nv-boxplot-outlier");u.watchTransition(q,"nv-boxplot: nv-boxplot-outlier").attr("cx",g.rangeBand()*0.45).attr("cy",function(a){return i(a)}).attr("r","3");u.exit().remove();var z=
function(){return E===null?g.rangeBand()*0.9:Math.min(75,g.rangeBand()*0.9)},F=function(){return g.rangeBand()*0.45-z()/2},h=function(){return g.rangeBand()*0.45+z()/2};["low","high"].forEach(function(a){var b=a==="low"?"Q1":"Q3";v.select("line.nv-boxplot-whisker.nv-boxplot-"+a).watchTransition(q,"nv-boxplot: boxplots").attr("x1",g.rangeBand()*0.45).attr("y1",function(b){return i(b.values["whisker_"+a])}).attr("x2",g.rangeBand()*0.45).attr("y2",function(a){return i(a.values[b])});v.select("line.nv-boxplot-tick.nv-boxplot-"+
a).watchTransition(q,"nv-boxplot: boxplots").attr("x1",F).attr("y1",function(b){return i(b.values["whisker_"+a])}).attr("x2",h).attr("y2",function(b){return i(b.values["whisker_"+a])})});["low","high"].forEach(function(a){x.selectAll(".nv-boxplot-"+a).on("mouseover",function(b,c,h){d3.select(this).classed("hover",true);m.elementMouseover({series:{key:b.values["whisker_"+a],color:l(b,h)},e:d3.event})}).on("mouseout",function(b,c,h){d3.select(this).classed("hover",false);m.elementMouseout({series:{key:b.values["whisker_"+
a],color:l(b,h)},e:d3.event})}).on("mousemove",function(){m.elementMousemove({e:d3.event})})});x.append("rect").attr("class","nv-boxplot-box").on("mouseover",function(a,b){d3.select(this).classed("hover",true);m.elementMouseover({key:a.label,value:a.label,series:[{key:"Q3",value:a.values.Q3,color:a.color||l(a,b)},{key:"Q2",value:a.values.Q2,color:a.color||l(a,b)},{key:"Q1",value:a.values.Q1,color:a.color||l(a,b)}],data:a,index:b,e:d3.event})}).on("mouseout",function(a,b){d3.select(this).classed("hover",
false);m.elementMouseout({key:a.label,value:a.label,series:[{key:"Q3",value:a.values.Q3,color:a.color||l(a,b)},{key:"Q2",value:a.values.Q2,color:a.color||l(a,b)},{key:"Q1",value:a.values.Q1,color:a.color||l(a,b)}],data:a,index:b,e:d3.event})}).on("mousemove",function(){m.elementMousemove({e:d3.event})});v.select("rect.nv-boxplot-box").watchTransition(q,"nv-boxplot: boxes").attr("y",function(a){return i(a.values.Q3)}).attr("width",z).attr("x",F).attr("height",function(a){return Math.abs(i(a.values.Q3)-
i(a.values.Q1))||1}).style("fill",function(a,b){return a.color||l(a,b)}).style("stroke",function(a,b){return a.color||l(a,b)});x.append("line").attr("class","nv-boxplot-median");v.select("line.nv-boxplot-median").watchTransition(q,"nv-boxplot: boxplots line").attr("x1",F).attr("y1",function(a){return i(a.values.Q2)}).attr("x2",h).attr("y2",function(a){return i(a.values.Q2)});g.copy();s=i.copy()});q.renderEnd("nv-boxplot immediate");return a}var b={top:0,right:0,bottom:0,left:0},e=960,j=500,f=Math.floor(Math.random()*
1E4),g=d3.scale.ordinal(),i=d3.scale.linear(),d=function(a){return a.x},k=function(a){return a.y},l=c.utils.defaultColor(),r=null,p,o,w,n,m=d3.dispatch("elementMouseover","elementMouseout","elementMousemove","renderEnd"),B=250,E=null,s,q=c.utils.renderWatch(m,B);a.dispatch=m;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return e},set:function(a){e=a}},height:{get:function(){return j},set:function(a){j=a}},maxBoxWidth:{get:function(){return E},set:function(a){E=
a}},x:{get:function(){return d},set:function(a){d=a}},y:{get:function(){return k},set:function(a){k=a}},xScale:{get:function(){return g},set:function(a){g=a}},yScale:{get:function(){return i},set:function(a){i=a}},xDomain:{get:function(){return p},set:function(a){p=a}},yDomain:{get:function(){return o},set:function(a){o=a}},xRange:{get:function(){return w},set:function(a){w=a}},yRange:{get:function(){return n},set:function(a){n=a}},id:{get:function(){return f},set:function(a){f=a}},margin:{get:function(){return b},
set:function(a){b.top=a.top!==void 0?a.top:b.top;b.right=a.right!==void 0?a.right:b.right;b.bottom=a.bottom!==void 0?a.bottom:b.bottom;b.left=a.left!==void 0?a.left:b.left}},color:{get:function(){return l},set:function(a){l=c.utils.getColor(a)}},duration:{get:function(){return B},set:function(a){B=a;q.reset(B)}}});c.utils.initOptions(a);return a};c.models.boxPlotChart=function(){function a(d){s.reset();s.models(b);k&&s.models(e);l&&s.models(j);d.each(function(d){var q=d3.select(this);c.utils.initSVG(q);
var o=(g||parseInt(q.style("width"))||960)-f.left-f.right,t=(i||parseInt(q.style("height"))||400)-f.top-f.bottom;a.update=function(){B.beforeUpdate();q.transition().duration(E).call(a)};a.container=this;if(!d||!d.length||!d.filter(function(a){return a.values.hasOwnProperty("Q1")&&a.values.hasOwnProperty("Q2")&&a.values.hasOwnProperty("Q3")}).length){d=q.selectAll(".nv-noData").data([m]);d.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");d.attr("x",
f.left+o/2).attr("y",f.top+t/2).text(function(a){return a});return a}q.selectAll(".nv-noData").remove();w=b.xScale();n=b.yScale().clamp(true);var s=q.selectAll("g.nv-wrap.nv-boxPlotWithAxes").data([d]),v=s.enter().append("g").attr("class","nvd3 nv-wrap nv-boxPlotWithAxes").append("g"),x=v.append("defs"),s=s.select("g");v.append("g").attr("class","nv-x nv-axis");v.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line");v.append("g").attr("class","nv-barsWrap");
s.attr("transform","translate("+f.left+","+f.top+")");r&&s.select(".nv-y.nv-axis").attr("transform","translate("+o+",0)");b.width(o).height(t);s.select(".nv-barsWrap").datum(d.filter(function(a){return!a.disabled})).transition().call(b);x.append("clipPath").attr("id","nv-x-label-clip-"+b.id()).append("rect");s.select("#nv-x-label-clip-"+b.id()+" rect").attr("width",w.rangeBand()*(p?2:1)).attr("height",16).attr("x",-w.rangeBand()/(p?1:2));if(k){e.scale(w).ticks(c.utils.calcTicksX(o/100,d)).tickSize(-t,
0);s.select(".nv-x.nv-axis").attr("transform","translate(0,"+n.range()[0]+")");s.select(".nv-x.nv-axis").call(e);d=s.select(".nv-x.nv-axis").selectAll("g");p&&d.selectAll("text").attr("transform",function(a,b,c){return"translate(0,"+(c%2==0?"5":"17")+")"})}if(l){j.scale(n).ticks(Math.floor(t/36)).tickSize(-o,0);s.select(".nv-y.nv-axis").call(j)}s.select(".nv-zeroLine line").attr("x1",0).attr("x2",o).attr("y1",n(0)).attr("y2",n(0))});s.renderEnd("nv-boxplot chart immediate");return a}var b=c.models.boxPlot(),
e=c.models.axis(),j=c.models.axis(),f={top:15,right:10,bottom:50,left:60},g=null,i=null,d=c.utils.getColor(),k=true,l=true,r=false,p=false,o=c.models.tooltip(),w,n,m="No Data Available.",B=d3.dispatch("beforeUpdate","renderEnd"),E=250;e.orient("bottom").showMaxMin(false).tickFormat(function(a){return a});j.orient(r?"right":"left").tickFormat(d3.format(",.1f"));o.duration(0);var s=c.utils.renderWatch(B,E);b.dispatch.on("elementMouseover.tooltip",function(a){o.data(a).hidden(false)});b.dispatch.on("elementMouseout.tooltip",
function(a){o.data(a).hidden(true)});b.dispatch.on("elementMousemove.tooltip",function(){o()});a.dispatch=B;a.boxplot=b;a.xAxis=e;a.yAxis=j;a.tooltip=o;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return g},set:function(a){g=a}},height:{get:function(){return i},set:function(a){i=a}},staggerLabels:{get:function(){return p},set:function(a){p=a}},showXAxis:{get:function(){return k},set:function(a){k=a}},showYAxis:{get:function(){return l},set:function(a){l=
a}},tooltipContent:{get:function(){return o},set:function(a){o=a}},noData:{get:function(){return m},set:function(a){m=a}},margin:{get:function(){return f},set:function(a){f.top=a.top!==void 0?a.top:f.top;f.right=a.right!==void 0?a.right:f.right;f.bottom=a.bottom!==void 0?a.bottom:f.bottom;f.left=a.left!==void 0?a.left:f.left}},duration:{get:function(){return E},set:function(a){E=a;s.reset(E);b.duration(E);e.duration(E);j.duration(E)}},color:{get:function(){return d},set:function(a){d=c.utils.getColor(a);
b.color(d)}},rightAlignYAxis:{get:function(){return r},set:function(a){r=a;j.orient(a?"right":"left")}}});c.utils.inheritOptions(a,b);c.utils.initOptions(a);return a};c.models.bullet=function(){function a(e){e.each(function(a,e){var n=k-b.left-b.right,s=l-b.top-b.bottom;r=d3.select(this);c.utils.initSVG(r);var q=f.call(this,a,e).slice().sort(d3.descending),u=g.call(this,a,e).slice().sort(d3.descending),C=i.call(this,a,e).slice().sort(d3.descending),A=(a.rangeLabels?a.rangeLabels:[]).slice(),t=(a.markerLabels?
a.markerLabels:[]).slice(),p=(a.measureLabels?a.measureLabels:[]).slice(),v=d3.scale.linear().domain(d3.extent(d3.merge([d,q]))).range(j?[n,0]:[0,n]);this.__chart__||d3.scale.linear().domain([0,Infinity]).range(v.range());this.__chart__=v;var x=d3.min(q),z=d3.max(q),F=q[1],q=r.selectAll("g.nv-wrap.nv-bullet").data([a]),n=q.enter().append("g").attr("class","nvd3 nv-wrap nv-bullet").append("g"),h=q.select("g");n.append("rect").attr("class","nv-range nv-rangeMax");n.append("rect").attr("class","nv-range nv-rangeAvg");
n.append("rect").attr("class","nv-range nv-rangeMin");n.append("rect").attr("class","nv-measure");q.attr("transform","translate("+b.left+","+b.top+")");var I=function(a){return Math.abs(v(a)-v(0))},y=function(a){return a<0?v(a):v(0)};h.select("rect.nv-rangeMax").attr("height",s).attr("width",I(z>0?z:x)).attr("x",y(z>0?z:x)).datum(z>0?z:x);h.select("rect.nv-rangeAvg").attr("height",s).attr("width",I(F)).attr("x",y(F)).datum(F);h.select("rect.nv-rangeMin").attr("height",s).attr("width",I(z)).attr("x",
y(z)).attr("width",I(z>0?x:z)).attr("x",y(z>0?x:z)).datum(z>0?x:z);h.select("rect.nv-measure").style("fill",o).attr("height",s/3).attr("y",s/3).attr("width",C<0?v(0)-v(C[0]):v(C[0])-v(0)).attr("x",y(C)).on("mouseover",function(){w.elementMouseover({value:C[0],label:p[0]||"Current",color:d3.select(this).style("fill")})}).on("mousemove",function(){w.elementMousemove({value:C[0],label:p[0]||"Current",color:d3.select(this).style("fill")})}).on("mouseout",function(){w.elementMouseout({value:C[0],label:p[0]||
"Current",color:d3.select(this).style("fill")})});x=s/6;u=u.map(function(a,b){return{value:a,label:t[b]}});n.selectAll("path.nv-markerTriangle").data(u).enter().append("path").attr("class","nv-markerTriangle").attr("transform",function(a){return"translate("+v(a.value)+","+s/2+")"}).attr("d","M0,"+x+"L"+x+","+-x+" "+-x+","+-x+"Z").on("mouseover",function(a){w.elementMouseover({value:a.value,label:a.label||"Previous",color:d3.select(this).style("fill"),pos:[v(a.value),s/2]})}).on("mousemove",function(a){w.elementMousemove({value:a.value,
label:a.label||"Previous",color:d3.select(this).style("fill")})}).on("mouseout",function(a){w.elementMouseout({value:a.value,label:a.label||"Previous",color:d3.select(this).style("fill")})});q.selectAll(".nv-range").on("mouseover",function(a,b){w.elementMouseover({value:a,label:A[b]||(!b?"Maximum":b==1?"Mean":"Minimum"),color:d3.select(this).style("fill")})}).on("mousemove",function(){w.elementMousemove({value:C[0],label:p[0]||"Previous",color:d3.select(this).style("fill")})}).on("mouseout",function(a,
b){w.elementMouseout({value:a,label:A[b]||(!b?"Maximum":b==1?"Mean":"Minimum"),color:d3.select(this).style("fill")})})});return a}var b={top:0,right:0,bottom:0,left:0},e="left",j=false,f=function(a){return a.ranges},g=function(a){return a.markers?a.markers:[0]},i=function(a){return a.measures},d=[0],k=380,l=30,r=null,p=null,o=c.utils.getColor(["#1f77b4"]),w=d3.dispatch("elementMouseover","elementMouseout","elementMousemove");a.dispatch=w;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},
{ranges:{get:function(){return f},set:function(a){f=a}},markers:{get:function(){return g},set:function(a){g=a}},measures:{get:function(){return i},set:function(a){i=a}},forceX:{get:function(){return d},set:function(a){d=a}},width:{get:function(){return k},set:function(a){k=a}},height:{get:function(){return l},set:function(a){l=a}},tickFormat:{get:function(){return p},set:function(a){p=a}},margin:{get:function(){return b},set:function(a){b.top=a.top!==void 0?a.top:b.top;b.right=a.right!==void 0?a.right:
b.right;b.bottom=a.bottom!==void 0?a.bottom:b.bottom;b.left=a.left!==void 0?a.left:b.left}},orient:{get:function(){return e},set:function(a){e=a;j=e=="right"||e=="bottom"}},color:{get:function(){return o},set:function(a){o=c.utils.getColor(a)}}});c.utils.initOptions(a);return a};c.models.bulletChart=function(){function a(e){e.each(function(j,n){var s=d3.select(this);c.utils.initSVG(s);var q=c.utils.availableWidth(l,s,g),u=r-g.top-g.bottom;a.update=function(){a(e)};a.container=this;if(!j||!i.call(this,
j,n)){c.utils.noData(a,s);return a}s.selectAll(".nv-noData").remove();var C=i.call(this,j,n).slice().sort(d3.descending),A=d.call(this,j,n).slice().sort(d3.descending),t=k.call(this,j,n).slice().sort(d3.descending),w=s.selectAll("g.nv-wrap.nv-bulletChart").data([j]),v=w.enter().append("g").attr("class","nvd3 nv-wrap nv-bulletChart").append("g"),s=w.select("g");v.append("g").attr("class","nv-bulletWrap");v.append("g").attr("class","nv-titles");w.attr("transform","translate("+g.left+","+g.top+")");
var x=d3.scale.linear().domain([0,Math.max(C[0],A[0],t[0])]).range(f?[q,0]:[0,q]),z=this.__chart__||d3.scale.linear().domain([0,Infinity]).range(x.range());this.__chart__=x;C=v.select(".nv-titles").append("g").attr("text-anchor","end").attr("transform","translate(-6,"+(r-g.top-g.bottom)/2+")");C.append("text").attr("class","nv-title").text(function(a){return a.title});C.append("text").attr("class","nv-subtitle").attr("dy","1em").text(function(a){return a.subtitle});b.width(q).height(u);C=s.select(".nv-bulletWrap");
d3.transition(C).call(b);var F=p||x.tickFormat(q/100),q=s.selectAll("g.nv-tick").data(x.ticks(o?o:q/50),function(a){return this.textContent||F(a)}),s=q.enter().append("g").attr("class","nv-tick").attr("transform",function(a){return"translate("+z(a)+",0)"}).style("opacity",1.0E-6);s.append("line").attr("y1",u).attr("y2",u*7/6);s.append("text").attr("text-anchor","middle").attr("dy","1em").attr("y",u*7/6).text(F);s=d3.transition(q).attr("transform",function(a){return"translate("+x(a)+",0)"}).style("opacity",
1);s.select("line").attr("y1",u).attr("y2",u*7/6);s.select("text").attr("y",u*7/6);d3.transition(q.exit()).attr("transform",function(a){return"translate("+x(a)+",0)"}).style("opacity",1.0E-6).remove()});d3.timer.flush();return a}var b=c.models.bullet(),e=c.models.tooltip(),j="left",f=false,g={top:5,right:40,bottom:20,left:120},i=function(a){return a.ranges},d=function(a){return a.markers?a.markers:[0]},k=function(a){return a.measures},l=null,r=55,p=null,o=null,w=null,n=d3.dispatch();e.duration(0).headerEnabled(false);
b.dispatch.on("elementMouseover.tooltip",function(a){a.series={key:a.label,value:a.value,color:a.color};e.data(a).hidden(false)});b.dispatch.on("elementMouseout.tooltip",function(){e.hidden(true)});b.dispatch.on("elementMousemove.tooltip",function(){e()});a.bullet=b;a.dispatch=n;a.tooltip=e;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{ranges:{get:function(){return i},set:function(a){i=a}},markers:{get:function(){return d},set:function(a){d=a}},measures:{get:function(){return k},
set:function(a){k=a}},width:{get:function(){return l},set:function(a){l=a}},height:{get:function(){return r},set:function(a){r=a}},tickFormat:{get:function(){return p},set:function(a){p=a}},ticks:{get:function(){return o},set:function(a){o=a}},noData:{get:function(){return w},set:function(a){w=a}},margin:{get:function(){return g},set:function(a){g.top=a.top!==void 0?a.top:g.top;g.right=a.right!==void 0?a.right:g.right;g.bottom=a.bottom!==void 0?a.bottom:g.bottom;g.left=a.left!==void 0?a.left:g.left}},
orient:{get:function(){return j},set:function(a){j=a;f=j=="right"||j=="bottom"}}});c.utils.inheritOptions(a,b);c.utils.initOptions(a);return a};c.models.candlestickBar=function(){function a(v){v.each(function(a){g=d3.select(this);var v=c.utils.availableWidth(e,g,b),F=c.utils.availableHeight(j,g,b);c.utils.initSVG(g);var h=v/a[0].values.length*0.45;i.domain(u||d3.extent(a[0].values.map(k).concat(n)));B?i.range(A||[v*0.5/a[0].values.length,v*(a[0].values.length-0.5)/a[0].values.length]):i.range(A||
[5+h/2,v-h/2-5]);d.domain(C||[d3.min(a[0].values.map(w).concat(m)),d3.max(a[0].values.map(o).concat(m))]).range(t||[F,0]);i.domain()[0]===i.domain()[1]&&(i.domain()[0]?i.domain([i.domain()[0]-i.domain()[0]*0.01,i.domain()[1]+i.domain()[1]*0.01]):i.domain([-1,1]));d.domain()[0]===d.domain()[1]&&(d.domain()[0]?d.domain([d.domain()[0]+d.domain()[0]*0.01,d.domain()[1]-d.domain()[1]*0.01]):d.domain([-1,1]));var a=d3.select(this).selectAll("g.nv-wrap.nv-candlestickBar").data([a[0].values]),q=a.enter().append("g").attr("class",
"nvd3 nv-wrap nv-candlestickBar"),y=q.append("defs"),q=q.append("g"),s=a.select("g");q.append("g").attr("class","nv-ticks");a.attr("transform","translate("+b.left+","+b.top+")");g.on("click",function(a,b){G.chartClick({data:a,index:b,pos:d3.event,id:f})});y.append("clipPath").attr("id","nv-chart-clip-path-"+f).append("rect");a.select("#nv-chart-clip-path-"+f+" rect").attr("width",v).attr("height",F);s.attr("clip-path",E?"url(#nv-chart-clip-path-"+f+")":"");v=a.select(".nv-ticks").selectAll(".nv-tick").data(function(a){return a});
v.exit().remove();F=v.enter().append("g");v.attr("class",function(a,b,c){return(r(a,b)>p(a,b)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+c+"-"+b});F.append("line").attr("class","nv-candlestick-lines").attr("transform",function(a,b){return"translate("+i(k(a,b))+",0)"}).attr("x1",0).attr("y1",function(a,b){return d(o(a,b))}).attr("x2",0).attr("y2",function(a,b){return d(w(a,b))});F.append("rect").attr("class","nv-candlestick-rects nv-bars").attr("transform",function(a,b){return"translate("+
(i(k(a,b))-h/2)+","+(d(l(a,b))-(r(a,b)>p(a,b)?d(p(a,b))-d(r(a,b)):0))+")"}).attr("x",0).attr("y",0).attr("width",h).attr("height",function(a,b){var c=r(a,b),h=p(a,b);return c>h?d(h)-d(c):d(c)-d(h)});v.select(".nv-candlestick-lines").transition().attr("transform",function(a,b){return"translate("+i(k(a,b))+",0)"}).attr("x1",0).attr("y1",function(a,b){return d(o(a,b))}).attr("x2",0).attr("y2",function(a,b){return d(w(a,b))});v.select(".nv-candlestick-rects").transition().attr("transform",function(a,
b){return"translate("+(i(k(a,b))-h/2)+","+(d(l(a,b))-(r(a,b)>p(a,b)?d(p(a,b))-d(r(a,b)):0))+")"}).attr("x",0).attr("y",0).attr("width",h).attr("height",function(a,b){var c=r(a,b),h=p(a,b);return c>h?d(h)-d(c):d(c)-d(h)})});return a}var b={top:0,right:0,bottom:0,left:0},e=null,j=null,f=Math.floor(Math.random()*1E4),g,i=d3.scale.linear(),d=d3.scale.linear(),k=function(a){return a.x},l=function(a){return a.y},r=function(a){return a.open},p=function(a){return a.close},o=function(a){return a.high},w=function(a){return a.low},
n=[],m=[],B=false,E=true,s=c.utils.defaultColor(),q=false,u,C,A,t,G=d3.dispatch("stateChange","changeState","renderEnd","chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove");a.highlightPoint=function(b,c){a.clearHighlights();g.select(".nv-candlestickBar .nv-tick-0-"+b).classed("hover",c)};a.clearHighlights=function(){g.select(".nv-candlestickBar .nv-tick.hover").classed("hover",false)};a.dispatch=G;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},
{width:{get:function(){return e},set:function(a){e=a}},height:{get:function(){return j},set:function(a){j=a}},xScale:{get:function(){return i},set:function(a){i=a}},yScale:{get:function(){return d},set:function(a){d=a}},xDomain:{get:function(){return u},set:function(a){u=a}},yDomain:{get:function(){return C},set:function(a){C=a}},xRange:{get:function(){return A},set:function(a){A=a}},yRange:{get:function(){return t},set:function(a){t=a}},forceX:{get:function(){return n},set:function(a){n=a}},forceY:{get:function(){return m},
set:function(a){m=a}},padData:{get:function(){return B},set:function(a){B=a}},clipEdge:{get:function(){return E},set:function(a){E=a}},id:{get:function(){return f},set:function(a){f=a}},interactive:{get:function(){return q},set:function(a){q=a}},x:{get:function(){return k},set:function(a){k=a}},y:{get:function(){return l},set:function(a){l=a}},open:{get:function(){return r()},set:function(a){r=a}},close:{get:function(){return p()},set:function(a){p=a}},high:{get:function(){return o},set:function(a){o=
a}},low:{get:function(){return w},set:function(a){w=a}},margin:{get:function(){return b},set:function(a){b.top=a.top!=void 0?a.top:b.top;b.right=a.right!=void 0?a.right:b.right;b.bottom=a.bottom!=void 0?a.bottom:b.bottom;b.left=a.left!=void 0?a.left:b.left}},color:{get:function(){return s},set:function(a){s=c.utils.getColor(a)}}});c.utils.initOptions(a);return a};c.models.cumulativeLineChart=function(){function a(h){H.reset();H.models(e);n&&H.models(j);m&&H.models(f);h.each(function(h){function L(){$.data([y]);
var b=a.duration();a.duration(0);a.update();a.duration(b)}var v=d3.select(this);c.utils.initSVG(v);v.classed("nv-chart-"+A,true);var J=this,k=c.utils.availableWidth(p,v,l),H=c.utils.availableHeight(o,v,l);a.update=function(){F===0?v.call(a):v.transition().duration(F).call(a)};a.container=this;t.setter(D(h),a.update).getter(M(h)).update();t.disabled=h.map(function(a){return!!a.disabled});if(!G){var V;G={};for(V in t)G[V]=t[V]instanceof Array?t[V].slice(0):t[V]}V=d3.behavior.drag().on("dragstart",function(){d3.select(a.container).style("cursor",
"ew-resize")}).on("drag",function(){y.x=d3.event.x;y.i=Math.round(I.invert(y.x));L()}).on("dragend",function(){d3.select(a.container).style("cursor","auto");t.index=y.i;z.stateChange(t)});if(!h||!h.length||!h.filter(function(a){return a.values.length}).length){c.utils.noData(a,v);return a}v.selectAll(".nv-noData").remove();u=e.xScale();C=e.yScale();if(q)e.yDomain(null);else{var S=h.filter(function(a){return!a.disabled}).map(function(a){a=d3.extent(a.values,e.y());a[0]<-0.95&&(a[0]=-0.95);return[(a[0]-
a[1])/(1+a[1]),(a[1]-a[0])/(1+a[0])]}),S=[d3.min(S,function(a){return a[0]}),d3.max(S,function(a){return a[1]})];e.yDomain(S)}I.domain([0,h[0].values.length-1]).range([0,k]).clamp(true);var h=b(y.i,h),U=s?"none":"all",W=v.selectAll("g.nv-wrap.nv-cumulativeLine").data([h]),Z=W.enter().append("g").attr("class","nvd3 nv-wrap nv-cumulativeLine").append("g"),S=W.select("g");Z.append("g").attr("class","nv-interactive");Z.append("g").attr("class","nv-x nv-axis").style("pointer-events","none");Z.append("g").attr("class",
"nv-y nv-axis");Z.append("g").attr("class","nv-background");Z.append("g").attr("class","nv-linesWrap").style("pointer-events",U);Z.append("g").attr("class","nv-avgLinesWrap").style("pointer-events","none");Z.append("g").attr("class","nv-legendWrap");Z.append("g").attr("class","nv-controlsWrap");if(w){g.width(k);S.select(".nv-legendWrap").datum(h).call(g);if(l.top!=g.height()){l.top=g.height();H=c.utils.availableHeight(o,v,l)}S.select(".nv-legendWrap").attr("transform","translate(0,"+-l.top+")")}if(E){U=
[{key:"Re-scale y-axis",disabled:!q}];i.width(140).color(["#444","#444","#444"]).rightAlign(false).margin({top:5,right:0,bottom:5,left:20});S.select(".nv-controlsWrap").datum(U).attr("transform","translate(0,"+-l.top+")").call(i)}W.attr("transform","translate("+l.left+","+l.top+")");B&&S.select(".nv-y.nv-axis").attr("transform","translate("+k+",0)");U=h.filter(function(a){return a.tempDisabled});W.select(".tempDisabled").remove();U.length&&W.append("text").attr("class","tempDisabled").attr("x",k/
2).attr("y","-.71em").style("text-anchor","end").text(U.map(function(a){return a.key}).join(", ")+" values cannot be calculated for this time period.");if(s){d.width(k).height(H).margin({left:l.left,top:l.top}).svgContainer(v).xScale(u);W.select(".nv-interactive").call(d)}Z.select(".nv-background").append("rect");S.select(".nv-background rect").attr("width",k).attr("height",H);e.y(function(a){return a.display.y}).width(k).height(H).color(h.map(function(a,b){return a.color||r(a,b)}).filter(function(a,
b){return!h[b].disabled&&!h[b].tempDisabled}));W=S.select(".nv-linesWrap").datum(h.filter(function(a){return!a.disabled&&!a.tempDisabled}));W.call(e);h.forEach(function(a,b){a.seriesIndex=b});Z=h.filter(function(a){return!a.disabled&&!!x(a)});Z=S.select(".nv-avgLinesWrap").selectAll("line").data(Z,function(a){return a.key});U=function(a){a=C(x(a));return a<0?0:a>H?H:a};Z.enter().append("line").style("stroke-width",2).style("stroke-dasharray","10,10").style("stroke",function(a){return e.color()(a,
a.seriesIndex)}).attr("x1",0).attr("x2",k).attr("y1",U).attr("y2",U);Z.style("stroke-opacity",function(a){a=C(x(a));return a<0||a>H?0:1}).attr("x1",0).attr("x2",k).attr("y1",U).attr("y2",U);Z.exit().remove();var $=W.selectAll(".nv-indexLine").data([y]);$.enter().append("rect").attr("class","nv-indexLine").attr("width",3).attr("x",-2).attr("fill","red").attr("fill-opacity",0.5).style("pointer-events","all").call(V);$.attr("transform",function(a){return"translate("+I(a.i)+",0)"}).attr("height",H);if(n){j.scale(u)._ticks(c.utils.calcTicksX(k/
70,h)).tickSize(-H,0);S.select(".nv-x.nv-axis").attr("transform","translate(0,"+C.range()[0]+")");S.select(".nv-x.nv-axis").call(j)}if(m){f.scale(C)._ticks(c.utils.calcTicksY(H/36,h)).tickSize(-k,0);S.select(".nv-y.nv-axis").call(f)}S.select(".nv-background rect").on("click",function(){y.x=d3.mouse(this)[0];y.i=Math.round(I.invert(y.x));t.index=y.i;z.stateChange(t);L()});e.dispatch.on("elementClick",function(a){y.i=a.pointIndex;y.x=I(y.i);t.index=y.i;z.stateChange(t);L()});i.dispatch.on("legendClick",
function(b){b.disabled=!b.disabled;q=!b.disabled;t.rescaleY=q;z.stateChange(t);a.update()});g.dispatch.on("stateChange",function(b){for(var c in b)t[c]=b[c];z.stateChange(t);a.update()});d.dispatch.on("elementMousemove",function(b){e.clearHighlights();var L,y,m,D=[];h.filter(function(a,b){a.seriesIndex=b;return!a.disabled}).forEach(function(h,d){y=c.interactiveBisect(h.values,b.pointXValue,a.x());e.highlightPoint(d,y,true);var f=h.values[y];if(typeof f!=="undefined"){typeof L==="undefined"&&(L=f);
typeof m==="undefined"&&(m=a.xScale()(a.x()(f,y)));D.push({key:h.key,value:a.y()(f,y),color:r(h,h.seriesIndex)})}});if(D.length>2){var v=a.yScale().invert(b.mouseY),g=0.03*Math.abs(a.yScale().domain()[0]-a.yScale().domain()[1]),v=c.nearestValueIndex(D.map(function(a){return a.value}),v,g);if(v!==null)D[v].highlight=true}v=j.tickFormat()(a.x()(L,y),y);d.tooltip.chartContainer(J.parentNode).valueFormatter(function(a){return f.tickFormat()(a)}).data({value:v,series:D})();d.renderGuideLine(m)});d.dispatch.on("elementMouseout",
function(){e.clearHighlights()});z.on("changeState",function(b){if(typeof b.disabled!=="undefined"){h.forEach(function(a,c){a.disabled=b.disabled[c]});t.disabled=b.disabled}if(typeof b.index!=="undefined"){y.i=b.index;y.x=I(y.i);t.index=b.index;$.data([y])}if(typeof b.rescaleY!=="undefined")q=b.rescaleY;a.update()})});H.renderEnd("cumulativeLineChart immediate");return a}function b(a,b){J||(J=e.y());return b.map(function(b){if(!b.values)return b;var c=b.values[a];if(c==null)return b;var e=J(c,a);
if(e<-0.95&&!h){b.tempDisabled=true;return b}b.tempDisabled=false;b.values=b.values.map(function(a,b){a.display={y:(J(a,b)-e)/(1+e)};return a});return b})}var e=c.models.line(),j=c.models.axis(),f=c.models.axis(),g=c.models.legend(),i=c.models.legend(),d=c.interactiveGuideline(),k=c.models.tooltip(),l={top:30,right:30,bottom:50,left:60},r=c.utils.defaultColor(),p=null,o=null,w=true,n=true,m=true,B=false,E=true,s=false,q=true,u,C,A=e.id(),t=c.utils.state(),G=null,v=null,x=function(a){return a.average},
z=d3.dispatch("stateChange","changeState","renderEnd"),F=250,h=false;t.index=0;t.rescaleY=q;j.orient("bottom").tickPadding(7);f.orient(B?"right":"left");k.valueFormatter(function(a,b){return f.tickFormat()(a,b)}).headerFormatter(function(a,b){return j.tickFormat()(a,b)});i.updateState(false);var I=d3.scale.linear(),y={i:0,x:0},H=c.utils.renderWatch(z,F),M=function(a){return function(){return{active:a.map(function(a){return!a.disabled}),index:y.i,rescaleY:q}}},D=function(a){return function(b){if(b.index!==
void 0)y.i=b.index;if(b.rescaleY!==void 0)q=b.rescaleY;b.active!==void 0&&a.forEach(function(a,c){a.disabled=!b.active[c]})}};e.dispatch.on("elementMouseover.tooltip",function(b){var c={x:a.x()(b.point),y:a.y()(b.point),color:b.point.color};b.point=c;k.data(b).hidden(false)});e.dispatch.on("elementMouseout.tooltip",function(){k.hidden(true)});var J=null;a.dispatch=z;a.lines=e;a.legend=g;a.controls=i;a.xAxis=j;a.yAxis=f;a.interactiveLayer=d;a.state=t;a.tooltip=k;a.options=c.utils.optionsFunc.bind(a);
a._options=Object.create({},{width:{get:function(){return p},set:function(a){p=a}},height:{get:function(){return o},set:function(a){o=a}},rescaleY:{get:function(){return q},set:function(a){q=a}},showControls:{get:function(){return E},set:function(a){E=a}},showLegend:{get:function(){return w},set:function(a){w=a}},average:{get:function(){return x},set:function(a){x=a}},defaultState:{get:function(){return G},set:function(a){G=a}},noData:{get:function(){return v},set:function(a){v=a}},showXAxis:{get:function(){return n},
set:function(a){n=a}},showYAxis:{get:function(){return m},set:function(a){m=a}},noErrorCheck:{get:function(){return h},set:function(a){h=a}},margin:{get:function(){return l},set:function(a){l.top=a.top!==void 0?a.top:l.top;l.right=a.right!==void 0?a.right:l.right;l.bottom=a.bottom!==void 0?a.bottom:l.bottom;l.left=a.left!==void 0?a.left:l.left}},color:{get:function(){return r},set:function(a){r=c.utils.getColor(a);g.color(r)}},useInteractiveGuideline:{get:function(){return s},set:function(b){s=b;
if(b===true){a.interactive(false);a.useVoronoi(false)}}},rightAlignYAxis:{get:function(){return B},set:function(a){B=a;f.orient(a?"right":"left")}},duration:{get:function(){return F},set:function(a){F=a;e.duration(F);j.duration(F);f.duration(F);H.reset(F)}}});c.utils.inheritOptions(a,e);c.utils.initOptions(a);return a};c.models.discreteBar=function(){function a(f){A.reset();f.each(function(a){var f=e-b.left-b.right,t=j-b.top-b.bottom;g=d3.select(this);c.utils.initSVG(g);a.forEach(function(a,b){a.values.forEach(function(a){a.series=
b})});var z=n&&m?[]:a.map(function(a){return a.values.map(function(a,b){return{x:k(a,b),y:l(a,b),y0:a.y0}})});i.domain(n||d3.merge(z).map(function(a){return a.x})).rangeBands(B||[0,f],0.1);d.domain(m||d3.extent(d3.merge(z).map(function(a){return a.y}).concat(r)));o?d.range(E||[t-(d.domain()[0]<0?12:0),d.domain()[1]>0?12:0]):d.range(E||[t,0]);C=C||d.copy().range([d(0),d(0)]);f=g.selectAll("g.nv-wrap.nv-discretebar").data([a]);t=f.enter().append("g").attr("class","nvd3 nv-wrap nv-discretebar").append("g");
f.select("g");t.append("g").attr("class","nv-groups");f.attr("transform","translate("+b.left+","+b.top+")");f=f.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a){return a.key});f.enter().append("g").style("stroke-opacity",1.0E-6).style("fill-opacity",1.0E-6);f.exit().watchTransition(A,"discreteBar: exit groups").style("stroke-opacity",1.0E-6).style("fill-opacity",1.0E-6).remove();f.attr("class",function(a,b){return"nv-group nv-series-"+b}).classed("hover",function(a){return a.hover});
f.watchTransition(A,"discreteBar: groups").style("stroke-opacity",1).style("fill-opacity",0.75);f=f.selectAll("g.nv-bar").data(function(a){return a.values});f.exit().remove();t=f.enter().append("g").attr("transform",function(a,b){return"translate("+(i(k(a,b))+i.rangeBand()*0.05)+", "+d(0)+")"}).on("mouseover",function(a,b){d3.select(this).classed("hover",true);s.elementMouseover({data:a,index:b,color:d3.select(this).style("fill")})}).on("mouseout",function(a,b){d3.select(this).classed("hover",false);
s.elementMouseout({data:a,index:b,color:d3.select(this).style("fill")})}).on("mousemove",function(a,b){s.elementMousemove({data:a,index:b,color:d3.select(this).style("fill")})}).on("click",function(a,b){s.elementClick({data:a,index:b,color:d3.select(this).style("fill")});d3.event.stopPropagation()}).on("dblclick",function(a,b){s.elementDblClick({data:a,index:b,color:d3.select(this).style("fill")});d3.event.stopPropagation()});t.append("rect").attr("height",0).attr("width",i.rangeBand()*0.9/a.length);
if(o){t.append("text").attr("text-anchor","middle");f.select("text").text(function(a,b){return w(l(a,b))}).watchTransition(A,"discreteBar: bars text").attr("x",i.rangeBand()*0.9/2).attr("y",function(a,b){return l(a,b)<0?d(l(a,b))-d(0)+12:-4})}else f.selectAll("text").remove();f.attr("class",function(a,b){return l(a,b)<0?"nv-bar negative":"nv-bar positive"}).style("fill",function(a,b){return a.color||p(a,b)}).style("stroke",function(a,b){return a.color||p(a,b)}).select("rect").attr("class",q).watchTransition(A,
"discreteBar: bars rect").attr("width",i.rangeBand()*0.9/a.length);f.watchTransition(A,"discreteBar: bars").attr("transform",function(a,b){var c=i(k(a,b))+i.rangeBand()*0.05,e=l(a,b)<0?d(0):d(0)-d(l(a,b))<1?d(0)-1:d(l(a,b));return"translate("+c+", "+e+")"}).select("rect").attr("height",function(a,b){return Math.max(Math.abs(d(l(a,b))-d(m&&m[0]||0))||1)});i.copy();C=d.copy()});A.renderEnd("discreteBar immediate");return a}var b={top:0,right:0,bottom:0,left:0},e=960,j=500,f=Math.floor(Math.random()*
1E4),g,i=d3.scale.ordinal(),d=d3.scale.linear(),k=function(a){return a.x},l=function(a){return a.y},r=[0],p=c.utils.defaultColor(),o=false,w=d3.format(",.2f"),n,m,B,E,s=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),q="discreteBar",u=250,C,A=c.utils.renderWatch(s,u);a.dispatch=s;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return e},set:function(a){e=a}},height:{get:function(){return j},
set:function(a){j=a}},forceY:{get:function(){return r},set:function(a){r=a}},showValues:{get:function(){return o},set:function(a){o=a}},x:{get:function(){return k},set:function(a){k=a}},y:{get:function(){return l},set:function(a){l=a}},xScale:{get:function(){return i},set:function(a){i=a}},yScale:{get:function(){return d},set:function(a){d=a}},xDomain:{get:function(){return n},set:function(a){n=a}},yDomain:{get:function(){return m},set:function(a){m=a}},xRange:{get:function(){return B},set:function(a){B=
a}},yRange:{get:function(){return E},set:function(a){E=a}},valueFormat:{get:function(){return w},set:function(a){w=a}},id:{get:function(){return f},set:function(a){f=a}},rectClass:{get:function(){return q},set:function(a){q=a}},margin:{get:function(){return b},set:function(a){b.top=a.top!==void 0?a.top:b.top;b.right=a.right!==void 0?a.right:b.right;b.bottom=a.bottom!==void 0?a.bottom:b.bottom;b.left=a.left!==void 0?a.left:b.left}},color:{get:function(){return p},set:function(a){p=c.utils.getColor(a)}},
duration:{get:function(){return u},set:function(a){u=a;A.reset(u)}}});c.utils.initOptions(a);return a};c.models.discreteBarChart=function(){function a(f){u.reset();u.models(b);l&&u.models(e);r&&u.models(j);f.each(function(f){var k=d3.select(this);c.utils.initSVG(k);var u=c.utils.availableWidth(i,k,g),v=c.utils.availableHeight(d,k,g);a.update=function(){s.beforeUpdate();k.transition().duration(q).call(a)};a.container=this;if(!f||!f.length||!f.filter(function(a){return a.values.length}).length){c.utils.noData(a,
k);return a}k.selectAll(".nv-noData").remove();m=b.xScale();B=b.yScale().clamp(true);var x=k.selectAll("g.nv-wrap.nv-discreteBarWithAxes").data([f]),z=x.enter().append("g").attr("class","nvd3 nv-wrap nv-discreteBarWithAxes").append("g"),F=z.append("defs"),x=x.select("g");z.append("g").attr("class","nv-x nv-axis");z.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line");z.append("g").attr("class","nv-barsWrap");x.attr("transform","translate("+g.left+","+g.top+
")");p&&x.select(".nv-y.nv-axis").attr("transform","translate("+u+",0)");b.width(u).height(v);x.select(".nv-barsWrap").datum(f.filter(function(a){return!a.disabled})).transition().call(b);F.append("clipPath").attr("id","nv-x-label-clip-"+b.id()).append("rect");x.select("#nv-x-label-clip-"+b.id()+" rect").attr("width",m.rangeBand()*(o?2:1)).attr("height",16).attr("x",-m.rangeBand()/(o?1:2));if(l){e.scale(m)._ticks(c.utils.calcTicksX(u/100,f)).tickSize(-v,0);x.select(".nv-x.nv-axis").attr("transform",
"translate(0,"+(B.range()[0]+(b.showValues()&&B.domain()[0]<0?16:0))+")");x.select(".nv-x.nv-axis").call(e);z=x.select(".nv-x.nv-axis").selectAll("g");o&&z.selectAll("text").attr("transform",function(a,b,c){return"translate(0,"+(c%2==0?"5":"17")+")"});n&&z.selectAll(".tick text").attr("transform","rotate("+n+" 0,0)").style("text-anchor",n>0?"start":"end");w&&x.selectAll(".tick text").call(c.utils.wrapTicks,a.xAxis.rangeBand())}if(r){j.scale(B)._ticks(c.utils.calcTicksY(v/36,f)).tickSize(-u,0);x.select(".nv-y.nv-axis").call(j)}x.select(".nv-zeroLine line").attr("x1",
0).attr("x2",u).attr("y1",B(0)).attr("y2",B(0))});u.renderEnd("discreteBar chart immediate");return a}var b=c.models.discreteBar(),e=c.models.axis(),j=c.models.axis(),f=c.models.tooltip(),g={top:15,right:10,bottom:50,left:60},i=null,d=null,k=c.utils.getColor(),l=true,r=true,p=false,o=false,w=false,n=0,m,B,E=null,s=d3.dispatch("beforeUpdate","renderEnd"),q=250;e.orient("bottom").showMaxMin(false).tickFormat(function(a){return a});j.orient(p?"right":"left").tickFormat(d3.format(",.1f"));f.duration(0).headerEnabled(false).valueFormatter(function(a,
b){return j.tickFormat()(a,b)}).keyFormatter(function(a,b){return e.tickFormat()(a,b)});var u=c.utils.renderWatch(s,q);b.dispatch.on("elementMouseover.tooltip",function(b){b.series={key:a.x()(b.data),value:a.y()(b.data),color:b.color};f.data(b).hidden(false)});b.dispatch.on("elementMouseout.tooltip",function(){f.hidden(true)});b.dispatch.on("elementMousemove.tooltip",function(){f()});a.dispatch=s;a.discretebar=b;a.xAxis=e;a.yAxis=j;a.tooltip=f;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},
{width:{get:function(){return i},set:function(a){i=a}},height:{get:function(){return d},set:function(a){d=a}},staggerLabels:{get:function(){return o},set:function(a){o=a}},rotateLabels:{get:function(){return n},set:function(a){n=a}},wrapLabels:{get:function(){return w},set:function(a){w=!!a}},showXAxis:{get:function(){return l},set:function(a){l=a}},showYAxis:{get:function(){return r},set:function(a){r=a}},noData:{get:function(){return E},set:function(a){E=a}},margin:{get:function(){return g},set:function(a){g.top=
a.top!==void 0?a.top:g.top;g.right=a.right!==void 0?a.right:g.right;g.bottom=a.bottom!==void 0?a.bottom:g.bottom;g.left=a.left!==void 0?a.left:g.left}},duration:{get:function(){return q},set:function(a){q=a;u.reset(q);b.duration(q);e.duration(q);j.duration(q)}},color:{get:function(){return k},set:function(a){k=c.utils.getColor(a);b.color(k)}},rightAlignYAxis:{get:function(){return p},set:function(a){p=a;j.orient(a?"right":"left")}}});c.utils.inheritOptions(a,b);c.utils.initOptions(a);return a};c.models.distribution=
function(){function a(e){p.reset();e.each(function(a){var e=f=="x"?"y":"x",m=d3.select(this);c.utils.initSVG(m);r=r||d;a=m.selectAll("g.nv-distribution").data([a]);a.enter().append("g").attr("class","nvd3 nv-distribution").append("g");m=a.select("g");a.attr("transform","translate("+b.left+","+b.top+")");a=m.selectAll("g.nv-dist").data(function(a){return a},function(a){return a.key});a.enter().append("g");a.attr("class",function(a,b){return"nv-dist nv-series-"+b}).style("stroke",function(a,b){return i(a,
b)});m=a.selectAll("line.nv-dist"+f).data(function(a){return a.values});m.enter().append("line").attr(f+"1",function(a,b){return r(g(a,b))}).attr(f+"2",function(a,b){return r(g(a,b))});p.transition(a.exit().selectAll("line.nv-dist"+f),"dist exit").attr(f+"1",function(a,b){return d(g(a,b))}).attr(f+"2",function(a,b){return d(g(a,b))}).style("stroke-opacity",0).remove();m.attr("class",function(a,b){return"nv-dist"+f+" nv-dist"+f+"-"+b}).attr(e+"1",0).attr(e+"2",j);p.transition(m,"dist").attr(f+"1",
function(a,b){return d(g(a,b))}).attr(f+"2",function(a,b){return d(g(a,b))});r=d.copy()});p.renderEnd("distribution immediate");return a}var b={top:0,right:0,bottom:0,left:0},e=400,j=8,f="x",g=function(a){return a[f]},i=c.utils.defaultColor(),d=d3.scale.linear(),k=250,l=d3.dispatch("renderEnd"),r,p=c.utils.renderWatch(l,k);a.options=c.utils.optionsFunc.bind(a);a.dispatch=l;a.margin=function(c){if(!arguments.length)return b;b.top=typeof c.top!="undefined"?c.top:b.top;b.right=typeof c.right!="undefined"?
c.right:b.right;b.bottom=typeof c.bottom!="undefined"?c.bottom:b.bottom;b.left=typeof c.left!="undefined"?c.left:b.left;return a};a.width=function(b){if(!arguments.length)return e;e=b;return a};a.axis=function(b){if(!arguments.length)return f;f=b;return a};a.size=function(b){if(!arguments.length)return j;j=b;return a};a.getData=function(b){if(!arguments.length)return g;g=d3.functor(b);return a};a.scale=function(b){if(!arguments.length)return d;d=b;return a};a.color=function(b){if(!arguments.length)return i;
i=c.utils.getColor(b);return a};a.duration=function(b){if(!arguments.length)return k;k=b;p.reset(k);return a};return a};c.models.furiousLegend=function(){function a(m){function B(a,b){if(n!="furious")return"#000";if(o)return a.disengaged?g(a,b):"#fff";if(!o)return a.disabled?g(a,b):"#fff"}function E(a,b){return o&&n=="furious"?a.disengaged?"#fff":g(a,b):a.disabled?"#fff":g(a,b)}m.each(function(a){var m=e-b.left-b.right,u=d3.select(this);c.utils.initSVG(u);u=u.selectAll("g.nv-legend").data([a]);u.enter().append("g").attr("class",
"nvd3 nv-legend").append("g");a=u.select("g");u.attr("transform","translate("+b.left+","+b.top+")");var C=a.selectAll(".nv-series").data(function(a){return n!="furious"?a:a.filter(function(a){return o?true:!a.disengaged})}),u=C.enter().append("g").attr("class","nv-series"),A;if(n=="classic"){u.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5);A=C.select("circle")}else if(n=="furious"){u.append("rect").style("stroke-width",2).attr("class","nv-legend-symbol").attr("rx",
3).attr("ry",3);A=C.select("rect");u.append("g").attr("class","nv-check-box").property("innerHTML",'<path d="M0.5,5 L22.5,5 L22.5,26.5 L0.5,26.5 L0.5,5 Z" class="nv-box"></path><path d="M5.5,12.8618467 L11.9185089,19.2803556 L31,0.198864511" class="nv-check"></path>').attr("transform","translate(-10,-8)scale(0.5)");C.select(".nv-check-box").each(function(a,b){d3.select(this).selectAll("path").attr("stroke",B(a,b))})}u.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",
".32em").attr("dx","8");var t=C.select("text.nv-legend-text");C.on("mouseover",function(a,b){w.legendMouseover(a,b)}).on("mouseout",function(a,b){w.legendMouseout(a,b)}).on("click",function(a,b){w.legendClick(a,b);var c=C.data();if(r){if(n=="classic")if(p){c.forEach(function(a){a.disabled=true});a.disabled=false}else{a.disabled=!a.disabled;c.every(function(a){return a.disabled})&&c.forEach(function(a){a.disabled=false})}else if(n=="furious")if(o){a.disengaged=!a.disengaged;a.userDisabled=a.userDisabled==
void 0?!!a.disabled:a.userDisabled;a.disabled=a.disengaged||a.userDisabled}else if(!o){a.disabled=!a.disabled;a.userDisabled=a.disabled;c.filter(function(a){return!a.disengaged}).every(function(a){return a.userDisabled})&&c.forEach(function(a){a.disabled=a.userDisabled=false})}w.stateChange({disabled:c.map(function(a){return!!a.disabled}),disengaged:c.map(function(a){return!!a.disengaged})})}}).on("dblclick",function(a,b){if(!(n=="furious"&&o)){w.legendDblclick(a,b);if(r){var c=C.data();c.forEach(function(a){a.disabled=
true;if(n=="furious")a.userDisabled=a.disabled});a.disabled=false;if(n=="furious")a.userDisabled=a.disabled;w.stateChange({disabled:c.map(function(a){return!!a.disabled})})}}});C.classed("nv-disabled",function(a){return a.userDisabled});C.exit().remove();t.attr("fill",B).text(f);var G;switch(n){case "furious":G=23;break;case "classic":G=20}if(d){var v=[];C.each(function(a){var b;if(f(a).length>i){b=f(a).substring(0,i);b=d3.select(this).select("text").text(b+"...");d3.select(this).append("svg:title").text(f(a))}else b=
d3.select(this).select("text");var h;try{h=b.node().getComputedTextLength();if(h<=0)throw Error();}catch(e){h=c.utils.calcApproxTextWidth(b)}v.push(h+k)});for(var x=0,z=0,u=[];z<m&&x<v.length;){u[x]=v[x];z=z+v[x++]}for(x===0&&(x=1);z>m&&x>1;){u=[];x--;for(z=0;z<v.length;z++)if(v[z]>(u[z%x]||0))u[z%x]=v[z];z=u.reduce(function(a,b){return a+b})}for(var F=[],h=m=0;m<x;m++){F[m]=h;h=h+u[m]}C.attr("transform",function(a,b){return"translate("+F[b%x]+","+(5+Math.floor(b/x)*G)+")"});l?a.attr("transform",
"translate("+(e-b.right-z)+","+b.top+")"):a.attr("transform","translate(0,"+b.top+")");j=b.top+b.bottom+Math.ceil(v.length/x)*G}else{var I=5,y=5,H=0,M;C.attr("transform",function(){var a=d3.select(this).select("text").node().getComputedTextLength()+k;M=y;if(e<b.left+b.right+M+a){y=M=5;I=I+G}y=y+a;y>H&&(H=y);return"translate("+M+","+I+")"});a.attr("transform","translate("+(e-b.right-H)+","+b.top+")");j=b.top+b.bottom+I+15}n=="furious"&&A.attr("width",function(a,b){return t[0][b].getComputedTextLength()+
27}).attr("height",18).attr("y",-9).attr("x",-15);A.style("fill",E).style("stroke",function(a,b){return a.color||g(a,b)})});return a}var b={top:5,right:0,bottom:5,left:0},e=400,j=20,f=function(a){return a.key},g=c.utils.getColor(),i=20,d=true,k=28,l=true,r=true,p=false,o=false,w=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange"),n="classic";a.dispatch=w;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return e},set:function(a){e=
a}},height:{get:function(){return j},set:function(a){j=a}},key:{get:function(){return f},set:function(a){f=a}},align:{get:function(){return d},set:function(a){d=a}},rightAlign:{get:function(){return l},set:function(a){l=a}},maxKeyLength:{get:function(){return i},set:function(a){i=a}},padding:{get:function(){return k},set:function(a){k=a}},updateState:{get:function(){return r},set:function(a){r=a}},radioButtonMode:{get:function(){return p},set:function(a){p=a}},expanded:{get:function(){return o},set:function(a){o=
a}},vers:{get:function(){return n},set:function(a){n=a}},margin:{get:function(){return b},set:function(a){b.top=a.top!==void 0?a.top:b.top;b.right=a.right!==void 0?a.right:b.right;b.bottom=a.bottom!==void 0?a.bottom:b.bottom;b.left=a.left!==void 0?a.left:b.left}},color:{get:function(){return g},set:function(a){g=c.utils.getColor(a)}}});c.utils.initOptions(a);return a};c.models.historicalBar=function(){function a(A){A.each(function(a){C.reset();g=d3.select(this);var A=c.utils.availableWidth(e,g,b),
v=c.utils.availableHeight(j,g,b);c.utils.initSVG(g);i.domain(m||d3.extent(a[0].values.map(k).concat(r)));o?i.range(E||[A*0.5/a[0].values.length,A*(a[0].values.length-0.5)/a[0].values.length]):i.range(E||[0,A]);d.domain(B||d3.extent(a[0].values.map(l).concat(p))).range(s||[v,0]);i.domain()[0]===i.domain()[1]&&(i.domain()[0]?i.domain([i.domain()[0]-i.domain()[0]*0.01,i.domain()[1]+i.domain()[1]*0.01]):i.domain([-1,1]));d.domain()[0]===d.domain()[1]&&(d.domain()[0]?d.domain([d.domain()[0]+d.domain()[0]*
0.01,d.domain()[1]-d.domain()[1]*0.01]):d.domain([-1,1]));var x=g.selectAll("g.nv-wrap.nv-historicalBar-"+f).data([a[0].values]),z=x.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBar-"+f),F=z.append("defs"),z=z.append("g"),h=x.select("g");z.append("g").attr("class","nv-bars");x.attr("transform","translate("+b.left+","+b.top+")");g.on("click",function(a,b){q.chartClick({data:a,index:b,pos:d3.event,id:f})});F.append("clipPath").attr("id","nv-chart-clip-path-"+f).append("rect");x.select("#nv-chart-clip-path-"+
f+" rect").attr("width",A).attr("height",v);h.attr("clip-path",w?"url(#nv-chart-clip-path-"+f+")":"");v=x.select(".nv-bars").selectAll(".nv-bar").data(function(a){return a},function(a,b){return k(a,b)});v.exit().remove();v.enter().append("rect").attr("x",0).attr("y",function(a,b){return c.utils.NaNtoZero(d(Math.max(0,l(a,b))))}).attr("height",function(a,b){return c.utils.NaNtoZero(Math.abs(d(l(a,b))-d(0)))}).attr("transform",function(b,c){return"translate("+(i(k(b,c))-A/a[0].values.length*0.45)+",0)"}).on("mouseover",
function(a,b){if(u){d3.select(this).classed("hover",true);q.elementMouseover({data:a,index:b,color:d3.select(this).style("fill")})}}).on("mouseout",function(a,b){if(u){d3.select(this).classed("hover",false);q.elementMouseout({data:a,index:b,color:d3.select(this).style("fill")})}}).on("mousemove",function(a,b){u&&q.elementMousemove({data:a,index:b,color:d3.select(this).style("fill")})}).on("click",function(a,b){if(u){q.elementClick({data:a,index:b,color:d3.select(this).style("fill")});d3.event.stopPropagation()}}).on("dblclick",
function(a,b){if(u){q.elementDblClick({data:a,index:b,color:d3.select(this).style("fill")});d3.event.stopPropagation()}});v.attr("fill",function(a,b){return n(a,b)}).attr("class",function(a,b,c){return(l(a,b)<0?"nv-bar negative":"nv-bar positive")+" nv-bar-"+c+"-"+b}).watchTransition(C,"bars").attr("transform",function(b,c){return"translate("+(i(k(b,c))-A/a[0].values.length*0.45)+",0)"}).attr("width",A/a[0].values.length*0.9);v.watchTransition(C,"bars").attr("y",function(a,b){var h=l(a,b)<0?d(0):
d(0)-d(l(a,b))<1?d(0)-1:d(l(a,b));return c.utils.NaNtoZero(h)}).attr("height",function(a,b){return c.utils.NaNtoZero(Math.max(Math.abs(d(l(a,b))-d(0)),1))})});C.renderEnd("historicalBar immediate");return a}var b={top:0,right:0,bottom:0,left:0},e=null,j=null,f=Math.floor(Math.random()*1E4),g=null,i=d3.scale.linear(),d=d3.scale.linear(),k=function(a){return a.x},l=function(a){return a.y},r=[],p=[0],o=false,w=true,n=c.utils.defaultColor(),m,B,E,s,q=d3.dispatch("chartClick","elementClick","elementDblClick",
"elementMouseover","elementMouseout","elementMousemove","renderEnd"),u=true,C=c.utils.renderWatch(q,0);a.highlightPoint=function(a,b){g.select(".nv-bars .nv-bar-0-"+a).classed("hover",b)};a.clearHighlights=function(){g.select(".nv-bars .nv-bar.hover").classed("hover",false)};a.dispatch=q;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return e},set:function(a){e=a}},height:{get:function(){return j},set:function(a){j=a}},forceX:{get:function(){return r},set:function(a){r=
a}},forceY:{get:function(){return p},set:function(a){p=a}},padData:{get:function(){return o},set:function(a){o=a}},x:{get:function(){return k},set:function(a){k=a}},y:{get:function(){return l},set:function(a){l=a}},xScale:{get:function(){return i},set:function(a){i=a}},yScale:{get:function(){return d},set:function(a){d=a}},xDomain:{get:function(){return m},set:function(a){m=a}},yDomain:{get:function(){return B},set:function(a){B=a}},xRange:{get:function(){return E},set:function(a){E=a}},yRange:{get:function(){return s},
set:function(a){s=a}},clipEdge:{get:function(){return w},set:function(a){w=a}},id:{get:function(){return f},set:function(a){f=a}},interactive:{get:function(){return u},set:function(a){u=a}},margin:{get:function(){return b},set:function(a){b.top=a.top!==void 0?a.top:b.top;b.right=a.right!==void 0?a.right:b.right;b.bottom=a.bottom!==void 0?a.bottom:b.bottom;b.left=a.left!==void 0?a.left:b.left}},color:{get:function(){return n},set:function(a){n=c.utils.getColor(a)}}});c.utils.initOptions(a);return a};
c.models.historicalBarChart=function(a){function b(a){a.each(function(d){G.reset();G.models(e);w&&G.models(j);n&&G.models(f);var z=d3.select(this),F=this;c.utils.initSVG(z);var h=c.utils.availableWidth(r,z,k),I=c.utils.availableHeight(p,z,k);b.update=function(){z.transition().duration(t).call(b)};b.container=this;q.disabled=d.map(function(a){return!!a.disabled});if(!u){var y;u={};for(y in q)u[y]=q[y]instanceof Array?q[y].slice(0):q[y]}if(!d||!d.length||!d.filter(function(a){return a.values.length}).length){c.utils.noData(b,
z);return b}z.selectAll(".nv-noData").remove();E=e.xScale();s=e.yScale();var H=z.selectAll("g.nv-wrap.nv-historicalBarChart").data([d]);y=H.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBarChart").append("g");var C=H.select("g");y.append("g").attr("class","nv-x nv-axis");y.append("g").attr("class","nv-y nv-axis");y.append("g").attr("class","nv-barsWrap");y.append("g").attr("class","nv-legendWrap");y.append("g").attr("class","nv-interactive");if(o){g.width(h);C.select(".nv-legendWrap").datum(d).call(g);
if(k.top!=g.height()){k.top=g.height();I=c.utils.availableHeight(p,z,k)}H.select(".nv-legendWrap").attr("transform","translate(0,"+-k.top+")")}H.attr("transform","translate("+k.left+","+k.top+")");m&&C.select(".nv-y.nv-axis").attr("transform","translate("+h+",0)");if(B){i.width(h).height(I).margin({left:k.left,top:k.top}).svgContainer(z).xScale(E);H.select(".nv-interactive").call(i)}e.width(h).height(I).color(d.map(function(a,b){return a.color||l(a,b)}).filter(function(a,b){return!d[b].disabled}));
C.select(".nv-barsWrap").datum(d.filter(function(a){return!a.disabled})).transition().call(e);if(w){j.scale(E)._ticks(c.utils.calcTicksX(h/100,d)).tickSize(-I,0);C.select(".nv-x.nv-axis").attr("transform","translate(0,"+s.range()[0]+")");C.select(".nv-x.nv-axis").transition().call(j)}if(n){f.scale(s)._ticks(c.utils.calcTicksY(I/36,d)).tickSize(-h,0);C.select(".nv-y.nv-axis").transition().call(f)}i.dispatch.on("elementMousemove",function(a){e.clearHighlights();var h,y,m,g=[];d.filter(function(a,b){a.seriesIndex=
b;return!a.disabled}).forEach(function(d){y=c.interactiveBisect(d.values,a.pointXValue,b.x());e.highlightPoint(y,true);var f=d.values[y];if(f!==void 0){h===void 0&&(h=f);m===void 0&&(m=b.xScale()(b.x()(f,y)));g.push({key:d.key,value:b.y()(f,y),color:l(d,d.seriesIndex),data:d.values[y]})}});var k=j.tickFormat()(b.x()(h,y));i.tooltip.chartContainer(F.parentNode).valueFormatter(function(a){return f.tickFormat()(a)}).data({value:k,index:y,series:g})();i.renderGuideLine(m)});i.dispatch.on("elementMouseout",
function(){A.tooltipHide();e.clearHighlights()});g.dispatch.on("legendClick",function(c){c.disabled=!c.disabled;d.filter(function(a){return!a.disabled}).length||d.map(function(a){a.disabled=false;H.selectAll(".nv-series").classed("disabled",false);return a});q.disabled=d.map(function(a){return!!a.disabled});A.stateChange(q);a.transition().call(b)});g.dispatch.on("legendDblclick",function(a){d.forEach(function(a){a.disabled=true});a.disabled=false;q.disabled=d.map(function(a){return!!a.disabled});
A.stateChange(q);b.update()});A.on("changeState",function(a){if(typeof a.disabled!=="undefined"){d.forEach(function(b,c){b.disabled=a.disabled[c]});q.disabled=a.disabled}b.update()})});G.renderEnd("historicalBarChart immediate");return b}var e=a||c.models.historicalBar(),j=c.models.axis(),f=c.models.axis(),g=c.models.legend(),i=c.interactiveGuideline(),d=c.models.tooltip(),k={top:30,right:90,bottom:50,left:90},l=c.utils.defaultColor(),r=null,p=null,o=false,w=true,n=true,m=false,B=false,E,s,q={},u=
null,C=null,A=d3.dispatch("tooltipHide","stateChange","changeState","renderEnd"),t=250;j.orient("bottom").tickPadding(7);f.orient(m?"right":"left");d.duration(0).headerEnabled(false).valueFormatter(function(a,b){return f.tickFormat()(a,b)}).headerFormatter(function(a,b){return j.tickFormat()(a,b)});var G=c.utils.renderWatch(A,0);e.dispatch.on("elementMouseover.tooltip",function(a){a.series={key:b.x()(a.data),value:b.y()(a.data),color:a.color};d.data(a).hidden(false)});e.dispatch.on("elementMouseout.tooltip",
function(){d.hidden(true)});e.dispatch.on("elementMousemove.tooltip",function(){d()});b.dispatch=A;b.bars=e;b.legend=g;b.xAxis=j;b.yAxis=f;b.interactiveLayer=i;b.tooltip=d;b.options=c.utils.optionsFunc.bind(b);b._options=Object.create({},{width:{get:function(){return r},set:function(a){r=a}},height:{get:function(){return p},set:function(a){p=a}},showLegend:{get:function(){return o},set:function(a){o=a}},showXAxis:{get:function(){return w},set:function(a){w=a}},showYAxis:{get:function(){return n},
set:function(a){n=a}},defaultState:{get:function(){return u},set:function(a){u=a}},noData:{get:function(){return C},set:function(a){C=a}},margin:{get:function(){return k},set:function(a){k.top=a.top!==void 0?a.top:k.top;k.right=a.right!==void 0?a.right:k.right;k.bottom=a.bottom!==void 0?a.bottom:k.bottom;k.left=a.left!==void 0?a.left:k.left}},color:{get:function(){return l},set:function(a){l=c.utils.getColor(a);g.color(l);e.color(l)}},duration:{get:function(){return t},set:function(a){t=a;G.reset(t);
f.duration(t);j.duration(t)}},rightAlignYAxis:{get:function(){return m},set:function(a){m=a;f.orient(a?"right":"left")}},useInteractiveGuideline:{get:function(){return B},set:function(a){B=a;a===true&&b.interactive(false)}}});c.utils.inheritOptions(b,e);c.utils.initOptions(b);return b};c.models.ohlcBarChart=function(){var a=c.models.historicalBarChart(c.models.ohlcBar());a.useInteractiveGuideline(true);a.interactiveLayer.tooltip.contentGenerator(function(b){var c=b.series[0].data;return'<h3 style="color: #'+
(c.open<c.close?"2ca02c":"d62728")+'">'+b.value+"</h3><table><tr><td>open:</td><td>"+a.yAxis.tickFormat()(c.open)+"</td></tr><tr><td>close:</td><td>"+a.yAxis.tickFormat()(c.close)+"</td></tr><tr><td>high</td><td>"+a.yAxis.tickFormat()(c.high)+"</td></tr><tr><td>low:</td><td>"+a.yAxis.tickFormat()(c.low)+"</td></tr></table>"});return a};c.models.candlestickBarChart=function(){var a=c.models.historicalBarChart(c.models.candlestickBar());a.useInteractiveGuideline(true);a.interactiveLayer.tooltip.contentGenerator(function(b){var c=
b.series[0].data;return'<h3 style="color: #'+(c.open<c.close?"2ca02c":"d62728")+'">'+b.value+"</h3><table><tr><td>open:</td><td>"+a.yAxis.tickFormat()(c.open)+"</td></tr><tr><td>close:</td><td>"+a.yAxis.tickFormat()(c.close)+"</td></tr><tr><td>high</td><td>"+a.yAxis.tickFormat()(c.high)+"</td></tr><tr><td>low:</td><td>"+a.yAxis.tickFormat()(c.low)+"</td></tr></table>"});return a};c.models.legend=function(){function a(m){function B(a,b){if(n!="furious")return"#000";if(o)return a.disengaged?"#000":
"#fff";if(!o){if(!a.color)a.color=g(a,b);return a.disabled?a.color:"#fff"}}function E(a,b){return o&&n=="furious"?a.disengaged?"#eee":a.color||g(a,b):a.color||g(a,b)}function s(a){return o&&n=="furious"?1:a.disabled?0:1}m.each(function(a){var m=e-b.left-b.right,g=d3.select(this);c.utils.initSVG(g);var A=g.selectAll("g.nv-legend").data([a]),a=A.enter().append("g").attr("class","nvd3 nv-legend").append("g"),g=A.select("g");A.attr("transform","translate("+b.left+","+b.top+")");var t=g.selectAll(".nv-series").data(function(a){return n!=
"furious"?a:a.filter(function(a){return o?true:!a.disengaged})}),A=t.enter().append("g").attr("class","nv-series"),G,v;switch(n){case "furious":v=23;break;case "classic":v=20}if(n=="classic"){A.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5);G=t.select("circle")}else if(n=="furious"){A.append("rect").style("stroke-width",2).attr("class","nv-legend-symbol").attr("rx",3).attr("ry",3);G=t.select(".nv-legend-symbol");A.append("g").attr("class","nv-check-box").property("innerHTML",
'<path d="M0.5,5 L22.5,5 L22.5,26.5 L0.5,26.5 L0.5,5 Z" class="nv-box"></path><path d="M5.5,12.8618467 L11.9185089,19.2803556 L31,0.198864511" class="nv-check"></path>').attr("transform","translate(-10,-8)scale(0.5)");t.select(".nv-check-box").each(function(a,b){d3.select(this).selectAll("path").attr("stroke",B(a,b))})}A.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8");var x=t.select("text.nv-legend-text");t.on("mouseover",function(a,b){w.legendMouseover(a,
b)}).on("mouseout",function(a,b){w.legendMouseout(a,b)}).on("click",function(a,b){w.legendClick(a,b);var c=t.data();if(r){if(n=="classic")if(p){c.forEach(function(a){a.disabled=true});a.disabled=false}else{a.disabled=!a.disabled;c.every(function(a){return a.disabled})&&c.forEach(function(a){a.disabled=false})}else if(n=="furious")if(o){a.disengaged=!a.disengaged;a.userDisabled=a.userDisabled==void 0?!!a.disabled:a.userDisabled;a.disabled=a.disengaged||a.userDisabled}else if(!o){a.disabled=!a.disabled;
a.userDisabled=a.disabled;c.filter(function(a){return!a.disengaged}).every(function(a){return a.userDisabled})&&c.forEach(function(a){a.disabled=a.userDisabled=false})}w.stateChange({disabled:c.map(function(a){return!!a.disabled}),disengaged:c.map(function(a){return!!a.disengaged})})}}).on("dblclick",function(a,b){if(!(n=="furious"&&o)){w.legendDblclick(a,b);if(r){var c=t.data();c.forEach(function(a){a.disabled=true;if(n=="furious")a.userDisabled=a.disabled});a.disabled=false;if(n=="furious")a.userDisabled=
a.disabled;w.stateChange({disabled:c.map(function(a){return!!a.disabled})})}}});t.classed("nv-disabled",function(a){return a.userDisabled});t.exit().remove();x.attr("fill",B).text(f);var z=0;if(d){var F=[];t.each(function(a){var b;if(f(a).length>i){b=f(a).substring(0,i);b=d3.select(this).select("text").text(b+"...");d3.select(this).append("svg:title").text(f(a))}else b=d3.select(this).select("text");var h;try{h=b.node().getComputedTextLength();if(h<=0)throw Error();}catch(d){h=c.utils.calcApproxTextWidth(b)}F.push(h+
k)});for(var h=0,A=[],z=0;z<m&&h<F.length;){A[h]=F[h];z=z+F[h++]}for(h===0&&(h=1);z>m&&h>1;){A=[];h--;for(var I=0;I<F.length;I++)if(F[I]>(A[I%h]||0))A[I%h]=F[I];z=A.reduce(function(a,b){return a+b})}for(var y=[],I=m=0;m<h;m++){y[m]=I;I=I+A[m]}t.attr("transform",function(a,b){return"translate("+y[b%h]+","+(5+Math.floor(b/h)*v)+")"});l?g.attr("transform","translate("+(e-b.right-z)+","+b.top+")"):g.attr("transform","translate(0,"+b.top+")");j=b.top+b.bottom+Math.ceil(F.length/h)*v}else{var H=5,M=5,D=
0,J;t.attr("transform",function(){var a=d3.select(this).select("text").node().getComputedTextLength()+k;J=M;if(e<b.left+b.right+J+a){M=J=5;H=H+v}M=M+a;M>D&&(D=M);z<J+D&&(z=J+D);return"translate("+J+","+H+")"});g.attr("transform","translate("+(e-b.right-D)+","+b.top+")");j=b.top+b.bottom+H+15}if(n=="furious"){G.attr("width",function(a,b){return x[0][b].getComputedTextLength()+27}).attr("height",18).attr("y",-9).attr("x",-15);a.insert("rect",":first-child").attr("class","nv-legend-bg").attr("fill",
"#eee").attr("opacity",0);g.select(".nv-legend-bg").transition().duration(300).attr("x",-v).attr("width",z+v-12).attr("height",j+10).attr("y",-b.top-10).attr("opacity",o?1:0)}G.style("fill",E).style("fill-opacity",s).style("stroke",E)});return a}var b={top:5,right:0,bottom:5,left:0},e=400,j=20,f=function(a){return a.key},g=c.utils.getColor(),i=20,d=true,k=32,l=true,r=true,p=false,o=false,w=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange"),n="classic";a.dispatch=
w;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return e},set:function(a){e=a}},height:{get:function(){return j},set:function(a){j=a}},key:{get:function(){return f},set:function(a){f=a}},align:{get:function(){return d},set:function(a){d=a}},maxKeyLength:{get:function(){return i},set:function(a){i=a}},rightAlign:{get:function(){return l},set:function(a){l=a}},padding:{get:function(){return k},set:function(a){k=a}},updateState:{get:function(){return r},set:function(a){r=
a}},radioButtonMode:{get:function(){return p},set:function(a){p=a}},expanded:{get:function(){return o},set:function(a){o=a}},vers:{get:function(){return n},set:function(a){n=a}},margin:{get:function(){return b},set:function(a){b.top=a.top!==void 0?a.top:b.top;b.right=a.right!==void 0?a.right:b.right;b.bottom=a.bottom!==void 0?a.bottom:b.bottom;b.left=a.left!==void 0?a.left:b.left}},color:{get:function(){return g},set:function(a){g=c.utils.getColor(a)}}});c.utils.initOptions(a);return a};c.models.line=
function(){function a(C){u.reset();u.models(b);C.each(function(a){g=d3.select(this);var t=c.utils.availableWidth(j,g,e),C=c.utils.availableHeight(f,g,e);c.utils.initSVG(g);w=b.xScale();n=b.yScale();s=s||w;q=q||n;var a=g.selectAll("g.nv-wrap.nv-line").data([a]),v=a.enter().append("g").attr("class","nvd3 nv-wrap nv-line"),x=v.append("defs"),z=v.append("g"),v=a.select("g");z.append("g").attr("class","nv-groups");z.append("g").attr("class","nv-scatterWrap");a.attr("transform","translate("+e.left+","+
e.top+")");b.width(t).height(C);z=a.select(".nv-scatterWrap");z.call(b);x.append("clipPath").attr("id","nv-edge-clip-"+b.id()).append("rect");a.select("#nv-edge-clip-"+b.id()+" rect").attr("width",t).attr("height",C>0?C:0);v.attr("clip-path",o?"url(#nv-edge-clip-"+b.id()+")":"");z.attr("clip-path",o?"url(#nv-edge-clip-"+b.id()+")":"");t=a.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a){return a.key});t.enter().append("g").style("stroke-opacity",1.0E-6).style("stroke-width",
function(a){return a.strokeWidth||i}).style("fill-opacity",1.0E-6);t.exit().remove();t.attr("class",function(a,b){return(a.classed||"")+" nv-group nv-series-"+b}).classed("hover",function(a){return a.hover}).style("fill",function(a,b){return d(a,b)}).style("stroke",function(a,b){return d(a,b)});t.watchTransition(u,"line: groups").style("stroke-opacity",1).style("fill-opacity",function(a){return a.fillOpacity||0.5});C=t.selectAll("path.nv-area").data(function(a){return p(a)?[a]:[]});C.enter().append("path").attr("class",
"nv-area").attr("d",function(a){return d3.svg.area().interpolate(m).defined(r).x(function(a,b){return c.utils.NaNtoZero(s(k(a,b)))}).y0(function(a,b){return c.utils.NaNtoZero(q(l(a,b)))}).y1(function(){return q(n.domain()[0]<=0?n.domain()[1]>=0?0:n.domain()[1]:n.domain()[0])}).apply(this,[a.values])});t.exit().selectAll("path.nv-area").remove();C.watchTransition(u,"line: areaPaths").attr("d",function(a){return d3.svg.area().interpolate(m).defined(r).x(function(a,b){return c.utils.NaNtoZero(w(k(a,
b)))}).y0(function(a,b){return c.utils.NaNtoZero(n(l(a,b)))}).y1(function(){return n(n.domain()[0]<=0?n.domain()[1]>=0?0:n.domain()[1]:n.domain()[0])}).apply(this,[a.values])});t=t.selectAll("path.nv-line").data(function(a){return[a.values]});t.enter().append("path").attr("class","nv-line").attr("d",d3.svg.line().interpolate(m).defined(r).x(function(a,b){return c.utils.NaNtoZero(s(k(a,b)))}).y(function(a,b){return c.utils.NaNtoZero(q(l(a,b)))}));t.watchTransition(u,"line: linePaths").attr("d",d3.svg.line().interpolate(m).defined(r).x(function(a,
b){return c.utils.NaNtoZero(w(k(a,b)))}).y(function(a,b){return c.utils.NaNtoZero(n(l(a,b)))}));s=w.copy();q=n.copy()});u.renderEnd("line immediate");return a}var b=c.models.scatter(),e={top:0,right:0,bottom:0,left:0},j=960,f=500,g=null,i=1.5,d=c.utils.defaultColor(),k=function(a){return a.x},l=function(a){return a.y},r=function(a,b){return!isNaN(l(a,b))&&l(a,b)!==null},p=function(a){return a.area},o=false,w,n,m="linear",B=250,E=d3.dispatch("elementClick","elementMouseover","elementMouseout","renderEnd");
b.pointSize(16).pointDomain([16,256]);var s,q,u=c.utils.renderWatch(E,B);a.dispatch=E;a.scatter=b;b.dispatch.on("elementClick",function(){E.elementClick.apply(this,arguments)});b.dispatch.on("elementMouseover",function(){E.elementMouseover.apply(this,arguments)});b.dispatch.on("elementMouseout",function(){E.elementMouseout.apply(this,arguments)});a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return j},set:function(a){j=a}},height:{get:function(){return f},
set:function(a){f=a}},defined:{get:function(){return r},set:function(a){r=a}},interpolate:{get:function(){return m},set:function(a){m=a}},clipEdge:{get:function(){return o},set:function(a){o=a}},margin:{get:function(){return e},set:function(a){e.top=a.top!==void 0?a.top:e.top;e.right=a.right!==void 0?a.right:e.right;e.bottom=a.bottom!==void 0?a.bottom:e.bottom;e.left=a.left!==void 0?a.left:e.left}},duration:{get:function(){return B},set:function(a){B=a;u.reset(B);b.duration(B)}},isArea:{get:function(){return p},
set:function(a){p=d3.functor(a)}},x:{get:function(){return k},set:function(a){k=a;b.x(a)}},y:{get:function(){return l},set:function(a){l=a;b.y(a)}},color:{get:function(){return d},set:function(a){d=c.utils.getColor(a);b.color(d)}}});c.utils.inheritOptions(a,b);c.utils.initOptions(a);return a};c.models.lineChart=function(){function a(i){t.reset();t.models(b);o&&t.models(e);w&&t.models(j);i.each(function(i){var u=d3.select(this),h=this;c.utils.initSVG(u);var x=c.utils.availableWidth(l,u,d),y=c.utils.availableHeight(r,
u,d);a.update=function(){A===0?u.call(a):u.transition().duration(A).call(a)};a.container=this;s.setter(v(i),a.update).getter(G(i)).update();s.disabled=i.map(function(a){return!!a.disabled});if(!q){var H;q={};for(H in s)q[H]=s[H]instanceof Array?s[H].slice(0):s[H]}if(!i||!i.length||!i.filter(function(a){return a.values.length}).length){c.utils.noData(a,u);return a}u.selectAll(".nv-noData").remove();B=b.xScale();E=b.yScale();H=u.selectAll("g.nv-wrap.nv-lineChart").data([i]);var t=H.enter().append("g").attr("class",
"nvd3 nv-wrap nv-lineChart").append("g"),D=H.select("g");t.append("rect").style("opacity",0);t.append("g").attr("class","nv-x nv-axis");t.append("g").attr("class","nv-y nv-axis");t.append("g").attr("class","nv-linesWrap");t.append("g").attr("class","nv-legendWrap");t.append("g").attr("class","nv-interactive");D.select("rect").attr("width",x).attr("height",y>0?y:0);if(p){f.width(x);D.select(".nv-legendWrap").datum(i).call(f);if(d.top!=f.height()){d.top=f.height();y=c.utils.availableHeight(r,u,d)}H.select(".nv-legendWrap").attr("transform",
"translate(0,"+-d.top+")")}H.attr("transform","translate("+d.left+","+d.top+")");n&&D.select(".nv-y.nv-axis").attr("transform","translate("+x+",0)");if(m){g.width(x).height(y).margin({left:d.left,top:d.top}).svgContainer(u).xScale(B);H.select(".nv-interactive").call(g)}b.width(x).height(y).color(i.map(function(a,b){return a.color||k(a,b)}).filter(function(a,b){return!i[b].disabled}));D.select(".nv-linesWrap").datum(i.filter(function(a){return!a.disabled})).call(b);if(o){e.scale(B)._ticks(c.utils.calcTicksX(x/
100,i)).tickSize(-y,0);D.select(".nv-x.nv-axis").attr("transform","translate(0,"+E.range()[0]+")");D.select(".nv-x.nv-axis").call(e)}if(w){j.scale(E)._ticks(c.utils.calcTicksY(y/36,i)).tickSize(-x,0);D.select(".nv-y.nv-axis").call(j)}f.dispatch.on("stateChange",function(b){for(var c in b)s[c]=b[c];C.stateChange(s);a.update()});g.dispatch.on("elementMousemove",function(d){b.clearHighlights();var f,y,m,D=[];i.filter(function(a,b){a.seriesIndex=b;return!a.disabled}).forEach(function(h,e){y=c.interactiveBisect(h.values,
d.pointXValue,a.x());var g=h.values[y],j=a.y()(g,y);j!=null&&b.highlightPoint(e,y,true);if(g!==void 0){f===void 0&&(f=g);m===void 0&&(m=a.xScale()(a.x()(g,y)));D.push({key:h.key,value:j,color:k(h,h.seriesIndex)})}});if(D.length>2){var q=a.yScale().invert(d.mouseY),n=0.03*Math.abs(a.yScale().domain()[0]-a.yScale().domain()[1]),q=c.nearestValueIndex(D.map(function(a){return a.value}),q,n);if(q!==null)D[q].highlight=true}q=e.tickFormat()(a.x()(f,y));g.tooltip.chartContainer(h.parentNode).valueFormatter(function(a){return a==
null?"N/A":j.tickFormat()(a)}).data({value:q,index:y,series:D})();g.renderGuideLine(m)});g.dispatch.on("elementClick",function(h){var d,e=[];i.filter(function(a,b){a.seriesIndex=b;return!a.disabled}).forEach(function(b){var f=c.interactiveBisect(b.values,h.pointXValue,a.x()),y=b.values[f];if(typeof y!=="undefined"){typeof d==="undefined"&&(d=a.xScale()(a.x()(y,f)));var g=a.yScale()(a.y()(y,f));e.push({point:y,pointIndex:f,pos:[d,g],seriesIndex:b.seriesIndex,series:b})}});b.dispatch.elementClick(e)});
g.dispatch.on("elementMouseout",function(){b.clearHighlights()});C.on("changeState",function(b){if(typeof b.disabled!=="undefined"&&i.length===b.disabled.length){i.forEach(function(a,c){a.disabled=b.disabled[c]});s.disabled=b.disabled}a.update()})});t.renderEnd("lineChart immediate");return a}var b=c.models.line(),e=c.models.axis(),j=c.models.axis(),f=c.models.legend(),g=c.interactiveGuideline(),i=c.models.tooltip(),d={top:30,right:20,bottom:50,left:60},k=c.utils.defaultColor(),l=null,r=null,p=true,
o=true,w=true,n=false,m=false,B,E,s=c.utils.state(),q=null,u=null,C=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd"),A=250;e.orient("bottom").tickPadding(7);j.orient(n?"right":"left");i.valueFormatter(function(a,b){return j.tickFormat()(a,b)}).headerFormatter(function(a,b){return e.tickFormat()(a,b)});var t=c.utils.renderWatch(C,A),G=function(a){return function(){return{active:a.map(function(a){return!a.disabled})}}},v=function(a){return function(b){b.active!==void 0&&
a.forEach(function(a,c){a.disabled=!b.active[c]})}};b.dispatch.on("elementMouseover.tooltip",function(a){i.data(a).hidden(false)});b.dispatch.on("elementMouseout.tooltip",function(){i.hidden(true)});a.dispatch=C;a.lines=b;a.legend=f;a.xAxis=e;a.yAxis=j;a.interactiveLayer=g;a.tooltip=i;a.dispatch=C;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return l},set:function(a){l=a}},height:{get:function(){return r},set:function(a){r=a}},showLegend:{get:function(){return p},
set:function(a){p=a}},showXAxis:{get:function(){return o},set:function(a){o=a}},showYAxis:{get:function(){return w},set:function(a){w=a}},defaultState:{get:function(){return q},set:function(a){q=a}},noData:{get:function(){return u},set:function(a){u=a}},margin:{get:function(){return d},set:function(a){d.top=a.top!==void 0?a.top:d.top;d.right=a.right!==void 0?a.right:d.right;d.bottom=a.bottom!==void 0?a.bottom:d.bottom;d.left=a.left!==void 0?a.left:d.left}},duration:{get:function(){return A},set:function(a){A=
a;t.reset(A);b.duration(A);e.duration(A);j.duration(A)}},color:{get:function(){return k},set:function(a){k=c.utils.getColor(a);f.color(k);b.color(k)}},rightAlignYAxis:{get:function(){return n},set:function(a){n=a;j.orient(n?"right":"left")}},useInteractiveGuideline:{get:function(){return m},set:function(a){if(m=a){b.interactive(false);b.useVoronoi(false)}}}});c.utils.inheritOptions(a,b);c.utils.initOptions(a);return a};c.models.linePlusBarChart=function(){function a(D){D.each(function(D){function S(){o.empty()||
o.extent(z);ga.data([o.empty()?h.domain():z]).each(function(a){var b=h(a[0])-h.range()[0],c=h.range()[1]-h(a[1]);d3.select(this).select(".left").attr("width",b<0?0:b);d3.select(this).select(".right").attr("x",h(a[1])).attr("width",c<0?0:c)})}function w(){z=o.empty()?null:o.extent();x=o.empty()?h.domain():o.extent();J.brush({extent:x,brush:o});S();j.width(Q).height(T).color(D.map(function(a,b){return a.color||u(a,b)}).filter(function(a,b){return!D[b].disabled&&D[b].bar}));b.width(Q).height(T).color(D.map(function(a,
b){return a.color||u(a,b)}).filter(function(a,b){return!D[b].disabled&&!D[b].bar}));var a=X.select(".nv-focus .nv-barsWrap").datum(!da.length?[{values:[]}]:da.map(function(a){return{key:a.key,values:a.values.filter(function(a,b){return j.x()(a,b)>=x[0]&&j.x()(a,b)<=x[1]})}})),e=X.select(".nv-focus .nv-linesWrap").datum(V(fa)?[{values:[]}]:fa.filter(function(a){return!a.disabled}).map(function(a){return{area:a.area,fillOpacity:a.fillOpacity,key:a.key,values:a.values.filter(function(a,c){return b.x()(a,
c)>=x[0]&&b.x()(a,c)<=x[1]})}}));F=da.length?j.xScale():b.xScale();g.scale(F)._ticks(c.utils.calcTicksX(Q/100,D)).tickSize(-T,0);g.domain([Math.ceil(x[0]),Math.floor(x[1])]);X.select(".nv-x.nv-axis").transition().duration(L).call(g);a.transition().duration(L).call(j);e.transition().duration(L).call(b);X.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+I.range()[0]+")");d.scale(I)._ticks(c.utils.calcTicksY(T/36,D)).tickSize(-Q,0);k.scale(y)._ticks(c.utils.calcTicksY(T/36,D)).tickSize(da.length?
0:-Q,0);X.select(".nv-focus .nv-y1.nv-axis").style("opacity",da.length?1:0);X.select(".nv-focus .nv-y2.nv-axis").style("opacity",fa.length&&!V(fa)?1:0).attr("transform","translate("+F.range()[1]+",0)");X.select(".nv-focus .nv-y1.nv-axis").transition().duration(L).call(d);X.select(".nv-focus .nv-y2.nv-axis").transition().duration(L).call(k)}var $=d3.select(this);c.utils.initSVG($);var Q=c.utils.availableWidth(B,$,n),T=c.utils.availableHeight(E,$,n)-(A?v:0),ca=v-m.top-m.bottom;a.update=function(){$.transition().duration(L).call(a)};
a.container=this;O.setter(P(D),a.update).getter(N(D)).update();O.disabled=D.map(function(a){return!!a.disabled});if(!K){var Y;K={};for(Y in O)K[Y]=O[Y]instanceof Array?O[Y].slice(0):O[Y]}if(!D||!D.length||!D.filter(function(a){return a.values.length}).length){c.utils.noData(a,$);return a}$.selectAll(".nv-noData").remove();var da=D.filter(function(a){return!a.disabled&&a.bar}),fa=D.filter(function(a){return!a.bar});F=j.xScale();h=i.scale();I=j.yScale();y=b.yScale();H=f.yScale();M=e.yScale();Y=D.filter(function(a){return!a.disabled&&
a.bar}).map(function(a){return a.values.map(function(a,b){return{x:s(a,b),y:q(a,b)}})});var aa=D.filter(function(a){return!a.disabled&&!a.bar}).map(function(a){return a.values.map(function(a,b){return{x:s(a,b),y:q(a,b)}})});F.range([0,Q]);h.domain(d3.extent(d3.merge(Y.concat(aa)),function(a){return a.x})).range([0,Q]);Y=$.selectAll("g.nv-wrap.nv-linePlusBar").data([D]);var aa=Y.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g"),X=Y.select("g");aa.append("g").attr("class",
"nv-legendWrap");var ea=aa.append("g").attr("class","nv-focus");ea.append("g").attr("class","nv-x nv-axis");ea.append("g").attr("class","nv-y1 nv-axis");ea.append("g").attr("class","nv-y2 nv-axis");ea.append("g").attr("class","nv-barsWrap");ea.append("g").attr("class","nv-linesWrap");aa=aa.append("g").attr("class","nv-context");aa.append("g").attr("class","nv-x nv-axis");aa.append("g").attr("class","nv-y1 nv-axis");aa.append("g").attr("class","nv-y2 nv-axis");aa.append("g").attr("class","nv-barsWrap");
aa.append("g").attr("class","nv-linesWrap");aa.append("g").attr("class","nv-brushBackground");aa.append("g").attr("class","nv-x nv-brush");if(C){aa=p.align()?Q/2:Q;ea=p.align()?aa:0;p.width(aa);X.select(".nv-legendWrap").datum(D.map(function(a){a.originalKey=a.originalKey===void 0?a.key:a.originalKey;a.key=a.originalKey+(a.bar?R:ba);return a})).call(p);if(n.top!=p.height()){n.top=p.height();T=c.utils.availableHeight(E,$,n)-v}X.select(".nv-legendWrap").attr("transform","translate("+ea+","+-n.top+")")}Y.attr("transform",
"translate("+n.left+","+n.top+")");X.select(".nv-context").style("display",A?"initial":"none");f.width(Q).height(ca).color(D.map(function(a,b){return a.color||u(a,b)}).filter(function(a,b){return!D[b].disabled&&D[b].bar}));e.width(Q).height(ca).color(D.map(function(a,b){return a.color||u(a,b)}).filter(function(a,b){return!D[b].disabled&&!D[b].bar}));Y=X.select(".nv-context .nv-barsWrap").datum(da.length?da:[{values:[]}]);aa=X.select(".nv-context .nv-linesWrap").datum(V(fa)?[{values:[]}]:fa.filter(function(a){return!a.disabled}));
X.select(".nv-context").attr("transform","translate(0,"+(T+n.bottom+m.top)+")");Y.transition().call(f);aa.transition().call(e);if(G){i._ticks(c.utils.calcTicksX(Q/100,D)).tickSize(-ca,0);X.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+H.range()[0]+")");X.select(".nv-context .nv-x.nv-axis").transition().call(i)}if(t){l.scale(H)._ticks(ca/36).tickSize(-Q,0);r.scale(M)._ticks(ca/36).tickSize(da.length?0:-Q,0);X.select(".nv-context .nv-y3.nv-axis").style("opacity",da.length?1:0).attr("transform",
"translate(0,"+h.range()[0]+")");X.select(".nv-context .nv-y2.nv-axis").style("opacity",fa.length?1:0).attr("transform","translate("+h.range()[1]+",0)");X.select(".nv-context .nv-y1.nv-axis").transition().call(l);X.select(".nv-context .nv-y2.nv-axis").transition().call(r)}o.x(h).on("brush",w);z&&o.extent(z);var ga=X.select(".nv-brushBackground").selectAll("g").data([z||o.extent()]);Y=ga.enter().append("g");Y.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",ca);Y.append("rect").attr("class",
"right").attr("x",0).attr("y",0).attr("height",ca);Y=X.select(".nv-x.nv-brush").call(o);Y.selectAll("rect").attr("height",ca);Y.selectAll(".resize").append("path").attr("d",function(a){var b=(a=+(a=="e"))?1:-1,c=ca/3;return"M"+0.5*b+","+c+"A6,6 0 0 "+a+" "+6.5*b+","+(c+6)+"V"+(2*c-6)+"A6,6 0 0 "+a+" "+0.5*b+","+2*c+"ZM"+2.5*b+","+(c+8)+"V"+(2*c-8)+"M"+4.5*b+","+(c+8)+"V"+(2*c-8)});p.dispatch.on("stateChange",function(b){for(var c in b)O[c]=b[c];J.stateChange(O);a.update()});J.on("changeState",function(b){if(typeof b.disabled!==
"undefined"){D.forEach(function(a,c){a.disabled=b.disabled[c]});O.disabled=b.disabled}a.update()});w()});return a}var b=c.models.line(),e=c.models.line(),j=c.models.historicalBar(),f=c.models.historicalBar(),g=c.models.axis(),i=c.models.axis(),d=c.models.axis(),k=c.models.axis(),l=c.models.axis(),r=c.models.axis(),p=c.models.legend(),o=d3.svg.brush(),w=c.models.tooltip(),n={top:30,right:30,bottom:30,left:60},m={top:0,right:30,bottom:20,left:60},B=null,E=null,s=function(a){return a.x},q=function(a){return a.y},
u=c.utils.defaultColor(),C=true,A=true,t=false,G=true,v=50,x,z=null,F,h,I,y,H,M,D=null,J=d3.dispatch("brush","stateChange","changeState"),L=0,O=c.utils.state(),K=null,R=" (left axis)",ba=" (right axis)";b.clipEdge(true);e.interactive(false);e.pointActive(function(){return false});g.orient("bottom").tickPadding(5);d.orient("left");k.orient("right");i.orient("bottom").tickPadding(5);l.orient("left");r.orient("right");w.headerEnabled(true).headerFormatter(function(a,b){return g.tickFormat()(a,b)});var N=
function(a){return function(){return{active:a.map(function(a){return!a.disabled})}}},P=function(a){return function(b){b.active!==void 0&&a.forEach(function(a,c){a.disabled=!b.active[c]})}},V=function(a){return a.every(function(a){return a.disabled})};b.dispatch.on("elementMouseover.tooltip",function(a){w.duration(100).valueFormatter(function(a,b){return k.tickFormat()(a,b)}).data(a).hidden(false)});b.dispatch.on("elementMouseout.tooltip",function(){w.hidden(true)});j.dispatch.on("elementMouseover.tooltip",
function(b){b.value=a.x()(b.data);b.series={value:a.y()(b.data),color:b.color};w.duration(0).valueFormatter(function(a,b){return d.tickFormat()(a,b)}).data(b).hidden(false)});j.dispatch.on("elementMouseout.tooltip",function(){w.hidden(true)});j.dispatch.on("elementMousemove.tooltip",function(){w()});a.dispatch=J;a.legend=p;a.lines=b;a.lines2=e;a.bars=j;a.bars2=f;a.xAxis=g;a.x2Axis=i;a.y1Axis=d;a.y2Axis=k;a.y3Axis=l;a.y4Axis=r;a.tooltip=w;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},
{width:{get:function(){return B},set:function(a){B=a}},height:{get:function(){return E},set:function(a){E=a}},showLegend:{get:function(){return C},set:function(a){C=a}},brushExtent:{get:function(){return z},set:function(a){z=a}},noData:{get:function(){return D},set:function(a){D=a}},focusEnable:{get:function(){return A},set:function(a){A=a}},focusHeight:{get:function(){return v},set:function(a){v=a}},focusShowAxisX:{get:function(){return G},set:function(a){G=a}},focusShowAxisY:{get:function(){return t},
set:function(a){t=a}},legendLeftAxisHint:{get:function(){return R},set:function(a){R=a}},legendRightAxisHint:{get:function(){return ba},set:function(a){ba=a}},margin:{get:function(){return n},set:function(a){n.top=a.top!==void 0?a.top:n.top;n.right=a.right!==void 0?a.right:n.right;n.bottom=a.bottom!==void 0?a.bottom:n.bottom;n.left=a.left!==void 0?a.left:n.left}},focusMargin:{get:function(){return m},set:function(a){m.top=a.top!==void 0?a.top:m.top;m.right=a.right!==void 0?a.right:m.right;m.bottom=
a.bottom!==void 0?a.bottom:m.bottom;m.left=a.left!==void 0?a.left:m.left}},duration:{get:function(){return L},set:function(a){L=a}},color:{get:function(){return u},set:function(a){u=c.utils.getColor(a);p.color(u)}},x:{get:function(){return s},set:function(a){s=a;b.x(a);e.x(a);j.x(a);f.x(a)}},y:{get:function(){return q},set:function(a){q=a;b.y(a);e.y(a);j.y(a);f.y(a)}}});c.utils.inheritOptions(a,b);c.utils.initOptions(a);return a};c.models.lineWithFocusChart=function(){function a(y){y.each(function(y){function l(){k.empty()||
k.extent(t);S.data([k.empty()?u.domain():t]).each(function(a){var b=u(a[0])-s.range()[0],c=O-u(a[1]);d3.select(this).select(".left").attr("width",b<0?0:b);d3.select(this).select(".right").attr("x",u(a[1])).attr("width",c<0?0:c)})}function D(){t=k.empty()?null:k.extent();var a=k.empty()?u.domain():k.extent();if(!(Math.abs(a[0]-a[1])<=1)){v.brush({extent:a,brush:k});l();P.select(".nv-focus .nv-linesWrap").datum(y.filter(function(a){return!a.disabled}).map(function(c){return{key:c.key,area:c.area,classed:c.classed,
values:c.values.filter(function(c,d){return b.x()(c,d)>=a[0]&&b.x()(c,d)<=a[1]})}})).transition().duration(x).call(b);P.select(".nv-focus .nv-x.nv-axis").transition().duration(x).call(j);P.select(".nv-focus .nv-y.nv-axis").transition().duration(x).call(f)}}var J=d3.select(this),L=this;c.utils.initSVG(J);var O=c.utils.availableWidth(n,J,p),K=c.utils.availableHeight(m,J,p)-B,R=B-o.top-o.bottom;a.update=function(){J.transition().duration(x).call(a)};a.container=this;z.setter(I(y),a.update).getter(h(y)).update();
z.disabled=y.map(function(a){return!!a.disabled});if(!F){var G;F={};for(G in z)F[G]=z[G]instanceof Array?z[G].slice(0):z[G]}if(!y||!y.length||!y.filter(function(a){return a.values.length}).length){c.utils.noData(a,J);return a}J.selectAll(".nv-noData").remove();s=b.xScale();q=b.yScale();u=e.xScale();C=e.yScale();G=J.selectAll("g.nv-wrap.nv-lineWithFocusChart").data([y]);var N=G.enter().append("g").attr("class","nvd3 nv-wrap nv-lineWithFocusChart").append("g"),P=G.select("g");N.append("g").attr("class",
"nv-legendWrap");var V=N.append("g").attr("class","nv-focus");V.append("g").attr("class","nv-x nv-axis");V.append("g").attr("class","nv-y nv-axis");V.append("g").attr("class","nv-linesWrap");V.append("g").attr("class","nv-interactive");N=N.append("g").attr("class","nv-context");N.append("g").attr("class","nv-x nv-axis");N.append("g").attr("class","nv-y nv-axis");N.append("g").attr("class","nv-linesWrap");N.append("g").attr("class","nv-brushBackground");N.append("g").attr("class","nv-x nv-brush");
if(A){d.width(O);P.select(".nv-legendWrap").datum(y).call(d);if(p.top!=d.height()){p.top=d.height();K=c.utils.availableHeight(m,J,p)-B}P.select(".nv-legendWrap").attr("transform","translate(0,"+-p.top+")")}G.attr("transform","translate("+p.left+","+p.top+")");if(E){r.width(O).height(K).margin({left:p.left,top:p.top}).svgContainer(J).xScale(s);G.select(".nv-interactive").call(r)}b.width(O).height(K).color(y.map(function(a,b){return a.color||w(a,b)}).filter(function(a,b){return!y[b].disabled}));e.defined(b.defined()).width(O).height(R).color(y.map(function(a,
b){return a.color||w(a,b)}).filter(function(a,b){return!y[b].disabled}));P.select(".nv-context").attr("transform","translate(0,"+(K+p.bottom+o.top)+")");G=P.select(".nv-context .nv-linesWrap").datum(y.filter(function(a){return!a.disabled}));d3.transition(G).call(e);j.scale(s)._ticks(c.utils.calcTicksX(O/100,y)).tickSize(-K,0);f.scale(q)._ticks(c.utils.calcTicksY(K/36,y)).tickSize(-O,0);P.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+K+")");k.x(u).on("brush",function(){D()});t&&
k.extent(t);var S=P.select(".nv-brushBackground").selectAll("g").data([t||k.extent()]),K=S.enter().append("g");K.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",R);K.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",R);K=P.select(".nv-x.nv-brush").call(k);K.selectAll("rect").attr("height",R);K.selectAll(".resize").append("path").attr("d",function(a){var b=(a=+(a=="e"))?1:-1,c=R/3;return"M"+0.5*b+","+c+"A6,6 0 0 "+a+" "+6.5*b+","+(c+6)+"V"+(2*c-6)+
"A6,6 0 0 "+a+" "+0.5*b+","+2*c+"ZM"+2.5*b+","+(c+8)+"V"+(2*c-8)+"M"+4.5*b+","+(c+8)+"V"+(2*c-8)});D();g.scale(u)._ticks(c.utils.calcTicksX(O/100,y)).tickSize(-R,0);P.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+C.range()[0]+")");d3.transition(P.select(".nv-context .nv-x.nv-axis")).call(g);i.scale(C)._ticks(c.utils.calcTicksY(R/36,y)).tickSize(-O,0);d3.transition(P.select(".nv-context .nv-y.nv-axis")).call(i);P.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+
C.range()[0]+")");d.dispatch.on("stateChange",function(b){for(var c in b)z[c]=b[c];v.stateChange(z);a.update()});r.dispatch.on("elementMousemove",function(d){b.clearHighlights();var h,e,g,D=[];y.filter(function(a,b){a.seriesIndex=b;return!a.disabled}).forEach(function(y,f){var m=k.empty()?u.domain():k.extent(),j=y.values.filter(function(a,c){return b.x()(a,c)>=m[0]&&b.x()(a,c)<=m[1]});e=c.interactiveBisect(j,d.pointXValue,b.x());j=j[e];a.y()(j,e)!=null&&b.highlightPoint(f,e,true);if(j!==void 0){h===
void 0&&(h=j);g===void 0&&(g=a.xScale()(a.x()(j,e)));D.push({key:y.key,value:a.y()(j,e),color:w(y,y.seriesIndex)})}});if(D.length>2){var m=a.yScale().invert(d.mouseY),i=0.03*Math.abs(a.yScale().domain()[0]-a.yScale().domain()[1]),m=c.nearestValueIndex(D.map(function(a){return a.value}),m,i);if(m!==null)D[m].highlight=true}m=j.tickFormat()(a.x()(h,e));r.tooltip.chartContainer(L.parentNode).valueFormatter(function(a){return a==null?"N/A":f.tickFormat()(a)}).data({value:m,index:e,series:D})();r.renderGuideLine(g)});
r.dispatch.on("elementMouseout",function(){b.clearHighlights()});v.on("changeState",function(b){typeof b.disabled!=="undefined"&&y.forEach(function(a,c){a.disabled=b.disabled[c]});a.update()})});return a}var b=c.models.line(),e=c.models.line(),j=c.models.axis(),f=c.models.axis(),g=c.models.axis(),i=c.models.axis(),d=c.models.legend(),k=d3.svg.brush(),l=c.models.tooltip(),r=c.interactiveGuideline(),p={top:30,right:30,bottom:30,left:60},o={top:0,right:30,bottom:20,left:60},w=c.utils.defaultColor(),
n=null,m=null,B=50,E=false,s,q,u,C,A=true,t=null,G=null,v=d3.dispatch("brush","stateChange","changeState"),x=250,z=c.utils.state(),F=null;b.clipEdge(true).duration(0);e.interactive(false);e.pointActive(function(){return false});j.orient("bottom").tickPadding(5);f.orient("left");g.orient("bottom").tickPadding(5);i.orient("left");l.valueFormatter(function(a,b){return f.tickFormat()(a,b)}).headerFormatter(function(a,b){return j.tickFormat()(a,b)});var h=function(a){return function(){return{active:a.map(function(a){return!a.disabled})}}},
I=function(a){return function(b){b.active!==void 0&&a.forEach(function(a,c){a.disabled=!b.active[c]})}};b.dispatch.on("elementMouseover.tooltip",function(a){l.data(a).hidden(false)});b.dispatch.on("elementMouseout.tooltip",function(){l.hidden(true)});a.dispatch=v;a.legend=d;a.lines=b;a.lines2=e;a.xAxis=j;a.yAxis=f;a.x2Axis=g;a.y2Axis=i;a.interactiveLayer=r;a.tooltip=l;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return n},set:function(a){n=a}},height:{get:function(){return m},
set:function(a){m=a}},focusHeight:{get:function(){return B},set:function(a){B=a}},showLegend:{get:function(){return A},set:function(a){A=a}},brushExtent:{get:function(){return t},set:function(a){t=a}},defaultState:{get:function(){return F},set:function(a){F=a}},noData:{get:function(){return G},set:function(a){G=a}},margin:{get:function(){return p},set:function(a){p.top=a.top!==void 0?a.top:p.top;p.right=a.right!==void 0?a.right:p.right;p.bottom=a.bottom!==void 0?a.bottom:p.bottom;p.left=a.left!==
void 0?a.left:p.left}},focusMargin:{get:function(){return o},set:function(a){o.top=a.top!==void 0?a.top:o.top;o.right=a.right!==void 0?a.right:o.right;o.bottom=a.bottom!==void 0?a.bottom:o.bottom;o.left=a.left!==void 0?a.left:o.left}},color:{get:function(){return w},set:function(a){w=c.utils.getColor(a);d.color(w)}},interpolate:{get:function(){return b.interpolate()},set:function(a){b.interpolate(a);e.interpolate(a)}},xTickFormat:{get:function(){return j.tickFormat()},set:function(a){j.tickFormat(a);
g.tickFormat(a)}},yTickFormat:{get:function(){return f.tickFormat()},set:function(a){f.tickFormat(a);i.tickFormat(a)}},duration:{get:function(){return x},set:function(a){x=a;f.duration(x);i.duration(x);j.duration(x);g.duration(x)}},x:{get:function(){return b.x()},set:function(a){b.x(a);e.x(a)}},y:{get:function(){return b.y()},set:function(a){b.y(a);e.y(a)}},useInteractiveGuideline:{get:function(){return E},set:function(a){if(E=a){b.interactive(false);b.useVoronoi(false)}}}});c.utils.inheritOptions(a,
b);c.utils.initOptions(a);return a};c.models.multiBar=function(){function a(F){x.reset();F.each(function(a){var I=e-b.left-b.right,y=j-b.top-b.bottom;d=d3.select(this);c.utils.initSVG(d);var F=0;m&&a.length&&(m=[{values:a[0].values.map(function(a){return{x:a.x,y:0,series:a.series,size:0.01}})}]);if(o){var M=d3.layout.stack().offset(w).values(function(a){return a.values}).y(l)(!a.length&&m?m:a);M.forEach(function(b,c){if(b.nonStackable){a[c].nonStackableSeries=F++;M[c]=a[c]}else c>0&&M[c-1].nonStackable&&
M[c].values.map(function(a,b){a.y0=a.y0-M[c-1].values[b].y;a.y1=a.y0+a.y})});a=M}a.forEach(function(a,b){a.values.forEach(function(c){c.series=b;c.key=a.key})});o&&a[0].values.map(function(b,c){var d=0,e=0;a.map(function(b,f){if(!a[f].nonStackable){var g=b.values[c];g.size=Math.abs(g.y);if(g.y<0){g.y1=e;e=e-g.size}else{g.y1=g.size+d;d=d+g.size}}})});var D=q&&u?[]:a.map(function(a,b){return a.values.map(function(a,c){return{x:k(a,c),y:l(a,c),y0:a.y0,y1:a.y1,idx:b}})});f.domain(q||d3.merge(D).map(function(a){return a.x})).rangeBands(C||
[0,I],t);g.domain(u||d3.extent(d3.merge(D).map(function(b){var c=b.y;o&&!a[b.idx].nonStackable&&(c=b.y>0?b.y1:b.y1+b.y);return c}).concat(r))).range(A||[y,0]);f.domain()[0]===f.domain()[1]&&(f.domain()[0]?f.domain([f.domain()[0]-f.domain()[0]*0.01,f.domain()[1]+f.domain()[1]*0.01]):f.domain([-1,1]));g.domain()[0]===g.domain()[1]&&(g.domain()[0]?g.domain([g.domain()[0]+g.domain()[0]*0.01,g.domain()[1]-g.domain()[1]*0.01]):g.domain([-1,1]));v=v||g;var D=d.selectAll("g.nv-wrap.nv-multibar").data([a]),
J=D.enter().append("g").attr("class","nvd3 nv-wrap nv-multibar"),L=J.append("defs"),J=J.append("g"),O=D.select("g");J.append("g").attr("class","nv-groups");D.attr("transform","translate("+b.left+","+b.top+")");L.append("clipPath").attr("id","nv-edge-clip-"+i).append("rect");D.select("#nv-edge-clip-"+i+" rect").attr("width",I).attr("height",y);O.attr("clip-path",p?"url(#nv-edge-clip-"+i+")":"");I=D.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a,b){return b});I.enter().append("g").style("stroke-opacity",
1.0E-6).style("fill-opacity",1.0E-6);y=x.transition(I.exit().selectAll("rect.nv-bar"),"multibarExit",Math.min(100,s)).attr("y",function(b){var c=v(0)||0;o&&a[b.series]&&!a[b.series].nonStackable&&(c=v(b.y0));return c}).attr("height",0).remove();y.delay&&y.delay(function(a,b){return b*(s/(z+1))-b});I.attr("class",function(a,b){return"nv-group nv-series-"+b}).classed("hover",function(a){return a.hover}).style("fill",function(a,b){return n(a,b)}).style("stroke",function(a,b){return n(a,b)});I.style("stroke-opacity",
1).style("fill-opacity",0.75);I=I.selectAll("rect.nv-bar").data(function(b){return m&&!a.length?m.values:b.values});I.exit().remove();I.enter().append("rect").attr("class",function(a,b){return l(a,b)<0?"nv-bar negative":"nv-bar positive"}).attr("x",function(b,c,d){return o&&!a[d].nonStackable?0:d*f.rangeBand()/a.length}).attr("y",function(b,c,d){return v(o&&!a[d].nonStackable?b.y0:0)||0}).attr("height",0).attr("width",function(b,c,d){return f.rangeBand()/(o&&!a[d].nonStackable?1:a.length)}).attr("transform",
function(a,b){return"translate("+f(k(a,b))+",0)"});I.style("fill",function(a,b,c){return n(a,c,b)}).style("stroke",function(a,b,c){return n(a,c,b)}).on("mouseover",function(a,b){d3.select(this).classed("hover",true);G.elementMouseover({data:a,index:b,color:d3.select(this).style("fill")})}).on("mouseout",function(a,b){d3.select(this).classed("hover",false);G.elementMouseout({data:a,index:b,color:d3.select(this).style("fill")})}).on("mousemove",function(a,b){G.elementMousemove({data:a,index:b,color:d3.select(this).style("fill")})}).on("click",
function(a,b){G.elementClick({data:a,index:b,color:d3.select(this).style("fill")});d3.event.stopPropagation()}).on("dblclick",function(a,b){G.elementDblClick({data:a,index:b,color:d3.select(this).style("fill")});d3.event.stopPropagation()});I.attr("class",function(a,b){return l(a,b)<0?"nv-bar negative":"nv-bar positive"}).attr("transform",function(a,b){return"translate("+f(k(a,b))+",0)"});if(B){E||(E=a.map(function(){return true}));I.style("fill",function(a,b,c){return d3.rgb(B(a,b)).darker(E.map(function(a,
b){return b}).filter(function(a,b){return!E[b]})[c]).toString()}).style("stroke",function(a,b,c){return d3.rgb(B(a,b)).darker(E.map(function(a,b){return b}).filter(function(a,b){return!E[b]})[c]).toString()})}I=I.watchTransition(x,"multibar",Math.min(250,s)).delay(function(b,c){return c*s/a[0].values.length});o?I.attr("y",function(b,c,d){var e=0;return e=a[d].nonStackable?l(b,c)<0?g(0):g(0)-g(l(b,c))<-1?g(0)-1:g(l(b,c))||0:g(b.y1)}).attr("height",function(b,c,d){return a[d].nonStackable?Math.max(Math.abs(g(l(b,
c))-g(0)),0)||0:Math.max(Math.abs(g(b.y+b.y0)-g(b.y0)),0)}).attr("x",function(b,c,d){c=0;if(a[d].nonStackable){c=b.series*f.rangeBand()/a.length;a.length!==F&&(c=a[d].nonStackableSeries*f.rangeBand()/(F*2))}return c}).attr("width",function(b,c,d){if(a[d].nonStackable){b=f.rangeBand()/F;a.length!==F&&(b=f.rangeBand()/(F*2));return b}return f.rangeBand()}):I.attr("x",function(b){return b.series*f.rangeBand()/a.length}).attr("width",f.rangeBand()/a.length).attr("y",function(a,b){return l(a,b)<0?g(0):
g(0)-g(l(a,b))<1?g(0)-1:g(l(a,b))||0}).attr("height",function(a,b){return Math.max(Math.abs(g(l(a,b))-g(0)),1)||0});f.copy();v=g.copy();if(a[0]&&a[0].values)z=a[0].values.length});x.renderEnd("multibar immediate");return a}var b={top:0,right:0,bottom:0,left:0},e=960,j=500,f=d3.scale.ordinal(),g=d3.scale.linear(),i=Math.floor(Math.random()*1E4),d=null,k=function(a){return a.x},l=function(a){return a.y},r=[0],p=true,o=false,w="zero",n=c.utils.defaultColor(),m=false,B=null,E,s=500,q,u,C,A,t=0.1,G=d3.dispatch("chartClick",
"elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),v,x=c.utils.renderWatch(G,s),z=0;a.dispatch=G;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return e},set:function(a){e=a}},height:{get:function(){return j},set:function(a){j=a}},x:{get:function(){return k},set:function(a){k=a}},y:{get:function(){return l},set:function(a){l=a}},xScale:{get:function(){return f},set:function(a){f=a}},yScale:{get:function(){return g},
set:function(a){g=a}},xDomain:{get:function(){return q},set:function(a){q=a}},yDomain:{get:function(){return u},set:function(a){u=a}},xRange:{get:function(){return C},set:function(a){C=a}},yRange:{get:function(){return A},set:function(a){A=a}},forceY:{get:function(){return r},set:function(a){r=a}},stacked:{get:function(){return o},set:function(a){o=a}},stackOffset:{get:function(){return w},set:function(a){w=a}},clipEdge:{get:function(){return p},set:function(a){p=a}},disabled:{get:function(){return E},
set:function(a){E=a}},id:{get:function(){return i},set:function(a){i=a}},hideable:{get:function(){return m},set:function(a){m=a}},groupSpacing:{get:function(){return t},set:function(a){t=a}},margin:{get:function(){return b},set:function(a){b.top=a.top!==void 0?a.top:b.top;b.right=a.right!==void 0?a.right:b.right;b.bottom=a.bottom!==void 0?a.bottom:b.bottom;b.left=a.left!==void 0?a.left:b.left}},duration:{get:function(){return s},set:function(a){s=a;x.reset(s)}},color:{get:function(){return n},set:function(a){n=
c.utils.getColor(a)}},barColor:{get:function(){return B},set:function(a){B=a?c.utils.getColor(a):null}}});c.utils.initOptions(a);return a};c.models.multiBarChart=function(){function a(i){F.reset();F.models(b);n&&F.models(e);m&&F.models(j);i.each(function(i){var D=d3.select(this);c.utils.initSVG(D);var v=c.utils.availableWidth(k,D,d),L=c.utils.availableHeight(l,D,d);a.update=function(){z===0?D.call(a):D.transition().duration(z).call(a)};a.container=this;t.setter(y(i),a.update).getter(I(i)).update();
t.disabled=i.map(function(a){return!!a.disabled});if(!G){var H;G={};for(H in t)G[H]=t[H]instanceof Array?t[H].slice(0):t[H]}if(!i||!i.length||!i.filter(function(a){return a.values.length}).length){c.utils.noData(a,D);return a}D.selectAll(".nv-noData").remove();C=b.xScale();A=b.yScale();var F=D.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([i]),R=F.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarWithLegend").append("g");H=F.select("g");R.append("g").attr("class","nv-x nv-axis");R.append("g").attr("class",
"nv-y nv-axis");R.append("g").attr("class","nv-barsWrap");R.append("g").attr("class","nv-legendWrap");R.append("g").attr("class","nv-controlsWrap");if(w){f.width(v-(p?180:0));H.select(".nv-legendWrap").datum(i).call(f);if(d.top!=f.height()){d.top=f.height();L=c.utils.availableHeight(l,D,d)}H.select(".nv-legendWrap").attr("transform","translate("+(p?180:0)+","+-d.top+")")}if(p){var ba=[{key:o.grouped||"Grouped",disabled:b.stacked()},{key:o.stacked||"Stacked",disabled:!b.stacked()}];g.width(p?180:0).color(["#444",
"#444","#444"]);H.select(".nv-controlsWrap").datum(ba).attr("transform","translate(0,"+-d.top+")").call(g)}F.attr("transform","translate("+d.left+","+d.top+")");B&&H.select(".nv-y.nv-axis").attr("transform","translate("+v+",0)");b.disabled(i.map(function(a){return a.disabled})).width(v).height(L).color(i.map(function(a,b){return a.color||r(a,b)}).filter(function(a,b){return!i[b].disabled}));H.select(".nv-barsWrap").datum(i.filter(function(a){return!a.disabled})).call(b);if(n){e.scale(C)._ticks(c.utils.calcTicksX(v/
100,i)).tickSize(-L,0);H.select(".nv-x.nv-axis").attr("transform","translate(0,"+A.range()[0]+")");H.select(".nv-x.nv-axis").call(e);F=H.select(".nv-x.nv-axis > g").selectAll("g");F.selectAll("line, text").style("opacity",1);if(s){F.selectAll("text").attr("transform",function(a,b,c){return"translate(0,"+(c%2==0?5:17)+")"});var N=d3.selectAll(".nv-x.nv-axis .nv-wrap g g text")[0].length;H.selectAll(".nv-x.nv-axis .nv-axisMaxMin text").attr("transform",function(a,b){return"translate(0,"+(b===0||N%2!==
0?17:5)+")"})}q&&H.selectAll(".tick text").call(c.utils.wrapTicks,a.xAxis.rangeBand());E&&F.filter(function(a,b){return b%Math.ceil(i[0].values.length/(v/100))!==0}).selectAll("text, line").style("opacity",0);u&&F.selectAll(".tick text").attr("transform","rotate("+u+" 0,0)").style("text-anchor",u>0?"start":"end");H.select(".nv-x.nv-axis").selectAll("g.nv-axisMaxMin text").style("opacity",1)}if(m){j.scale(A)._ticks(c.utils.calcTicksY(L/36,i)).tickSize(-v,0);H.select(".nv-y.nv-axis").call(j)}f.dispatch.on("stateChange",
function(b){for(var c in b)t[c]=b[c];x.stateChange(t);a.update()});g.dispatch.on("legendClick",function(c){if(c.disabled){ba=ba.map(function(a){a.disabled=true;return a});c.disabled=false;switch(c.key){case "Grouped":case o.grouped:b.stacked(false);break;case "Stacked":case o.stacked:b.stacked(true)}t.stacked=b.stacked();x.stateChange(t);a.update()}});x.on("changeState",function(c){if(typeof c.disabled!=="undefined"){i.forEach(function(a,b){a.disabled=c.disabled[b]});t.disabled=c.disabled}if(typeof c.stacked!==
"undefined"){b.stacked(c.stacked);h=t.stacked=c.stacked}a.update()})});F.renderEnd("multibarchart immediate");return a}var b=c.models.multiBar(),e=c.models.axis(),j=c.models.axis(),f=c.models.legend(),g=c.models.legend(),i=c.models.tooltip(),d={top:30,right:20,bottom:50,left:60},k=null,l=null,r=c.utils.defaultColor(),p=true,o={},w=true,n=true,m=true,B=false,E=true,s=false,q=false,u=0,C,A,t=c.utils.state(),G=null,v=null,x=d3.dispatch("stateChange","changeState","renderEnd"),z=250;t.stacked=false;b.stacked(false);
e.orient("bottom").tickPadding(7).showMaxMin(false).tickFormat(function(a){return a});j.orient(B?"right":"left").tickFormat(d3.format(",.1f"));i.duration(0).valueFormatter(function(a,b){return j.tickFormat()(a,b)}).headerFormatter(function(a,b){return e.tickFormat()(a,b)});g.updateState(false);var F=c.utils.renderWatch(x),h=false,I=function(a){return function(){return{active:a.map(function(a){return!a.disabled}),stacked:h}}},y=function(a){return function(b){if(b.stacked!==void 0)h=b.stacked;b.active!==
void 0&&a.forEach(function(a,c){a.disabled=!b.active[c]})}};b.dispatch.on("elementMouseover.tooltip",function(b){b.value=a.x()(b.data);b.series={key:b.data.key,value:a.y()(b.data),color:b.color};i.data(b).hidden(false)});b.dispatch.on("elementMouseout.tooltip",function(){i.hidden(true)});b.dispatch.on("elementMousemove.tooltip",function(){i()});a.dispatch=x;a.multibar=b;a.legend=f;a.controls=g;a.xAxis=e;a.yAxis=j;a.state=t;a.tooltip=i;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},
{width:{get:function(){return k},set:function(a){k=a}},height:{get:function(){return l},set:function(a){l=a}},showLegend:{get:function(){return w},set:function(a){w=a}},showControls:{get:function(){return p},set:function(a){p=a}},controlLabels:{get:function(){return o},set:function(a){o=a}},showXAxis:{get:function(){return n},set:function(a){n=a}},showYAxis:{get:function(){return m},set:function(a){m=a}},defaultState:{get:function(){return G},set:function(a){G=a}},noData:{get:function(){return v},
set:function(a){v=a}},reduceXTicks:{get:function(){return E},set:function(a){E=a}},rotateLabels:{get:function(){return u},set:function(a){u=a}},staggerLabels:{get:function(){return s},set:function(a){s=a}},wrapLabels:{get:function(){return q},set:function(a){q=!!a}},margin:{get:function(){return d},set:function(a){d.top=a.top!==void 0?a.top:d.top;d.right=a.right!==void 0?a.right:d.right;d.bottom=a.bottom!==void 0?a.bottom:d.bottom;d.left=a.left!==void 0?a.left:d.left}},duration:{get:function(){return z},
set:function(a){z=a;b.duration(z);e.duration(z);j.duration(z);F.reset(z)}},color:{get:function(){return r},set:function(a){r=c.utils.getColor(a);f.color(r)}},rightAlignYAxis:{get:function(){return B},set:function(a){B=a;j.orient(B?"right":"left")}},barColor:{get:function(){return b.barColor},set:function(a){b.barColor(a);f.color(function(a,b){return d3.rgb("#ccc").darker(b*1.5).toString()})}}});c.utils.inheritOptions(a,b);c.utils.initOptions(a);return a};c.models.multiBarHorizontal=function(){function a(h){F.reset();
h.each(function(a){var h=e-b.left-b.right,f=j-b.top-b.bottom;g=d3.select(this);c.utils.initSVG(g);m&&(a=d3.layout.stack().offset("zero").values(function(a){return a.values}).y(l)(a));a.forEach(function(a,b){a.values.forEach(function(c){c.series=b;c.key=a.key})});m&&a[0].values.map(function(b,c){var d=0,e=0;a.map(function(a){a=a.values[c];a.size=Math.abs(a.y);if(a.y<0){a.y1=e-a.size;e=e-a.size}else{a.y1=d;d=d+a.size}})});var v=C&&A?[]:a.map(function(a){return a.values.map(function(a,b){return{x:k(a,
b),y:l(a,b),y0:a.y0,y1:a.y1}})});i.domain(C||d3.merge(v).map(function(a){return a.x})).rangeBands(t||[0,f],q);d.domain(A||d3.extent(d3.merge(v).map(function(a){return m?a.y>0?a.y1+a.y:a.y1:a.y}).concat(p)));B&&!m?d.range(G||[d.domain()[0]<0?s:0,h-(d.domain()[1]>0?s:0)]):d.range(G||[0,h]);z=z||d3.scale.linear().domain(d.domain()).range([d(0),d(0)]);h=d3.select(this).selectAll("g.nv-wrap.nv-multibarHorizontal").data([a]);f=h.enter().append("g").attr("class","nvd3 nv-wrap nv-multibarHorizontal");f.append("defs");
f=f.append("g");h.select("g");f.append("g").attr("class","nv-groups");h.attr("transform","translate("+b.left+","+b.top+")");h=h.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a,b){return b});h.enter().append("g").style("stroke-opacity",1.0E-6).style("fill-opacity",1.0E-6);h.exit().watchTransition(F,"multibarhorizontal: exit groups").style("stroke-opacity",1.0E-6).style("fill-opacity",1.0E-6).remove();h.attr("class",function(a,b){return"nv-group nv-series-"+b}).classed("hover",
function(a){return a.hover}).style("fill",function(a,b){return o(a,b)}).style("stroke",function(a,b){return o(a,b)});h.watchTransition(F,"multibarhorizontal: groups").style("stroke-opacity",1).style("fill-opacity",0.75);h=h.selectAll("g.nv-bar").data(function(a){return a.values});h.exit().remove();f=h.enter().append("g").attr("transform",function(b,c,d){return"translate("+z(m?b.y0:0)+","+(m?0:d*i.rangeBand()/a.length+i(k(b,c)))+")"});f.append("rect").attr("width",0).attr("height",i.rangeBand()/(m?
1:a.length));h.on("mouseover",function(a,b){d3.select(this).classed("hover",true);x.elementMouseover({data:a,index:b,color:d3.select(this).style("fill")})}).on("mouseout",function(a,b){d3.select(this).classed("hover",false);x.elementMouseout({data:a,index:b,color:d3.select(this).style("fill")})}).on("mouseout",function(a,b){x.elementMouseout({data:a,index:b,color:d3.select(this).style("fill")})}).on("mousemove",function(a,b){x.elementMousemove({data:a,index:b,color:d3.select(this).style("fill")})}).on("click",
function(a,b){x.elementClick({data:a,index:b,color:d3.select(this).style("fill")});d3.event.stopPropagation()}).on("dblclick",function(a,b){x.elementDblClick({data:a,index:b,color:d3.select(this).style("fill")});d3.event.stopPropagation()});if(r(a[0],0)){f.append("polyline");h.select("polyline").attr("fill","none").attr("points",function(b,c){var e=r(b,c),h=0.8*i.rangeBand()/((m?1:a.length)*2),e=e.length?e:[-Math.abs(e),Math.abs(e)],e=e.map(function(a){return d(a)-d(0)});return[[e[0],-h],[e[0],h],
[e[0],0],[e[1],0],[e[1],-h],[e[1],h]].map(function(a){return a.join(",")}).join(" ")}).attr("transform",function(b,c){var e=i.rangeBand()/((m?1:a.length)*2);return"translate("+(l(b,c)<0?0:d(l(b,c))-d(0))+", "+e+")"})}f.append("text");if(B&&!m){h.select("text").attr("text-anchor",function(a,b){return l(a,b)<0?"end":"start"}).attr("y",i.rangeBand()/(a.length*2)).attr("dy",".32em").text(function(a,b){var c=u(l(a,b)),d=r(a,b);return d===void 0?c:!d.length?c+"\u00b1"+u(Math.abs(d)):c+"+"+u(Math.abs(d[1]))+
"-"+u(Math.abs(d[0]))});h.watchTransition(F,"multibarhorizontal: bars").select("text").attr("x",function(a,b){return l(a,b)<0?-4:d(l(a,b))-d(0)+4})}else h.selectAll("text").text("");if(E&&!m){f.append("text").classed("nv-bar-label",true);h.select("text.nv-bar-label").attr("text-anchor",function(a,b){return l(a,b)<0?"start":"end"}).attr("y",i.rangeBand()/(a.length*2)).attr("dy",".32em").text(function(a,b){return k(a,b)});h.watchTransition(F,"multibarhorizontal: bars").select("text.nv-bar-label").attr("x",
function(a,b){return l(a,b)<0?d(0)-d(l(a,b))+4:-4})}else h.selectAll("text.nv-bar-label").text("");h.attr("class",function(a,b){return l(a,b)<0?"nv-bar negative":"nv-bar positive"});if(w){n||(n=a.map(function(){return true}));h.style("fill",function(a,b,c){return d3.rgb(w(a,b)).darker(n.map(function(a,b){return b}).filter(function(a,b){return!n[b]})[c]).toString()}).style("stroke",function(a,b,c){return d3.rgb(w(a,b)).darker(n.map(function(a,b){return b}).filter(function(a,b){return!n[b]})[c]).toString()})}m?
h.watchTransition(F,"multibarhorizontal: bars").attr("transform",function(a,b){return"translate("+d(a.y1)+","+i(k(a,b))+")"}).select("rect").attr("width",function(a,b){return Math.abs(d(l(a,b)+a.y0)-d(a.y0))||0}).attr("height",i.rangeBand()):h.watchTransition(F,"multibarhorizontal: bars").attr("transform",function(b,c){return"translate("+(l(b,c)<0?d(l(b,c)):d(0))+","+(b.series*i.rangeBand()/a.length+i(k(b,c)))+")"}).select("rect").attr("height",i.rangeBand()/a.length).attr("width",function(a,b){return Math.max(Math.abs(d(l(a,
b))-d(0)),1)||0});i.copy();z=d.copy()});F.renderEnd("multibarHorizontal immediate");return a}var b={top:0,right:0,bottom:0,left:0},e=960,j=500,f=Math.floor(Math.random()*1E4),g=null,i=d3.scale.ordinal(),d=d3.scale.linear(),k=function(a){return a.x},l=function(a){return a.y},r=function(a){return a.yErr},p=[0],o=c.utils.defaultColor(),w=null,n,m=false,B=false,E=false,s=60,q=0.1,u=d3.format(",.2f"),C,A,t,G,v=250,x=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout",
"elementMousemove","renderEnd"),z,F=c.utils.renderWatch(x,v);a.dispatch=x;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return e},set:function(a){e=a}},height:{get:function(){return j},set:function(a){j=a}},x:{get:function(){return k},set:function(a){k=a}},y:{get:function(){return l},set:function(a){l=a}},yErr:{get:function(){return r},set:function(a){r=a}},xScale:{get:function(){return i},set:function(a){i=a}},yScale:{get:function(){return d},set:function(a){d=
a}},xDomain:{get:function(){return C},set:function(a){C=a}},yDomain:{get:function(){return A},set:function(a){A=a}},xRange:{get:function(){return t},set:function(a){t=a}},yRange:{get:function(){return G},set:function(a){G=a}},forceY:{get:function(){return p},set:function(a){p=a}},stacked:{get:function(){return m},set:function(a){m=a}},showValues:{get:function(){return B},set:function(a){B=a}},disabled:{get:function(){return n},set:function(a){n=a}},id:{get:function(){return f},set:function(a){f=a}},
valueFormat:{get:function(){return u},set:function(a){u=a}},valuePadding:{get:function(){return s},set:function(a){s=a}},groupSpacing:{get:function(){return q},set:function(a){q=a}},margin:{get:function(){return b},set:function(a){b.top=a.top!==void 0?a.top:b.top;b.right=a.right!==void 0?a.right:b.right;b.bottom=a.bottom!==void 0?a.bottom:b.bottom;b.left=a.left!==void 0?a.left:b.left}},duration:{get:function(){return v},set:function(a){v=a;F.reset(v)}},color:{get:function(){return o},set:function(a){o=
c.utils.getColor(a)}},barColor:{get:function(){return w},set:function(a){w=a?c.utils.getColor(a):null}}});c.utils.initOptions(a);return a};c.models.multiBarHorizontalChart=function(){function a(i){x.reset();x.models(b);n&&x.models(e);m&&x.models(j);i.each(function(i){var h=d3.select(this);c.utils.initSVG(h);var z=c.utils.availableWidth(k,h,d),y=c.utils.availableHeight(l,h,d);a.update=function(){h.transition().duration(t).call(a)};a.container=this;B=b.stacked();q.setter(v(i),a.update).getter(G(i)).update();
q.disabled=i.map(function(a){return!!a.disabled});if(!u){var x;u={};for(x in q)u[x]=q[x]instanceof Array?q[x].slice(0):q[x]}if(!i||!i.length||!i.filter(function(a){return a.values.length}).length){c.utils.noData(a,h);return a}h.selectAll(".nv-noData").remove();E=b.xScale();s=b.yScale();x=h.selectAll("g.nv-wrap.nv-multiBarHorizontalChart").data([i]);var C=x.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarHorizontalChart").append("g"),D=x.select("g");C.append("g").attr("class","nv-x nv-axis");
C.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line");C.append("g").attr("class","nv-barsWrap");C.append("g").attr("class","nv-legendWrap");C.append("g").attr("class","nv-controlsWrap");if(w){f.width(z-(p?180:0));D.select(".nv-legendWrap").datum(i).call(f);if(d.top!=f.height()){d.top=f.height();y=c.utils.availableHeight(l,h,d)}D.select(".nv-legendWrap").attr("transform","translate("+(p?180:0)+","+-d.top+")")}if(p){var J=[{key:o.grouped||"Grouped",disabled:b.stacked()},
{key:o.stacked||"Stacked",disabled:!b.stacked()}];g.width(p?180:0).color(["#444","#444","#444"]);D.select(".nv-controlsWrap").datum(J).attr("transform","translate(0,"+-d.top+")").call(g)}x.attr("transform","translate("+d.left+","+d.top+")");b.disabled(i.map(function(a){return a.disabled})).width(z).height(y).color(i.map(function(a,b){return a.color||r(a,b)}).filter(function(a,b){return!i[b].disabled}));D.select(".nv-barsWrap").datum(i.filter(function(a){return!a.disabled})).transition().call(b);if(n){e.scale(E)._ticks(c.utils.calcTicksY(y/
24,i)).tickSize(-z,0);D.select(".nv-x.nv-axis").call(e);D.select(".nv-x.nv-axis").selectAll("g").selectAll("line, text")}if(m){j.scale(s)._ticks(c.utils.calcTicksX(z/100,i)).tickSize(-y,0);D.select(".nv-y.nv-axis").attr("transform","translate(0,"+y+")");D.select(".nv-y.nv-axis").call(j)}D.select(".nv-zeroLine line").attr("x1",s(0)).attr("x2",s(0)).attr("y1",0).attr("y2",-y);f.dispatch.on("stateChange",function(b){for(var c in b)q[c]=b[c];A.stateChange(q);a.update()});g.dispatch.on("legendClick",function(c){if(c.disabled){J=
J.map(function(a){a.disabled=true;return a});c.disabled=false;switch(c.key){case "Grouped":b.stacked(false);break;case "Stacked":b.stacked(true)}q.stacked=b.stacked();A.stateChange(q);B=b.stacked();a.update()}});A.on("changeState",function(c){if(typeof c.disabled!=="undefined"){i.forEach(function(a,b){a.disabled=c.disabled[b]});q.disabled=c.disabled}if(typeof c.stacked!=="undefined"){b.stacked(c.stacked);B=q.stacked=c.stacked}a.update()})});x.renderEnd("multibar horizontal chart immediate");return a}
var b=c.models.multiBarHorizontal(),e=c.models.axis(),j=c.models.axis(),f=c.models.legend().height(30),g=c.models.legend().height(30),i=c.models.tooltip(),d={top:30,right:20,bottom:50,left:60},k=null,l=null,r=c.utils.defaultColor(),p=true,o={},w=true,n=true,m=true,B=false,E,s,q=c.utils.state(),u=null,C=null,A=d3.dispatch("stateChange","changeState","renderEnd"),t=250;q.stacked=false;b.stacked(B);e.orient("left").tickPadding(5).showMaxMin(false).tickFormat(function(a){return a});j.orient("bottom").tickFormat(d3.format(",.1f"));
i.duration(0).valueFormatter(function(a,b){return j.tickFormat()(a,b)}).headerFormatter(function(a,b){return e.tickFormat()(a,b)});g.updateState(false);var G=function(a){return function(){return{active:a.map(function(a){return!a.disabled}),stacked:B}}},v=function(a){return function(b){if(b.stacked!==void 0)B=b.stacked;b.active!==void 0&&a.forEach(function(a,c){a.disabled=!b.active[c]})}},x=c.utils.renderWatch(A,t);b.dispatch.on("elementMouseover.tooltip",function(b){b.value=a.x()(b.data);b.series=
{key:b.data.key,value:a.y()(b.data),color:b.color};i.data(b).hidden(false)});b.dispatch.on("elementMouseout.tooltip",function(){i.hidden(true)});b.dispatch.on("elementMousemove.tooltip",function(){i()});a.dispatch=A;a.multibar=b;a.legend=f;a.controls=g;a.xAxis=e;a.yAxis=j;a.state=q;a.tooltip=i;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return k},set:function(a){k=a}},height:{get:function(){return l},set:function(a){l=a}},showLegend:{get:function(){return w},
set:function(a){w=a}},showControls:{get:function(){return p},set:function(a){p=a}},controlLabels:{get:function(){return o},set:function(a){o=a}},showXAxis:{get:function(){return n},set:function(a){n=a}},showYAxis:{get:function(){return m},set:function(a){m=a}},defaultState:{get:function(){return u},set:function(a){u=a}},noData:{get:function(){return C},set:function(a){C=a}},margin:{get:function(){return d},set:function(a){d.top=a.top!==void 0?a.top:d.top;d.right=a.right!==void 0?a.right:d.right;d.bottom=
a.bottom!==void 0?a.bottom:d.bottom;d.left=a.left!==void 0?a.left:d.left}},duration:{get:function(){return t},set:function(a){t=a;x.reset(t);b.duration(t);e.duration(t);j.duration(t)}},color:{get:function(){return r},set:function(a){r=c.utils.getColor(a);f.color(r)}},barColor:{get:function(){return b.barColor},set:function(a){b.barColor(a);f.color(function(a,b){return d3.rgb("#ccc").darker(b*1.5).toString()})}}});c.utils.inheritOptions(a,b);c.utils.initOptions(a);return a};c.models.multiChart=function(){function a(h){h.each(function(h){function i(a){var b=
h[a.seriesIndex].yAxis===2?x:v;a.value=a.point.x;a.series={value:a.point.y,color:a.point.color,key:a.series.key};F.duration(0).valueFormatter(function(a,c){return b.tickFormat()(a,c)}).data(a).hidden(false)}function o(a){var b=h[a.seriesIndex].yAxis===2?x:v;a.value=a.point.x;a.series={value:a.point.y,color:a.point.color,key:a.series.key};F.duration(100).valueFormatter(function(a,c){return b.tickFormat()(a,c)}).data(a).hidden(false)}function D(a){var b=h[a.seriesIndex].yAxis===2?x:v;a.point.x=A.x()(a.point);
a.point.y=A.y()(a.point);F.duration(0).valueFormatter(function(a,c){return b.tickFormat()(a,c)}).data(a).hidden(false)}function I(a){var b=h[a.data.series].yAxis===2?x:v;a.value=u.x()(a.data);a.series={value:u.y()(a.data),color:a.color,key:a.data.key};F.duration(0).valueFormatter(function(a,c){return b.tickFormat()(a,c)}).data(a).hidden(false)}var L=d3.select(this);c.utils.initSVG(L);a.update=function(){L.transition().call(a)};a.container=this;var O=c.utils.availableWidth(j,L,b),K=c.utils.availableHeight(f,
L,b),R=h.filter(function(a){return a.type=="line"&&a.yAxis==1}),ba=h.filter(function(a){return a.type=="line"&&a.yAxis==2}),N=h.filter(function(a){return a.type=="scatter"&&a.yAxis==1}),P=h.filter(function(a){return a.type=="scatter"&&a.yAxis==2}),V=h.filter(function(a){return a.type=="bar"&&a.yAxis==1}),S=h.filter(function(a){return a.type=="bar"&&a.yAxis==2}),U=h.filter(function(a){return a.type=="area"&&a.yAxis==1}),W=h.filter(function(a){return a.type=="area"&&a.yAxis==2});if(!h||!h.length||!h.filter(function(a){return a.values.length}).length){c.utils.noData(a,
L);return a}L.selectAll(".nv-noData").remove();var Z=h.filter(function(a){return!a.disabled&&a.yAxis==1}).map(function(a){return a.values.map(function(a){return{x:l(a),y:r(a)}})}),$=h.filter(function(a){return!a.disabled&&a.yAxis==2}).map(function(a){return a.values.map(function(a){return{x:l(a),y:r(a)}})});w.domain(d3.extent(d3.merge(Z.concat($)),function(a){return l(a)})).range([0,O]);var Q=L.selectAll("g.wrap.multiChart").data([h]),T=Q.enter().append("g").attr("class","wrap nvd3 multiChart").append("g");
T.append("g").attr("class","nv-x nv-axis");T.append("g").attr("class","nv-y1 nv-axis");T.append("g").attr("class","nv-y2 nv-axis");T.append("g").attr("class","lines1Wrap");T.append("g").attr("class","lines2Wrap");T.append("g").attr("class","scatters1Wrap");T.append("g").attr("class","scatters2Wrap");T.append("g").attr("class","bars1Wrap");T.append("g").attr("class","bars2Wrap");T.append("g").attr("class","stack1Wrap");T.append("g").attr("class","stack2Wrap");T.append("g").attr("class","legendWrap");
Q=Q.select("g");T=h.map(function(a,b){return h[b].color||e(a,b)});if(g){var ca=z.align()?O/2:O,Y=z.align()?ca:0;z.width(ca);z.color(T);Q.select(".legendWrap").datum(h.map(function(a){a.originalKey=a.originalKey===void 0?a.key:a.originalKey;a.key=a.originalKey+(a.yAxis==1?"":" (right axis)");return a})).call(z);if(b.top!=z.height()){b.top=z.height();K=c.utils.availableHeight(f,L,b)}Q.select(".legendWrap").attr("transform","translate("+Y+","+-b.top+")")}B.width(O).height(K).interpolate(p).color(T.filter(function(a,
b){return!h[b].disabled&&h[b].yAxis==1&&h[b].type=="line"}));E.width(O).height(K).interpolate(p).color(T.filter(function(a,b){return!h[b].disabled&&h[b].yAxis==2&&h[b].type=="line"}));s.width(O).height(K).color(T.filter(function(a,b){return!h[b].disabled&&h[b].yAxis==1&&h[b].type=="scatter"}));q.width(O).height(K).color(T.filter(function(a,b){return!h[b].disabled&&h[b].yAxis==2&&h[b].type=="scatter"}));u.width(O).height(K).color(T.filter(function(a,b){return!h[b].disabled&&h[b].yAxis==1&&h[b].type==
"bar"}));C.width(O).height(K).color(T.filter(function(a,b){return!h[b].disabled&&h[b].yAxis==2&&h[b].type=="bar"}));A.width(O).height(K).color(T.filter(function(a,b){return!h[b].disabled&&h[b].yAxis==1&&h[b].type=="area"}));t.width(O).height(K).color(T.filter(function(a,b){return!h[b].disabled&&h[b].yAxis==2&&h[b].type=="area"}));Q.attr("transform","translate("+b.left+","+b.top+")");var T=Q.select(".lines1Wrap").datum(R.filter(function(a){return!a.disabled})),ca=Q.select(".scatters1Wrap").datum(N.filter(function(a){return!a.disabled})),
Y=Q.select(".bars1Wrap").datum(V.filter(function(a){return!a.disabled})),da=Q.select(".stack1Wrap").datum(U.filter(function(a){return!a.disabled})),fa=Q.select(".lines2Wrap").datum(ba.filter(function(a){return!a.disabled})),aa=Q.select(".scatters2Wrap").datum(P.filter(function(a){return!a.disabled})),X=Q.select(".bars2Wrap").datum(S.filter(function(a){return!a.disabled})),ea=Q.select(".stack2Wrap").datum(W.filter(function(a){return!a.disabled})),ga=U.length?U.map(function(a){return a.values}).reduce(function(a,
b){return a.map(function(a,c){return{x:a.x,y:a.y+b[c].y}})}).concat([{x:0,y:0}]):[],ha=W.length?W.map(function(a){return a.values}).reduce(function(a,b){return a.map(function(a,c){return{x:a.x,y:a.y+b[c].y}})}).concat([{x:0,y:0}]):[];n.domain(d||d3.extent(d3.merge(Z).concat(ga),function(a){return a.y})).range([0,K]);m.domain(k||d3.extent(d3.merge($).concat(ha),function(a){return a.y})).range([0,K]);B.yDomain(n.domain());s.yDomain(n.domain());u.yDomain(n.domain());A.yDomain(n.domain());E.yDomain(m.domain());
q.yDomain(m.domain());C.yDomain(m.domain());t.yDomain(m.domain());U.length&&d3.transition(da).call(A);W.length&&d3.transition(ea).call(t);V.length&&d3.transition(Y).call(u);S.length&&d3.transition(X).call(C);R.length&&d3.transition(T).call(B);ba.length&&d3.transition(fa).call(E);N.length&&d3.transition(ca).call(s);P.length&&d3.transition(aa).call(q);G._ticks(c.utils.calcTicksX(O/100,h)).tickSize(-K,0);Q.select(".nv-x.nv-axis").attr("transform","translate(0,"+K+")");d3.transition(Q.select(".nv-x.nv-axis")).call(G);
v._ticks(c.utils.calcTicksY(K/36,h)).tickSize(-O,0);d3.transition(Q.select(".nv-y1.nv-axis")).call(v);x._ticks(c.utils.calcTicksY(K/36,h)).tickSize(-O,0);d3.transition(Q.select(".nv-y2.nv-axis")).call(x);Q.select(".nv-y1.nv-axis").classed("nv-disabled",Z.length?false:true).attr("transform","translate("+w.range()[0]+",0)");Q.select(".nv-y2.nv-axis").classed("nv-disabled",$.length?false:true).attr("transform","translate("+w.range()[1]+",0)");z.dispatch.on("stateChange",function(){a.update()});B.dispatch.on("elementMouseover.tooltip",
i);E.dispatch.on("elementMouseover.tooltip",i);B.dispatch.on("elementMouseout.tooltip",function(){F.hidden(true)});E.dispatch.on("elementMouseout.tooltip",function(){F.hidden(true)});s.dispatch.on("elementMouseover.tooltip",o);q.dispatch.on("elementMouseover.tooltip",o);s.dispatch.on("elementMouseout.tooltip",function(){F.hidden(true)});q.dispatch.on("elementMouseout.tooltip",function(){F.hidden(true)});A.dispatch.on("elementMouseover.tooltip",D);t.dispatch.on("elementMouseover.tooltip",D);A.dispatch.on("elementMouseout.tooltip",
function(){F.hidden(true)});t.dispatch.on("elementMouseout.tooltip",function(){F.hidden(true)});u.dispatch.on("elementMouseover.tooltip",I);C.dispatch.on("elementMouseover.tooltip",I);u.dispatch.on("elementMouseout.tooltip",function(){F.hidden(true)});C.dispatch.on("elementMouseout.tooltip",function(){F.hidden(true)});u.dispatch.on("elementMousemove.tooltip",function(){F()});C.dispatch.on("elementMousemove.tooltip",function(){F()})});return a}var b={top:30,right:20,bottom:50,left:60},e=c.utils.defaultColor(),
j=null,f=null,g=true,i=null,d,k,l=function(a){return a.x},r=function(a){return a.y},p="monotone",o=true,w=d3.scale.linear(),n=d3.scale.linear(),m=d3.scale.linear(),B=c.models.line().yScale(n),E=c.models.line().yScale(m),s=c.models.scatter().yScale(n),q=c.models.scatter().yScale(m),u=c.models.multiBar().stacked(false).yScale(n),C=c.models.multiBar().stacked(false).yScale(m),A=c.models.stackedArea().yScale(n),t=c.models.stackedArea().yScale(m),G=c.models.axis().scale(w).orient("bottom").tickPadding(5),
v=c.models.axis().scale(n).orient("left"),x=c.models.axis().scale(m).orient("right"),z=c.models.legend().height(30),F=c.models.tooltip(),h=d3.dispatch();a.dispatch=h;a.legend=z;a.lines1=B;a.lines2=E;a.scatters1=s;a.scatters2=q;a.bars1=u;a.bars2=C;a.stack1=A;a.stack2=t;a.xAxis=G;a.yAxis1=v;a.yAxis2=x;a.tooltip=F;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return j},set:function(a){j=a}},height:{get:function(){return f},set:function(a){f=a}},showLegend:{get:function(){return g},
set:function(a){g=a}},yDomain1:{get:function(){return d},set:function(a){d=a}},yDomain2:{get:function(){return k},set:function(a){k=a}},noData:{get:function(){return i},set:function(a){i=a}},interpolate:{get:function(){return p},set:function(a){p=a}},margin:{get:function(){return b},set:function(a){b.top=a.top!==void 0?a.top:b.top;b.right=a.right!==void 0?a.right:b.right;b.bottom=a.bottom!==void 0?a.bottom:b.bottom;b.left=a.left!==void 0?a.left:b.left}},color:{get:function(){return e},set:function(a){e=
c.utils.getColor(a)}},x:{get:function(){return l},set:function(a){l=a;B.x(a);E.x(a);s.x(a);q.x(a);u.x(a);C.x(a);A.x(a);t.x(a)}},y:{get:function(){return r},set:function(a){r=a;B.y(a);E.y(a);s.y(a);q.y(a);A.y(a);t.y(a);u.y(a);C.y(a)}},useVoronoi:{get:function(){return o},set:function(a){o=a;B.useVoronoi(a);E.useVoronoi(a);A.useVoronoi(a);t.useVoronoi(a)}}});c.utils.initOptions(a);return a};c.models.ohlcBar=function(){function a(q){q.each(function(a){g=d3.select(this);var q=c.utils.availableWidth(e,
g,b),v=c.utils.availableHeight(j,g,b);c.utils.initSVG(g);var h=q/a[0].values.length*0.9;i.domain(u||d3.extent(a[0].values.map(k).concat(n)));B?i.range(A||[q*0.5/a[0].values.length,q*(a[0].values.length-0.5)/a[0].values.length]):i.range(A||[5+h/2,q-h/2-5]);d.domain(C||[d3.min(a[0].values.map(w).concat(m)),d3.max(a[0].values.map(o).concat(m))]).range(t||[v,0]);i.domain()[0]===i.domain()[1]&&(i.domain()[0]?i.domain([i.domain()[0]-i.domain()[0]*0.01,i.domain()[1]+i.domain()[1]*0.01]):i.domain([-1,1]));
d.domain()[0]===d.domain()[1]&&(d.domain()[0]?d.domain([d.domain()[0]+d.domain()[0]*0.01,d.domain()[1]-d.domain()[1]*0.01]):d.domain([-1,1]));var I=d3.select(this).selectAll("g.nv-wrap.nv-ohlcBar").data([a[0].values]),y=I.enter().append("g").attr("class","nvd3 nv-wrap nv-ohlcBar"),H=y.append("defs"),y=y.append("g"),M=I.select("g");y.append("g").attr("class","nv-ticks");I.attr("transform","translate("+b.left+","+b.top+")");g.on("click",function(a,b){G.chartClick({data:a,index:b,pos:d3.event,id:f})});
H.append("clipPath").attr("id","nv-chart-clip-path-"+f).append("rect");I.select("#nv-chart-clip-path-"+f+" rect").attr("width",q).attr("height",v);M.attr("clip-path",E?"url(#nv-chart-clip-path-"+f+")":"");v=I.select(".nv-ticks").selectAll(".nv-tick").data(function(a){return a});v.exit().remove();v.enter().append("path").attr("class",function(a,b,c){return(r(a,b)>p(a,b)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+c+"-"+b}).attr("d",function(a,b){return"m0,0l0,"+(d(r(a,b))-d(o(a,b)))+"l"+-h/
2+",0l"+h/2+",0l0,"+(d(w(a,b))-d(r(a,b)))+"l0,"+(d(p(a,b))-d(w(a,b)))+"l"+h/2+",0l"+-h/2+",0z"}).attr("transform",function(a,b){return"translate("+i(k(a,b))+","+d(o(a,b))+")"}).attr("fill",function(){return s[0]}).attr("stroke",function(){return s[0]}).attr("x",0).attr("y",function(a,b){return d(Math.max(0,l(a,b)))}).attr("height",function(a,b){return Math.abs(d(l(a,b))-d(0))});v.attr("class",function(a,b,c){return(r(a,b)>p(a,b)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+c+"-"+b});d3.transition(v).attr("transform",
function(a,b){return"translate("+i(k(a,b))+","+d(o(a,b))+")"}).attr("d",function(b,c){var e=q/a[0].values.length*0.9;return"m0,0l0,"+(d(r(b,c))-d(o(b,c)))+"l"+-e/2+",0l"+e/2+",0l0,"+(d(w(b,c))-d(r(b,c)))+"l0,"+(d(p(b,c))-d(w(b,c)))+"l"+e/2+",0l"+-e/2+",0z"})});return a}var b={top:0,right:0,bottom:0,left:0},e=null,j=null,f=Math.floor(Math.random()*1E4),g=null,i=d3.scale.linear(),d=d3.scale.linear(),k=function(a){return a.x},l=function(a){return a.y},r=function(a){return a.open},p=function(a){return a.close},
o=function(a){return a.high},w=function(a){return a.low},n=[],m=[],B=false,E=true,s=c.utils.defaultColor(),q=false,u,C,A,t,G=d3.dispatch("stateChange","changeState","renderEnd","chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove");a.highlightPoint=function(b,c){a.clearHighlights();g.select(".nv-ohlcBar .nv-tick-0-"+b).classed("hover",c)};a.clearHighlights=function(){g.select(".nv-ohlcBar .nv-tick.hover").classed("hover",false)};a.dispatch=G;a.options=
c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return e},set:function(a){e=a}},height:{get:function(){return j},set:function(a){j=a}},xScale:{get:function(){return i},set:function(a){i=a}},yScale:{get:function(){return d},set:function(a){d=a}},xDomain:{get:function(){return u},set:function(a){u=a}},yDomain:{get:function(){return C},set:function(a){C=a}},xRange:{get:function(){return A},set:function(a){A=a}},yRange:{get:function(){return t},set:function(a){t=a}},forceX:{get:function(){return n},
set:function(a){n=a}},forceY:{get:function(){return m},set:function(a){m=a}},padData:{get:function(){return B},set:function(a){B=a}},clipEdge:{get:function(){return E},set:function(a){E=a}},id:{get:function(){return f},set:function(a){f=a}},interactive:{get:function(){return q},set:function(a){q=a}},x:{get:function(){return k},set:function(a){k=a}},y:{get:function(){return l},set:function(a){l=a}},open:{get:function(){return r()},set:function(a){r=a}},close:{get:function(){return p()},set:function(a){p=
a}},high:{get:function(){return o},set:function(a){o=a}},low:{get:function(){return w},set:function(a){w=a}},margin:{get:function(){return b},set:function(a){b.top=a.top!=void 0?a.top:b.top;b.right=a.right!=void 0?a.right:b.right;b.bottom=a.bottom!=void 0?a.bottom:b.bottom;b.left=a.left!=void 0?a.left:b.left}},color:{get:function(){return s},set:function(a){s=c.utils.getColor(a)}}});c.utils.initOptions(a);return a};c.models.parallelCoordinates=function(){function a(n){n.each(function(a){function n(a){return G(i.map(function(b){if(isNaN(a[b])||
isNaN(parseFloat(a[b]))){var c=g[b].domain(),d=g[b].range(),e=c[0]-(c[1]-c[0])/9;if(h.indexOf(b)<0){c=d3.scale.linear().domain([e,c[1]]).range([C-12,d[1]]);g[b].brush.y(c);h.push(b)}return[f(b),g[b](e)]}if(h.length>0){x.style("display","inline");z.style("display","inline")}else{x.style("display","none");z.style("display","none")}return[f(b),g[b](a[b])]}))}function E(){var a=i.filter(function(a){return!g[a].brush.empty()}),b=a.map(function(a){return g[a].brush.extent()});l=[];a.forEach(function(a,
c){l[c]={dimension:a,extent:b[c]}});r=[];H.style("display",function(c){var d=a.every(function(a,d){return isNaN(c[a])&&b[d][0]==g[a].brush.y().domain()[0]?true:b[d][0]<=c[a]&&c[a]<=b[d][1]});d&&r.push(c);return d?null:"none"});w.brush({filters:l,active:r})}function s(a){var b=p[a];return b==null?f(a):b}var q=d3.select(this),u=c.utils.availableWidth(e,q,b),C=c.utils.availableHeight(j,q,b);c.utils.initSVG(q);r=a;f.rangePoints([0,u],1).domain(i);i.forEach(function(b){var c=d3.extent(a,function(a){return+a[b]});
if(c[0]===void 0){c[0]=0;c[1]=0}if(c[0]===c[1]){c[0]=c[0]-1;c[1]=c[1]+1}g[b]=d3.scale.linear().domain(c).range([(C-12)*0.9,0]);g[b].brush=d3.svg.brush().y(g[b]).on("brush",E);return b!="name"});var q=q.selectAll("g.nv-wrap.nv-parallelCoordinates").data([a]),A=q.enter().append("g").attr("class","nvd3 nv-wrap nv-parallelCoordinates").append("g"),t=q.select("g");A.append("g").attr("class","nv-parallelCoordinates background");A.append("g").attr("class","nv-parallelCoordinates foreground");A.append("g").attr("class",
"nv-parallelCoordinates missingValuesline");q.attr("transform","translate("+b.left+","+b.top+")");var G=d3.svg.line().interpolate("cardinal").tension(o),v=d3.svg.axis().orient("left"),A=d3.behavior.drag().on("dragstart",function(a){p[a]=this.parentNode.__origin__=f(a);y.attr("visibility","hidden")}).on("drag",function(a){p[a]=Math.min(u,Math.max(0,this.parentNode.__origin__=this.parentNode.__origin__+d3.event.x));H.attr("d",n);i.sort(function(a,b){return s(a)-s(b)});f.domain(i);M.attr("transform",
function(a){return"translate("+s(a)+")"})}).on("dragend",function(a){delete this.parentNode.__origin__;delete p[a];d3.select(this.parentNode).attr("transform","translate("+f(a)+")");H.attr("d",n);y.attr("d",n).attr("visibility",null)}),x,z,F=f.range()[1]-f.range()[0],h=[],I=[0+F/2,C-12,u-F/2,C-12];x=q.select(".missingValuesline").selectAll("line").data([I]);x.enter().append("line");x.exit().remove();x.attr("x1",function(a){return a[0]}).attr("y1",function(a){return a[1]}).attr("x2",function(a){return a[2]}).attr("y2",
function(a){return a[3]});z=q.select(".missingValuesline").selectAll("text").data(["undefined values"]);z.append("text").data(["undefined values"]);z.enter().append("text");z.exit().remove();z.attr("y",C).attr("x",u-92-F/2).text(function(a){return a});var y=q.select(".background").selectAll("path").data(a);y.enter().append("path");y.exit().remove();y.attr("d",n);var H=q.select(".foreground").selectAll("path").data(a);H.enter().append("path");H.exit().remove();H.attr("d",n).attr("stroke",k);H.on("mouseover",
function(a,b){d3.select(this).classed("hover",true);w.elementMouseover({label:a.name,data:a.data,index:b,pos:[d3.mouse(this.parentNode)[0],d3.mouse(this.parentNode)[1]]})});H.on("mouseout",function(a,b){d3.select(this).classed("hover",false);w.elementMouseout({label:a.name,data:a.data,index:b})});var M=t.selectAll(".dimension").data(i),q=M.enter().append("g").attr("class","nv-parallelCoordinates dimension");q.append("g").attr("class","nv-parallelCoordinates nv-axis");q.append("g").attr("class","nv-parallelCoordinates-brush");
q.append("text").attr("class","nv-parallelCoordinates nv-label");M.attr("transform",function(a){return"translate("+f(a)+",0)"});M.exit().remove();M.select(".nv-label").style("cursor","move").attr("dy","-1em").attr("text-anchor","middle").text(String).on("mouseover",function(a){w.elementMouseover({dim:a,pos:[d3.mouse(this.parentNode.parentNode)[0],d3.mouse(this.parentNode.parentNode)[1]]})}).on("mouseout",function(a){w.elementMouseout({dim:a})}).call(A);M.select(".nv-axis").each(function(a,b){d3.select(this).call(v.scale(g[a]).tickFormat(d3.format(d[b])))});
M.select(".nv-parallelCoordinates-brush").each(function(a){d3.select(this).call(g[a].brush)}).selectAll("rect").attr("x",-8).attr("width",16)});return a}var b={top:30,right:0,bottom:10,left:0},e=null,j=null,f=d3.scale.ordinal(),g={},i=[],d=[],k=c.utils.defaultColor(),l=[],r=[],p=[],o=1,w=d3.dispatch("brush","elementMouseover","elementMouseout");a.dispatch=w;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return e},set:function(a){e=a}},height:{get:function(){return j},
set:function(a){j=a}},dimensionNames:{get:function(){return i},set:function(a){i=a}},dimensionFormats:{get:function(){return d},set:function(a){d=a}},lineTension:{get:function(){return o},set:function(a){o=a}},dimensions:{get:function(){return i},set:function(a){c.deprecated("dimensions","use dimensionNames instead");i=a}},margin:{get:function(){return b},set:function(a){b.top=a.top!==void 0?a.top:b.top;b.right=a.right!==void 0?a.right:b.right;b.bottom=a.bottom!==void 0?a.bottom:b.bottom;b.left=a.left!==
void 0?a.left:b.left}},color:{get:function(){return k},set:function(a){k=c.utils.getColor(a)}}});c.utils.initOptions(a);return a};c.models.pie=function(){function a(h){F.reset();h.each(function(a){var h=e-b.left-b.right,H=j-b.top-b.bottom,M=Math.min(h,H)/2,D=[],J=[];d=d3.select(this);if(G.length===0)for(var L=M-M/5,O=t*M,K=0;K<a[0].length;K++){D.push(L);J.push(O)}else{D=G.map(function(a){return(a.outer-a.outer/5)*M});J=G.map(function(a){return(a.inner-a.inner/5)*M});t=d3.min(G.map(function(a){return a.inner-
a.inner/5}))}c.utils.initSVG(d);var L=d.selectAll(".nv-wrap.nv-pie").data(a),K=L.enter().append("g").attr("class","nvd3 nv-wrap nv-pie nv-chart-"+i).append("g"),R=L.select("g"),O=K.append("g").attr("class","nv-pie");K.append("g").attr("class","nv-pieLabels");L.attr("transform","translate("+b.left+","+b.top+")");R.select(".nv-pie").attr("transform","translate("+h/2+","+H/2+")");R.select(".nv-pieLabels").attr("transform","translate("+h/2+","+H/2+")");d.on("click",function(a,b){v.chartClick({data:a,
index:b,pos:d3.event,id:i})});x=[];z=[];for(K=0;K<a[0].length;K++){var R=d3.svg.arc().outerRadius(D[K]),ba=d3.svg.arc().outerRadius(D[K]+5);if(q!==false){R.startAngle(q);ba.startAngle(q)}if(C!==false){R.endAngle(C);ba.endAngle(C)}if(n){R.innerRadius(J[K]);ba.innerRadius(J[K])}if(R.cornerRadius&&A){R.cornerRadius(A);ba.cornerRadius(A)}x.push(R);z.push(ba)}J=d3.layout.pie().sort(null).value(function(a){return a.disabled?0:g(a)});J.padAngle&&u&&J.padAngle(u);if(n&&m){O.append("text").attr("class","nv-pie-title");
L.select(".nv-pie-title").style("text-anchor","middle").text(function(){return m}).style("font-size",Math.min(h,H)*t*2/(m.length+2)+"px").attr("dy","0.35em").attr("transform",function(){return"translate(0, "+E+")"})}h=L.select(".nv-pie").selectAll(".nv-slice").data(J);H=L.select(".nv-pieLabels").selectAll(".nv-label").data(J);h.exit().remove();H.exit().remove();J=h.enter().append("g");J.attr("class","nv-slice");J.on("mouseover",function(a,b){d3.select(this).classed("hover",true);B&&d3.select(this).select("path").transition().duration(70).attr("d",
z[b]);v.elementMouseover({data:a.data,index:b,color:d3.select(this).style("fill")})});J.on("mouseout",function(a,b){d3.select(this).classed("hover",false);B&&d3.select(this).select("path").transition().duration(50).attr("d",x[b]);v.elementMouseout({data:a.data,index:b})});J.on("mousemove",function(a,b){v.elementMousemove({data:a.data,index:b})});J.on("click",function(a,b){v.elementClick({data:a.data,index:b,color:d3.select(this).style("fill")})});J.on("dblclick",function(a,b){v.elementDblClick({data:a.data,
index:b,color:d3.select(this).style("fill")})});h.attr("fill",function(a,b){return k(a.data,b)});h.attr("stroke",function(a,b){return k(a.data,b)});J.append("path").each(function(a){this._current=a});h.select("path").transition().attr("d",function(a,b){return x[b](a)}).attrTween("d",function(a,b){a.endAngle=isNaN(a.endAngle)?0:a.endAngle;a.startAngle=isNaN(a.startAngle)?0:a.startAngle;if(!n)a.innerRadius=0;var c=d3.interpolate(this._current,a);this._current=c(0);return function(a){return x[b](c(a))}});
if(r){for(var N=[],K=0;K<a[0].length;K++){N.push(x[K]);if(p){if(n){N[K]=d3.svg.arc().outerRadius(x[K].outerRadius());q!==false&&N[K].startAngle(q);C!==false&&N[K].endAngle(C)}}else n||N[K].innerRadius(0)}H.enter().append("g").classed("nv-label",true).each(function(a){var b=d3.select(this);b.attr("transform",function(a,b){if(s){a.outerRadius=D[b]+10;a.innerRadius=D[b]+15;var c=(a.startAngle+a.endAngle)/2*(180/Math.PI),c=(a.startAngle+a.endAngle)/2<Math.PI?c-90:c+90;return"translate("+N[b].centroid(a)+
") rotate("+c+")"}a.outerRadius=M+10;a.innerRadius=M+15;return"translate("+N[b].centroid(a)+")"});b.append("rect").style("stroke","#fff").style("fill","#fff").attr("rx",3).attr("ry",3);b.append("text").style("text-anchor",s?(a.startAngle+a.endAngle)/2<Math.PI?"start":"end":"middle").style("fill","#000")});var P={},V=function(a){return Math.floor(a[0]/140)*140+","+Math.floor(a[1]/14)*14};H.watchTransition(F,"pie labels").attr("transform",function(a,b){if(s){a.outerRadius=D[b]+10;a.innerRadius=D[b]+
15;var c=(a.startAngle+a.endAngle)/2*(180/Math.PI),c=(a.startAngle+a.endAngle)/2<Math.PI?c-90:c+90;return"translate("+N[b].centroid(a)+") rotate("+c+")"}a.outerRadius=M+10;a.innerRadius=M+15;c=N[b].centroid(a);if(a.value){var d=V(c);P[d]&&(c[1]=c[1]-14);P[V(c)]=true}return"translate("+c+")"});H.select(".nv-label text").style("text-anchor",function(a){return s?(a.startAngle+a.endAngle)/2<Math.PI?"start":"end":"middle"}).text(function(a,b){var c=(a.endAngle-a.startAngle)/(2*Math.PI),d="";if(!a.value||
c<w)return"";if(typeof o==="function")d=o(a,b,{key:f(a.data),value:g(a.data),percent:l(c)});else switch(o){case "key":d=f(a.data);break;case "value":d=l(g(a.data));break;case "percent":d=d3.format("%")(c)}return d})}});F.renderEnd("pie immediate");return a}var b={top:0,right:0,bottom:0,left:0},e=500,j=500,f=function(a){return a.x},g=function(a){return a.y},i=Math.floor(Math.random()*1E4),d=null,k=c.utils.defaultColor(),l=d3.format(",.2f"),r=true,p=false,o="key",w=0.02,n=false,m=false,B=true,E=0,s=
false,q=false,u=false,C=false,A=0,t=0.5,G=[],v=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),x=[],z=[],F=c.utils.renderWatch(v);a.dispatch=v;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{arcsRadius:{get:function(){return G},set:function(a){G=a}},width:{get:function(){return e},set:function(a){e=a}},height:{get:function(){return j},set:function(a){j=a}},showLabels:{get:function(){return r},set:function(a){r=
a}},title:{get:function(){return m},set:function(a){m=a}},titleOffset:{get:function(){return E},set:function(a){E=a}},labelThreshold:{get:function(){return w},set:function(a){w=a}},valueFormat:{get:function(){return l},set:function(a){l=a}},x:{get:function(){return f},set:function(a){f=a}},id:{get:function(){return i},set:function(a){i=a}},endAngle:{get:function(){return C},set:function(a){C=a}},startAngle:{get:function(){return q},set:function(a){q=a}},padAngle:{get:function(){return u},set:function(a){u=
a}},cornerRadius:{get:function(){return A},set:function(a){A=a}},donutRatio:{get:function(){return t},set:function(a){t=a}},labelsOutside:{get:function(){return p},set:function(a){p=a}},labelSunbeamLayout:{get:function(){return s},set:function(a){s=a}},donut:{get:function(){return n},set:function(a){n=a}},growOnHover:{get:function(){return B},set:function(a){B=a}},pieLabelsOutside:{get:function(){return p},set:function(a){p=a;c.deprecated("pieLabelsOutside","use labelsOutside instead")}},donutLabelsOutside:{get:function(){return p},
set:function(a){p=a;c.deprecated("donutLabelsOutside","use labelsOutside instead")}},labelFormat:{get:function(){return l},set:function(a){l=a;c.deprecated("labelFormat","use valueFormat instead")}},margin:{get:function(){return b},set:function(a){b.top=typeof a.top!="undefined"?a.top:b.top;b.right=typeof a.right!="undefined"?a.right:b.right;b.bottom=typeof a.bottom!="undefined"?a.bottom:b.bottom;b.left=typeof a.left!="undefined"?a.left:b.left}},y:{get:function(){return g},set:function(a){g=d3.functor(a)}},
color:{get:function(){return k},set:function(a){k=c.utils.getColor(a)}},labelType:{get:function(){return o},set:function(a){o=a||"key"}}});c.utils.initOptions(a);return a};c.models.pieChart=function(){function a(j){m.reset();m.models(b);j.each(function(j){var m=d3.select(this);c.utils.initSVG(m);var l=c.utils.availableWidth(g,m,f),o=c.utils.availableHeight(i,m,f);a.update=function(){m.transition().call(a)};a.container=this;r.setter(E(j),a.update).getter(B(j)).update();r.disabled=j.map(function(a){return!!a.disabled});
if(!p){var s;p={};for(s in r)p[s]=r[s]instanceof Array?r[s].slice(0):r[s]}if(!j||!j.length){c.utils.noData(a,m);return a}m.selectAll(".nv-noData").remove();s=m.selectAll("g.nv-wrap.nv-pieChart").data([j]);var w=s.enter().append("g").attr("class","nvd3 nv-wrap nv-pieChart").append("g"),v=s.select("g");w.append("g").attr("class","nv-pieWrap");w.append("g").attr("class","nv-legendWrap");if(d)if(k==="top"){e.width(l).key(b.x());s.select(".nv-legendWrap").datum(j).call(e);if(f.top!=e.height()){f.top=e.height();
o=c.utils.availableHeight(i,m,f)}s.select(".nv-legendWrap").attr("transform","translate(0,"+-f.top+")")}else if(k==="right"){w=c.models.legend().width();l/2<w&&(w=l/2);e.height(o).key(b.x());e.width(w);l=l-e.width();s.select(".nv-legendWrap").datum(j).call(e).attr("transform","translate("+l+",0)")}s.attr("transform","translate("+f.left+","+f.top+")");b.width(l).height(o);l=v.select(".nv-pieWrap").datum([j]);d3.transition(l).call(b);e.dispatch.on("stateChange",function(b){for(var c in b)r[c]=b[c];
n.stateChange(r);a.update()});n.on("changeState",function(b){if(typeof b.disabled!=="undefined"){j.forEach(function(a,c){a.disabled=b.disabled[c]});r.disabled=b.disabled}a.update()})});m.renderEnd("pieChart immediate");return a}var b=c.models.pie(),e=c.models.legend(),j=c.models.tooltip(),f={top:30,right:20,bottom:20,left:20},g=null,i=null,d=true,k="top",l=c.utils.defaultColor(),r=c.utils.state(),p=null,o=null,w=250,n=d3.dispatch("stateChange","changeState","renderEnd");j.duration(0).headerEnabled(false).valueFormatter(function(a,
c){return b.valueFormat()(a,c)});var m=c.utils.renderWatch(n),B=function(a){return function(){return{active:a.map(function(a){return!a.disabled})}}},E=function(a){return function(b){b.active!==void 0&&a.forEach(function(a,c){a.disabled=!b.active[c]})}};b.dispatch.on("elementMouseover.tooltip",function(b){b.series={key:a.x()(b.data),value:a.y()(b.data),color:b.color};j.data(b).hidden(false)});b.dispatch.on("elementMouseout.tooltip",function(){j.hidden(true)});b.dispatch.on("elementMousemove.tooltip",
function(){j()});a.legend=e;a.dispatch=n;a.pie=b;a.tooltip=j;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{noData:{get:function(){return o},set:function(a){o=a}},showLegend:{get:function(){return d},set:function(a){d=a}},legendPosition:{get:function(){return k},set:function(a){k=a}},defaultState:{get:function(){return p},set:function(a){p=a}},color:{get:function(){return l},set:function(a){l=a;e.color(l);b.color(l)}},duration:{get:function(){return w},set:function(a){w=a;m.reset(w)}},
margin:{get:function(){return f},set:function(a){f.top=a.top!==void 0?a.top:f.top;f.right=a.right!==void 0?a.right:f.right;f.bottom=a.bottom!==void 0?a.bottom:f.bottom;f.left=a.left!==void 0?a.left:f.left}}});c.utils.inheritOptions(a,b);c.utils.initOptions(a);return a};c.models.scatter=function(){function a(D){R.reset();D.each(function(a){i=d3.select(this);var D=c.utils.availableWidth(e,i,b),N=c.utils.availableHeight(j,i,b);c.utils.initSVG(i);a.forEach(function(a,b){a.values.forEach(function(a){a.series=
b})});var U=v&&x&&h?[]:d3.merge(a.map(function(a){return a.values.map(function(a,b){return{x:r(a,b),y:p(a,b),size:o(a,b)}})}));d.domain(v||d3.extent(U.map(function(a){return a.x}).concat(n)));q&&a[0]?d.range(z||[(D*u+D)/(2*a[0].values.length),D-D*(1+u)/(2*a[0].values.length)]):d.range(z||[0,D]);k.domain(x||d3.extent(U.map(function(a){return a.y}).concat(m))).range(F||[N,0]);l.domain(h||d3.extent(U.map(function(a){return a.size}).concat(B))).range(I||ba);y=d.domain()[0]===d.domain()[1]||k.domain()[0]===
k.domain()[1];d.domain()[0]===d.domain()[1]&&(d.domain()[0]?d.domain([d.domain()[0]-d.domain()[0]*0.01,d.domain()[1]+d.domain()[1]*0.01]):d.domain([-1,1]));k.domain()[0]===k.domain()[1]&&(k.domain()[0]?k.domain([k.domain()[0]-k.domain()[0]*0.01,k.domain()[1]+k.domain()[1]*0.01]):k.domain([-1,1]));isNaN(d.domain()[0])&&d.domain([-1,1]);isNaN(k.domain()[0])&&k.domain([-1,1]);J=J||d;L=L||k;var W=i.selectAll("g.nv-wrap.nv-scatter").data([a]),U=W.enter().append("g").attr("class","nvd3 nv-wrap nv-scatter nv-chart-"+
g),Z=U.append("defs"),$=U.append("g"),Q=W.select("g");W.classed("nv-single-point",y);$.append("g").attr("class","nv-groups");$.append("g").attr("class","nv-point-paths");U.append("g").attr("class","nv-point-clips");W.attr("transform","translate("+b.left+","+b.top+")");Z.append("clipPath").attr("id","nv-edge-clip-"+g).append("rect");W.select("#nv-edge-clip-"+g+" rect").attr("width",D).attr("height",N>0?N:0);Q.attr("clip-path",C?"url(#nv-edge-clip-"+g+")":"");K=true;D=W.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},
function(a){return a.key});D.enter().append("g").style("stroke-opacity",1.0E-6).style("fill-opacity",1.0E-6);D.exit().remove();D.attr("class",function(a,b){return"nv-group nv-series-"+b}).classed("hover",function(a){return a.hover});D.watchTransition(R,"scatter: groups").style("fill",function(a,b){return f(a,b)}).style("stroke",function(a,b){return f(a,b)}).style("stroke-opacity",1).style("fill-opacity",0.5);N=D.selectAll("path.nv-point").data(function(a){return a.values.map(function(a,b){return[a,
b]}).filter(function(a,b){return s(a[0],b)})});N.enter().append("path").style("fill",function(a){return a.color}).style("stroke",function(a){return a.color}).attr("transform",function(a){return"translate("+J(r(a[0],a[1]))+","+L(p(a[0],a[1]))+")"}).attr("d",c.utils.symbol().type(function(a){return w(a[0])}).size(function(a){return l(o(a[0],a[1]))}));N.exit().remove();D.exit().selectAll("path.nv-point").watchTransition(R,"scatter exit").attr("transform",function(a){return"translate("+d(r(a[0],a[1]))+
","+k(p(a[0],a[1]))+")"}).remove();N.each(function(a){d3.select(this).classed("nv-point",true).classed("nv-point-"+a[1],true).classed("nv-noninteractive",!E).classed("hover",false)});N.watchTransition(R,"scatter points").attr("transform",function(a){return"translate("+d(r(a[0],a[1]))+","+k(p(a[0],a[1]))+")"}).attr("d",c.utils.symbol().type(function(a){return w(a[0])}).size(function(a){return l(o(a[0],a[1]))}));clearTimeout(O);O=setTimeout(function(){K=false;if(!E)return false;if(M===true){var c=d3.merge(a.map(function(a,
b){return a.values.map(function(a,c){var e=r(a,c),f=p(a,c);return[d(e)+Math.random()*1.0E-4,k(f)+Math.random()*1.0E-4,b,c,a]}).filter(function(a,b){return s(a[4],b)})}));if(c.length==0)return false;if(c.length<3){c.push([d.range()[0]-20,k.range()[0]-20,null,null]);c.push([d.range()[1]+20,k.range()[1]+20,null,null]);c.push([d.range()[0]-20,k.range()[0]+20,null,null]);c.push([d.range()[1]+20,k.range()[1]-20,null,null])}var h=d3.geom.polygon([[-10,-10],[-10,j+10],[e+10,j+10],[e+10,-10]]),m=d3.geom.voronoi(c).map(function(a,
b){return{data:h.clip(a),series:c[b][2],point:c[b][3]}});W.select(".nv-point-paths").selectAll("path").remove();var m=W.select(".nv-point-paths").selectAll("path").data(m),q=m.enter().append("svg:path").attr("d",function(a){return!a||!a.data||a.data.length===0?"M 0 0":"M"+a.data.join(",")+"Z"}).attr("id",function(a,b){return"nv-path-"+b}).attr("clip-path",function(a,b){return"url(#nv-clip-"+g+"-"+b+")"});t&&q.style("fill",d3.rgb(230,230,230)).style("fill-opacity",0.4).style("stroke-opacity",1).style("stroke",
d3.rgb(200,200,200));if(A){W.select(".nv-point-clips").selectAll("*").remove();W.select(".nv-point-clips").selectAll("clipPath").data(c).enter().append("svg:clipPath").attr("id",function(a,b){return"nv-clip-"+g+"-"+b}).append("svg:circle").attr("cx",function(a){return a[0]}).attr("cy",function(a){return a[1]}).attr("r",G)}var l=function(c,e){if(K)return 0;var h=a[c.series];if(h!==void 0){var g=h.values[c.point];g.color=f(h,c.series);g.x=r(g);g.y=p(g);var j=i.node().getBoundingClientRect(),m=window.pageYOffset||
document.documentElement.scrollTop,q=window.pageXOffset||document.documentElement.scrollLeft,j={left:d(r(g,c.point))+j.left+q+b.left+10,top:k(p(g,c.point))+j.top+m+b.top+10};e({point:g,series:h,pos:j,relativePos:[d(r(g,c.point))+b.left,k(p(g,c.point))+b.top],seriesIndex:c.series,pointIndex:c.point})}};m.on("click",function(a){l(a,H.elementClick)}).on("dblclick",function(a){l(a,H.elementDblClick)}).on("mouseover",function(a){l(a,H.elementMouseover)}).on("mouseout",function(a){l(a,H.elementMouseout)})}else W.select(".nv-groups").selectAll(".nv-group").selectAll(".nv-point").on("click",
function(c,e){if(K||!a[c.series])return 0;var f=a[c.series],h=f.values[e];H.elementClick({point:h,series:f,pos:[d(r(h,e))+b.left,k(p(h,e))+b.top],relativePos:[d(r(h,e))+b.left,k(p(h,e))+b.top],seriesIndex:c.series,pointIndex:e})}).on("dblclick",function(c,e){if(K||!a[c.series])return 0;var f=a[c.series],h=f.values[e];H.elementDblClick({point:h,series:f,pos:[d(r(h,e))+b.left,k(p(h,e))+b.top],relativePos:[d(r(h,e))+b.left,k(p(h,e))+b.top],seriesIndex:c.series,pointIndex:e})}).on("mouseover",function(c,
e){if(K||!a[c.series])return 0;var h=a[c.series],g=h.values[e];H.elementMouseover({point:g,series:h,pos:[d(r(g,e))+b.left,k(p(g,e))+b.top],relativePos:[d(r(g,e))+b.left,k(p(g,e))+b.top],seriesIndex:c.series,pointIndex:e,color:f(c,e)})}).on("mouseout",function(c,e){if(K||!a[c.series])return 0;var h=a[c.series],g=h.values[e];H.elementMouseout({point:g,series:h,pos:[d(r(g,e))+b.left,k(p(g,e))+b.top],relativePos:[d(r(g,e))+b.left,k(p(g,e))+b.top],seriesIndex:c.series,pointIndex:e,color:f(c,e)})})},300);
J=d.copy();L=k.copy();l.copy()});R.renderEnd("scatter immediate");return a}var b={top:0,right:0,bottom:0,left:0},e=null,j=null,f=c.utils.defaultColor(),g=Math.floor(Math.random()*1E5),i=null,d=d3.scale.linear(),k=d3.scale.linear(),l=d3.scale.linear(),r=function(a){return a.x},p=function(a){return a.y},o=function(a){return a.size||1},w=function(a){return a.shape||"circle"},n=[],m=[],B=[],E=true,s=function(a){return!a.notActive},q=false,u=0.1,C=false,A=true,t=false,G=function(){return 25},v=null,x=
null,z=null,F=null,h=null,I=null,y=false,H=d3.dispatch("elementClick","elementDblClick","elementMouseover","elementMouseout","renderEnd"),M=true,D=250,J,L,O,K=false,R=c.utils.renderWatch(H,D),ba=[16,256];a.dispatch=H;a.options=c.utils.optionsFunc.bind(a);a._calls=new function(){this.clearHighlights=function(){c.dom.write(function(){i.selectAll(".nv-point.hover").classed("hover",false)});return null};this.highlightPoint=function(a,b,e){c.dom.write(function(){i.select(".nv-groups").selectAll(".nv-series-"+
a).selectAll(".nv-point-"+b).classed("hover",e)})}};H.on("elementMouseover.point",function(b){E&&a._calls.highlightPoint(b.seriesIndex,b.pointIndex,true)});H.on("elementMouseout.point",function(b){E&&a._calls.highlightPoint(b.seriesIndex,b.pointIndex,false)});a._options=Object.create({},{width:{get:function(){return e},set:function(a){e=a}},height:{get:function(){return j},set:function(a){j=a}},xScale:{get:function(){return d},set:function(a){d=a}},yScale:{get:function(){return k},set:function(a){k=
a}},pointScale:{get:function(){return l},set:function(a){l=a}},xDomain:{get:function(){return v},set:function(a){v=a}},yDomain:{get:function(){return x},set:function(a){x=a}},pointDomain:{get:function(){return h},set:function(a){h=a}},xRange:{get:function(){return z},set:function(a){z=a}},yRange:{get:function(){return F},set:function(a){F=a}},pointRange:{get:function(){return I},set:function(a){I=a}},forceX:{get:function(){return n},set:function(a){n=a}},forceY:{get:function(){return m},set:function(a){m=
a}},forcePoint:{get:function(){return B},set:function(a){B=a}},interactive:{get:function(){return E},set:function(a){E=a}},pointActive:{get:function(){return s},set:function(a){s=a}},padDataOuter:{get:function(){return u},set:function(a){u=a}},padData:{get:function(){return q},set:function(a){q=a}},clipEdge:{get:function(){return C},set:function(a){C=a}},clipVoronoi:{get:function(){return A},set:function(a){A=a}},clipRadius:{get:function(){return G},set:function(a){G=a}},showVoronoi:{get:function(){return t},
set:function(a){t=a}},id:{get:function(){return g},set:function(a){g=a}},x:{get:function(){return r},set:function(a){r=d3.functor(a)}},y:{get:function(){return p},set:function(a){p=d3.functor(a)}},pointSize:{get:function(){return o},set:function(a){o=d3.functor(a)}},pointShape:{get:function(){return w},set:function(a){w=d3.functor(a)}},margin:{get:function(){return b},set:function(a){b.top=a.top!==void 0?a.top:b.top;b.right=a.right!==void 0?a.right:b.right;b.bottom=a.bottom!==void 0?a.bottom:b.bottom;
b.left=a.left!==void 0?a.left:b.left}},duration:{get:function(){return D},set:function(a){D=a;R.reset(D)}},color:{get:function(){return f},set:function(a){f=c.utils.getColor(a)}},useVoronoi:{get:function(){return M},set:function(a){M=a;M===false&&(A=false)}}});c.utils.initOptions(a);return a};c.models.scatterChart=function(){function a(h){x.reset();x.models(b);s&&x.models(e);q&&x.models(j);m&&x.models(g);B&&x.models(i);h.each(function(h){p=d3.select(this);c.utils.initSVG(p);var y=c.utils.availableWidth(l,
p,k),H=c.utils.availableHeight(r,p,k);a.update=function(){v===0?p.call(a):p.transition().duration(v).call(a)};a.container=this;C.setter(F(h),a.update).getter(z(h)).update();C.disabled=h.map(function(a){return!!a.disabled});if(!A){var G;A={};for(G in C)A[G]=C[G]instanceof Array?C[G].slice(0):C[G]}if(!h||!h.length||!h.filter(function(a){return a.values.length}).length){c.utils.noData(a,p);x.renderEnd("scatter immediate");return a}p.selectAll(".nv-noData").remove();w=b.xScale();n=b.yScale();var D=p.selectAll("g.nv-wrap.nv-scatterChart").data([h]);
G=D.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+b.id()).append("g");var J=D.select("g");G.append("rect").attr("class","nvd3 nv-background").style("pointer-events","none");G.append("g").attr("class","nv-x nv-axis");G.append("g").attr("class","nv-y nv-axis");G.append("g").attr("class","nv-scatterWrap");G.append("g").attr("class","nv-regressionLinesWrap");G.append("g").attr("class","nv-distWrap");G.append("g").attr("class","nv-legendWrap");u&&J.select(".nv-y.nv-axis").attr("transform",
"translate("+y+",0)");if(E){f.width(y);D.select(".nv-legendWrap").datum(h).call(f);if(k.top!=f.height()){k.top=f.height();H=c.utils.availableHeight(r,p,k)}D.select(".nv-legendWrap").attr("transform","translate(0,"+-k.top+")")}D.attr("transform","translate("+k.left+","+k.top+")");b.width(y).height(H).color(h.map(function(a,b){a.color=a.color||o(a,b);return a.color}).filter(function(a,b){return!h[b].disabled}));D.select(".nv-scatterWrap").datum(h.filter(function(a){return!a.disabled})).call(b);D.select(".nv-regressionLinesWrap").attr("clip-path",
"url(#nv-edge-clip-"+b.id()+")");D=D.select(".nv-regressionLinesWrap").selectAll(".nv-regLines").data(function(a){return a});D.enter().append("g").attr("class","nv-regLines");D=D.selectAll(".nv-regLine").data(function(a){return[a]});D.enter().append("line").attr("class","nv-regLine").style("stroke-opacity",0);D.filter(function(a){return a.intercept&&a.slope}).watchTransition(x,"scatterPlusLineChart: regline").attr("x1",w.range()[0]).attr("x2",w.range()[1]).attr("y1",function(a){return n(w.domain()[0]*
a.slope+a.intercept)}).attr("y2",function(a){return n(w.domain()[1]*a.slope+a.intercept)}).style("stroke",function(a,b,c){return o(a,c)}).style("stroke-opacity",function(a){return a.disabled||typeof a.slope==="undefined"||typeof a.intercept==="undefined"?0:1});if(s){e.scale(w)._ticks(c.utils.calcTicksX(y/100,h)).tickSize(-H,0);J.select(".nv-x.nv-axis").attr("transform","translate(0,"+n.range()[0]+")").call(e)}if(q){j.scale(n)._ticks(c.utils.calcTicksY(H/36,h)).tickSize(-y,0);J.select(".nv-y.nv-axis").call(j)}if(m){g.getData(b.x()).scale(w).width(y).color(h.map(function(a,
b){return a.color||o(a,b)}).filter(function(a,b){return!h[b].disabled}));G.select(".nv-distWrap").append("g").attr("class","nv-distributionX");J.select(".nv-distributionX").attr("transform","translate(0,"+n.range()[0]+")").datum(h.filter(function(a){return!a.disabled})).call(g)}if(B){i.getData(b.y()).scale(n).width(H).color(h.map(function(a,b){return a.color||o(a,b)}).filter(function(a,b){return!h[b].disabled}));G.select(".nv-distWrap").append("g").attr("class","nv-distributionY");J.select(".nv-distributionY").attr("transform",
"translate("+(u?y:-i.size())+",0)").datum(h.filter(function(a){return!a.disabled})).call(i)}f.dispatch.on("stateChange",function(b){for(var c in b)C[c]=b[c];t.stateChange(C);a.update()});t.on("changeState",function(b){if(typeof b.disabled!=="undefined"){h.forEach(function(a,c){a.disabled=b.disabled[c]});C.disabled=b.disabled}a.update()});b.dispatch.on("elementMouseout.tooltip",function(a){d.hidden(true);p.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-distx-"+a.pointIndex).attr("y1",
0);p.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-disty-"+a.pointIndex).attr("x2",i.size())});b.dispatch.on("elementMouseover.tooltip",function(a){p.select(".nv-series-"+a.seriesIndex+" .nv-distx-"+a.pointIndex).attr("y1",a.relativePos[1]-H);p.select(".nv-series-"+a.seriesIndex+" .nv-disty-"+a.pointIndex).attr("x2",a.relativePos[0]+g.size());d.data(a).hidden(false)});w.copy();n.copy()});x.renderEnd("scatter with line immediate");return a}var b=c.models.scatter(),e=c.models.axis(),
j=c.models.axis(),f=c.models.legend(),g=c.models.distribution(),i=c.models.distribution(),d=c.models.tooltip(),k={top:30,right:20,bottom:50,left:75},l=null,r=null,p=null,o=c.utils.defaultColor(),w=b.xScale(),n=b.yScale(),m=false,B=false,E=true,s=true,q=true,u=false,C=c.utils.state(),A=null,t=d3.dispatch("stateChange","changeState","renderEnd"),G=null,v=250;b.xScale(w).yScale(n);e.orient("bottom").tickPadding(10);j.orient(u?"right":"left").tickPadding(10);g.axis("x");i.axis("y");d.headerFormatter(function(a,
b){return e.tickFormat()(a,b)}).valueFormatter(function(a,b){return j.tickFormat()(a,b)});var x=c.utils.renderWatch(t,v),z=function(a){return function(){return{active:a.map(function(a){return!a.disabled})}}},F=function(a){return function(b){b.active!==void 0&&a.forEach(function(a,c){a.disabled=!b.active[c]})}};a.dispatch=t;a.scatter=b;a.legend=f;a.xAxis=e;a.yAxis=j;a.distX=g;a.distY=i;a.tooltip=d;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return l},set:function(a){l=
a}},height:{get:function(){return r},set:function(a){r=a}},container:{get:function(){return p},set:function(a){p=a}},showDistX:{get:function(){return m},set:function(a){m=a}},showDistY:{get:function(){return B},set:function(a){B=a}},showLegend:{get:function(){return E},set:function(a){E=a}},showXAxis:{get:function(){return s},set:function(a){s=a}},showYAxis:{get:function(){return q},set:function(a){q=a}},defaultState:{get:function(){return A},set:function(a){A=a}},noData:{get:function(){return G},
set:function(a){G=a}},duration:{get:function(){return v},set:function(a){v=a}},margin:{get:function(){return k},set:function(a){k.top=a.top!==void 0?a.top:k.top;k.right=a.right!==void 0?a.right:k.right;k.bottom=a.bottom!==void 0?a.bottom:k.bottom;k.left=a.left!==void 0?a.left:k.left}},rightAlignYAxis:{get:function(){return u},set:function(a){u=a;j.orient(a?"right":"left")}},color:{get:function(){return o},set:function(a){o=c.utils.getColor(a);f.color(o);g.color(o);i.color(o)}}});c.utils.inheritOptions(a,
b);c.utils.initOptions(a);return a};c.models.sparkline=function(){function a(g){g.each(function(a){var g=e-b.left-b.right,m=j-b.top-b.bottom;f=d3.select(this);c.utils.initSVG(f);i.domain(p||d3.extent(a,k)).range(w||[0,g]);d.domain(o||d3.extent(a,l)).range(n||[m,0]);a=f.selectAll("g.nv-wrap.nv-sparkline").data([a]);a.enter().append("g").attr("class","nvd3 nv-wrap nv-sparkline").append("g");a.select("g");a.attr("transform","translate("+b.left+","+b.top+")");g=a.selectAll("path").data(function(a){return[a]});
g.enter().append("path");g.exit().remove();g.style("stroke",function(a,b){return a.color||r(a,b)}).attr("d",d3.svg.line().x(function(a,b){return i(k(a,b))}).y(function(a,b){return d(l(a,b))}));a=a.selectAll("circle.nv-point").data(function(a){function b(c){if(c!=-1){var e=a[c];e.pointIndex=c;return e}return null}var c=a.map(function(a,b){return l(a,b)}),e=b(c.lastIndexOf(d.domain()[1])),f=b(c.indexOf(d.domain()[0])),c=b(c.length-1);return[f,e,c].filter(function(a){return a!=null})});a.enter().append("circle");
a.exit().remove();a.attr("cx",function(a){return i(k(a,a.pointIndex))}).attr("cy",function(a){return d(l(a,a.pointIndex))}).attr("r",2).attr("class",function(a){return k(a,a.pointIndex)==i.domain()[1]?"nv-point nv-currentValue":l(a,a.pointIndex)==d.domain()[0]?"nv-point nv-minValue":"nv-point nv-maxValue"})});return a}var b={top:2,right:0,bottom:2,left:0},e=400,j=32,f=null,g=true,i=d3.scale.linear(),d=d3.scale.linear(),k=function(a){return a.x},l=function(a){return a.y},r=c.utils.getColor(["#000"]),
p,o,w,n;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return e},set:function(a){e=a}},height:{get:function(){return j},set:function(a){j=a}},xDomain:{get:function(){return p},set:function(a){p=a}},yDomain:{get:function(){return o},set:function(a){o=a}},xRange:{get:function(){return w},set:function(a){w=a}},yRange:{get:function(){return n},set:function(a){n=a}},xScale:{get:function(){return i},set:function(a){i=a}},yScale:{get:function(){return d},set:function(a){d=
a}},animate:{get:function(){return g},set:function(a){g=a}},x:{get:function(){return k},set:function(a){k=d3.functor(a)}},y:{get:function(){return l},set:function(a){l=d3.functor(a)}},margin:{get:function(){return b},set:function(a){b.top=a.top!==void 0?a.top:b.top;b.right=a.right!==void 0?a.right:b.right;b.bottom=a.bottom!==void 0?a.bottom:b.bottom;b.left=a.left!==void 0?a.left:b.left}},color:{get:function(){return r},set:function(a){r=c.utils.getColor(a)}}});c.utils.initOptions(a);return a};c.models.sparklinePlus=
function(){function a(m){m.each(function(m){function n(){if(!k){var a=G.selectAll(".nv-hoverValue").data(d),c=a.enter().append("g").attr("class","nv-hoverValue").style("stroke-opacity",0).style("fill-opacity",0);a.exit().transition().duration(250).style("stroke-opacity",0).style("fill-opacity",0).remove();a.attr("transform",function(a){return"translate("+g(b.x()(m[a],a))+",0)"}).transition().duration(250).style("stroke-opacity",1).style("fill-opacity",1);if(d.length){c.append("line").attr("x1",0).attr("y1",
-e.top).attr("x2",0).attr("y2",u);c.append("text").attr("class","nv-xValue").attr("x",-6).attr("y",-e.top).attr("text-anchor","end").attr("dy",".9em");G.select(".nv-hoverValue .nv-xValue").text(l(b.x()(m[d[0]],d[0])));c.append("text").attr("class","nv-yValue").attr("x",6).attr("y",-e.top).attr("text-anchor","start").attr("dy",".9em");G.select(".nv-hoverValue .nv-yValue").text(r(b.y()(m[d[0]],d[0])))}}}var s=d3.select(this);c.utils.initSVG(s);var q=c.utils.availableWidth(j,s,e),u=c.utils.availableHeight(f,
s,e);a.update=function(){s.call(a)};a.container=this;if(!m||!m.length){c.utils.noData(a,s);return a}s.selectAll(".nv-noData").remove();var C=b.y()(m[m.length-1],m.length-1);g=b.xScale();i=b.yScale();var A=s.selectAll("g.nv-wrap.nv-sparklineplus").data([m]),t=A.enter().append("g").attr("class","nvd3 nv-wrap nv-sparklineplus").append("g"),G=A.select("g");t.append("g").attr("class","nv-sparklineWrap");t.append("g").attr("class","nv-valueWrap");t.append("g").attr("class","nv-hoverArea");A.attr("transform",
"translate("+e.left+","+e.top+")");A=G.select(".nv-sparklineWrap");b.width(q).height(u);A.call(b);if(p){A=G.select(".nv-valueWrap").selectAll(".nv-currentValue").data([C]);A.enter().append("text").attr("class","nv-currentValue").attr("dx",w?-8:8).attr("dy",".9em").style("text-anchor",w?"end":"start");A.attr("x",q+(w?e.right:0)).attr("y",o?function(a){return i(a)}:0).style("fill",b.color()(m[m.length-1],m.length-1)).text(r(C))}t.select(".nv-hoverArea").append("rect").on("mousemove",function(){if(!k){for(var a=
d3.mouse(this)[0]-e.left,c=m,a=Math.round(g.invert(a)),f=Math.abs(b.x()(c[0],0)-a),i=0,h=0;h<c.length;h++)if(Math.abs(b.x()(c[h],h)-a)<f){f=Math.abs(b.x()(c[h],h)-a);i=h}d=[i];n()}}).on("click",function(){k=!k}).on("mouseout",function(){d=[];n()});G.select(".nv-hoverArea rect").attr("transform",function(){return"translate("+-e.left+","+-e.top+")"}).attr("width",q+e.left+e.right).attr("height",u+e.top)});return a}var b=c.models.sparkline(),e={top:15,right:100,bottom:10,left:50},j=null,f=null,g,i,d=
[],k=false,l=d3.format(",r"),r=d3.format(",.2f"),p=true,o=true,w=false,n=null;a.sparkline=b;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return j},set:function(a){j=a}},height:{get:function(){return f},set:function(a){f=a}},xTickFormat:{get:function(){return l},set:function(a){l=a}},yTickFormat:{get:function(){return r},set:function(a){r=a}},showLastValue:{get:function(){return p},set:function(a){p=a}},alignValue:{get:function(){return o},set:function(a){o=
a}},rightAlignValue:{get:function(){return w},set:function(a){w=a}},noData:{get:function(){return n},set:function(a){n=a}},margin:{get:function(){return e},set:function(a){e.top=a.top!==void 0?a.top:e.top;e.right=a.right!==void 0?a.right:e.right;e.bottom=a.bottom!==void 0?a.bottom:e.bottom;e.left=a.left!==void 0?a.left:e.left}}});c.utils.inheritOptions(a,b);c.utils.initOptions(a);return a};c.models.stackedArea=function(){function a(l){q.reset();q.models(B);l.each(function(l){var u=e-b.left-b.right,
t=j-b.top-b.bottom;i=d3.select(this);c.utils.initSVG(i);n=B.xScale();m=B.yScale();var E=l;l.forEach(function(a,b){a.seriesIndex=b;a.values=a.values.map(function(a,c){a.index=c;a.seriesIndex=b;return a})});var l=l.filter(function(a){return!a.disabled}),l=d3.layout.stack().order(p).offset(r).values(function(a){return a.values}).x(d).y(k).out(function(a,b,c){a.display={y:c,y0:b}})(l),v=i.selectAll("g.nv-wrap.nv-stackedarea").data([l]),x=v.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedarea"),
z=x.append("defs"),x=x.append("g"),F=v.select("g");x.append("g").attr("class","nv-areaWrap");x.append("g").attr("class","nv-scatterWrap");v.attr("transform","translate("+b.left+","+b.top+")");B.forceY().length==0&&B.forceY().push(0);B.width(u).height(t).x(d).y(function(a){if(a.display!==void 0)return a.display.y+a.display.y0}).forceY([0]).color(l.map(function(a){return a.color||f(a,a.seriesIndex)}));F.select(".nv-scatterWrap").datum(l).call(B);z.append("clipPath").attr("id","nv-edge-clip-"+g).append("rect");
v.select("#nv-edge-clip-"+g+" rect").attr("width",u).attr("height",t);F.attr("clip-path",w?"url(#nv-edge-clip-"+g+")":"");var h=d3.svg.area().x(function(a,b){return n(d(a,b))}).y0(function(a){return m(a.display.y0)}).y1(function(a){return m(a.display.y+a.display.y0)}).interpolate(o),I=d3.svg.area().x(function(a,b){return n(d(a,b))}).y0(function(a){return m(a.display.y0)}).y1(function(a){return m(a.display.y0)}),u=F.select(".nv-areaWrap").selectAll("path.nv-area").data(function(a){return a});u.enter().append("path").attr("class",
function(a,b){return"nv-area nv-area-"+b}).attr("d",function(a){return I(a.values,a.seriesIndex)}).on("mouseover",function(a){d3.select(this).classed("hover",true);s.areaMouseover({point:a,series:a.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:a.seriesIndex})}).on("mouseout",function(a){d3.select(this).classed("hover",false);s.areaMouseout({point:a,series:a.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:a.seriesIndex})}).on("click",function(a){d3.select(this).classed("hover",false);s.areaClick({point:a,
series:a.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:a.seriesIndex})});u.exit().remove();u.style("fill",function(a){return a.color||f(a,a.seriesIndex)}).style("stroke",function(a){return a.color||f(a,a.seriesIndex)});u.watchTransition(q,"stackedArea path").attr("d",function(a,b){return h(a.values,b)});B.dispatch.on("elementMouseover.area",function(a){F.select(".nv-chart-"+g+" .nv-area-"+a.seriesIndex).classed("hover",true)});B.dispatch.on("elementMouseout.area",function(a){F.select(".nv-chart-"+
g+" .nv-area-"+a.seriesIndex).classed("hover",false)});a.d3_stackedOffset_stackPercent=function(a){var b=a.length,c=a[0].length,e,d,f,h=[];for(d=0;d<c;++d){for(f=e=0;e<E.length;e++)f=f+k(E[e].values[d]);if(f)for(e=0;e<b;e++)a[e][d][1]=a[e][d][1]/f;else for(e=0;e<b;e++)a[e][d][1]=0}for(d=0;d<c;++d)h[d]=0;return h}});q.renderEnd("stackedArea immediate");return a}var b={top:0,right:0,bottom:0,left:0},e=960,j=500,f=c.utils.defaultColor(),g=Math.floor(Math.random()*1E5),i=null,d=function(a){return a.x},
k=function(a){return a.y},l="stack",r="zero",p="default",o="linear",w=false,n,m,B=c.models.scatter(),E=250,s=d3.dispatch("areaClick","areaMouseover","areaMouseout","renderEnd","elementClick","elementMouseover","elementMouseout");B.pointSize(2.2).pointDomain([2.2,2.2]);var q=c.utils.renderWatch(s,E);a.dispatch=s;a.scatter=B;B.dispatch.on("elementClick",function(){s.elementClick.apply(this,arguments)});B.dispatch.on("elementMouseover",function(){s.elementMouseover.apply(this,arguments)});B.dispatch.on("elementMouseout",
function(){s.elementMouseout.apply(this,arguments)});a.interpolate=function(b){if(!arguments.length)return o;o=b;return a};a.duration=function(b){if(!arguments.length)return E;E=b;q.reset(E);B.duration(E);return a};a.dispatch=s;a.scatter=B;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return e},set:function(a){e=a}},height:{get:function(){return j},set:function(a){j=a}},clipEdge:{get:function(){return w},set:function(a){w=a}},offset:{get:function(){return r},
set:function(a){r=a}},order:{get:function(){return p},set:function(a){p=a}},interpolate:{get:function(){return o},set:function(a){o=a}},x:{get:function(){return d},set:function(a){d=d3.functor(a)}},y:{get:function(){return k},set:function(a){k=d3.functor(a)}},margin:{get:function(){return b},set:function(a){b.top=a.top!==void 0?a.top:b.top;b.right=a.right!==void 0?a.right:b.right;b.bottom=a.bottom!==void 0?a.bottom:b.bottom;b.left=a.left!==void 0?a.left:b.left}},color:{get:function(){return f},set:function(a){f=
c.utils.getColor(a)}},style:{get:function(){return l},set:function(b){l=b;switch(l){case "stack":a.offset("zero");a.order("default");break;case "stream":a.offset("wiggle");a.order("inside-out");break;case "stream-center":a.offset("silhouette");a.order("inside-out");break;case "expand":a.offset("expand");a.order("default");break;case "stack_percent":a.offset(a.d3_stackedOffset_stackPercent);a.order("default")}}},duration:{get:function(){return E},set:function(a){E=a;q.reset(E);B.duration(E)}}});c.utils.inheritOptions(a,
B);c.utils.initOptions(a);return a};c.models.stackedAreaChart=function(){function a(d){H.reset();H.models(b);n&&H.models(e);m&&H.models(j);d.each(function(d){var G=d3.select(this),H=this;c.utils.initSVG(G);var L=c.utils.availableWidth(l,G,k),N=c.utils.availableHeight(r,G,k);a.update=function(){G.transition().duration(h).call(a)};a.container=this;A.setter(D(d),a.update).getter(M(d)).update();A.disabled=d.map(function(a){return!!a.disabled});if(!t){var P;t={};for(P in A)t[P]=A[P]instanceof Array?A[P].slice(0):
A[P]}if(!d||!d.length||!d.filter(function(a){return a.values.length}).length){c.utils.noData(a,G);return a}G.selectAll(".nv-noData").remove();u=b.xScale();C=b.yScale();var V=G.selectAll("g.nv-wrap.nv-stackedAreaChart").data([d]),S=V.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedAreaChart").append("g");P=V.select("g");S.append("rect").style("opacity",0);S.append("g").attr("class","nv-x nv-axis");S.append("g").attr("class","nv-y nv-axis");S.append("g").attr("class","nv-stackedWrap");S.append("g").attr("class",
"nv-legendWrap");S.append("g").attr("class","nv-controlsWrap");S.append("g").attr("class","nv-interactive");P.select("rect").attr("width",L).attr("height",N);if(w){S=o?L-x:L;f.width(S);P.select(".nv-legendWrap").datum(d).call(f);if(k.top!=f.height()){k.top=f.height();N=c.utils.availableHeight(r,G,k)}P.select(".nv-legendWrap").attr("transform","translate("+(L-S)+","+-k.top+")")}if(o){var U=[{key:F.stacked||"Stacked",metaKey:"Stacked",disabled:b.style()!="stack",style:"stack"},{key:F.stream||"Stream",
metaKey:"Stream",disabled:b.style()!="stream",style:"stream"},{key:F.expanded||"Expanded",metaKey:"Expanded",disabled:b.style()!="expand",style:"expand"},{key:F.stack_percent||"Stack %",metaKey:"Stack_Percent",disabled:b.style()!="stack_percent",style:"stack_percent"}];x=z.length/3*260;U=U.filter(function(a){return z.indexOf(a.metaKey)!==-1});g.width(x).color(["#444","#444","#444"]);P.select(".nv-controlsWrap").datum(U).call(g);if(k.top!=Math.max(g.height(),f.height())){k.top=Math.max(g.height(),
f.height());N=c.utils.availableHeight(r,G,k)}P.select(".nv-controlsWrap").attr("transform","translate(0,"+-k.top+")")}V.attr("transform","translate("+k.left+","+k.top+")");B&&P.select(".nv-y.nv-axis").attr("transform","translate("+L+",0)");if(E){i.width(L).height(N).margin({left:k.left,top:k.top}).svgContainer(G).xScale(u);V.select(".nv-interactive").call(i)}b.width(L).height(N);P.select(".nv-stackedWrap").datum(d).transition().call(b);if(n){e.scale(u)._ticks(c.utils.calcTicksX(L/100,d)).tickSize(-N,
0);P.select(".nv-x.nv-axis").attr("transform","translate(0,"+N+")");P.select(".nv-x.nv-axis").transition().duration(0).call(e)}if(m){N=b.offset()==="wiggle"?0:c.utils.calcTicksY(N/36,d);j.scale(C)._ticks(N).tickSize(-L,0);if(b.style()==="expand"||b.style()==="stack_percent"){L=j.tickFormat();if(!I||L!==J)I=L;j.tickFormat(J)}else if(I){j.tickFormat(I);I=null}P.select(".nv-y.nv-axis").transition().duration(0).call(j)}b.dispatch.on("areaClick.toggle",function(b){d.filter(function(a){return!a.disabled}).length===
1?d.forEach(function(a){a.disabled=false}):d.forEach(function(a,c){a.disabled=c!=b.seriesIndex});A.disabled=d.map(function(a){return!!a.disabled});v.stateChange(A);a.update()});f.dispatch.on("stateChange",function(b){for(var c in b)A[c]=b[c];v.stateChange(A);a.update()});g.dispatch.on("legendClick",function(c){if(c.disabled){U=U.map(function(a){a.disabled=true;return a});c.disabled=false;b.style(c.style);A.style=b.style();v.stateChange(A);a.update()}});i.dispatch.on("elementMousemove",function(f){b.clearHighlights();
var h,g,j,k=[],l=0;d.filter(function(a,b){a.seriesIndex=b;return!a.disabled}).forEach(function(d,e){g=c.interactiveBisect(d.values,f.pointXValue,a.x());var i=d.values[g];a.y()(i,g)!=null&&b.highlightPoint(e,g,true);if(typeof i!=="undefined"){typeof h==="undefined"&&(h=i);typeof j==="undefined"&&(j=a.xScale()(a.x()(i,g)));var m=b.style()=="expand"?i.display.y:a.y()(i,g);k.push({key:d.key,value:m,color:p(d,d.seriesIndex),stackedValue:i.display});s&&b.style()!="expand"&&(l=l+m)}});k.reverse();if(k.length>
2){var m=a.yScale().invert(f.mouseY),n=null;k.forEach(function(a,b){m=Math.abs(m);var c=Math.abs(a.stackedValue.y0),d=Math.abs(a.stackedValue.y);m>=c&&m<=d+c&&(n=b)});if(n!=null)k[n].highlight=true}s&&(b.style()!="expand"&&k.length>=2)&&k.push({key:q,value:l,total:true});var o=e.tickFormat()(a.x()(h,g)),r=i.tooltip.valueFormatter();if(b.style()==="expand"||b.style()==="stack_percent"){y||(y=r);r=d3.format(".1%")}else if(y){r=y;y=null}i.tooltip.chartContainer(H.parentNode).valueFormatter(r).data({value:o,
series:k})();i.renderGuideLine(j)});i.dispatch.on("elementMouseout",function(){b.clearHighlights()});v.on("changeState",function(c){if(typeof c.disabled!=="undefined"&&d.length===c.disabled.length){d.forEach(function(a,b){a.disabled=c.disabled[b]});A.disabled=c.disabled}typeof c.style!=="undefined"&&b.style(c.style);a.update()})});H.renderEnd("stacked Area chart immediate");return a}var b=c.models.stackedArea(),e=c.models.axis(),j=c.models.axis(),f=c.models.legend(),g=c.models.legend(),i=c.interactiveGuideline(),
d=c.models.tooltip(),k={top:30,right:25,bottom:50,left:60},l=null,r=null,p=c.utils.defaultColor(),o=true,w=true,n=true,m=true,B=false,E=false,s=true,q="TOTAL",u,C,A=c.utils.state(),t=null,G=null,v=d3.dispatch("stateChange","changeState","renderEnd"),x=250,z=["Stacked","Stream","Expanded"],F={},h=250;A.style=b.style();e.orient("bottom").tickPadding(7);j.orient(B?"right":"left");d.headerFormatter(function(a,b){return e.tickFormat()(a,b)}).valueFormatter(function(a,b){return j.tickFormat()(a,b)});i.tooltip.headerFormatter(function(a,
b){return e.tickFormat()(a,b)}).valueFormatter(function(a,b){return j.tickFormat()(a,b)});var I=null,y=null;g.updateState(false);var H=c.utils.renderWatch(v);b.style();var M=function(a){return function(){return{active:a.map(function(a){return!a.disabled}),style:b.style()}}},D=function(a){return function(b){b.active!==void 0&&a.forEach(function(a,c){a.disabled=!b.active[c]})}},J=d3.format("%");b.dispatch.on("elementMouseover.tooltip",function(a){a.point.x=b.x()(a.point);a.point.y=b.y()(a.point);d.data(a).hidden(false)});
b.dispatch.on("elementMouseout.tooltip",function(){d.hidden(true)});a.dispatch=v;a.stacked=b;a.legend=f;a.controls=g;a.xAxis=e;a.yAxis=j;a.interactiveLayer=i;a.tooltip=d;a.dispatch=v;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return l},set:function(a){l=a}},height:{get:function(){return r},set:function(a){r=a}},showLegend:{get:function(){return w},set:function(a){w=a}},showXAxis:{get:function(){return n},set:function(a){n=a}},showYAxis:{get:function(){return m},
set:function(a){m=a}},defaultState:{get:function(){return t},set:function(a){t=a}},noData:{get:function(){return G},set:function(a){G=a}},showControls:{get:function(){return o},set:function(a){o=a}},controlLabels:{get:function(){return F},set:function(a){F=a}},controlOptions:{get:function(){return z},set:function(a){z=a}},showTotalInTooltip:{get:function(){return s},set:function(a){s=a}},totalLabel:{get:function(){return q},set:function(a){q=a}},margin:{get:function(){return k},set:function(a){k.top=
a.top!==void 0?a.top:k.top;k.right=a.right!==void 0?a.right:k.right;k.bottom=a.bottom!==void 0?a.bottom:k.bottom;k.left=a.left!==void 0?a.left:k.left}},duration:{get:function(){return h},set:function(a){h=a;H.reset(h);b.duration(h);e.duration(h);j.duration(h)}},color:{get:function(){return p},set:function(a){p=c.utils.getColor(a);f.color(p);b.color(p)}},rightAlignYAxis:{get:function(){return B},set:function(a){B=a;j.orient(B?"right":"left")}},useInteractiveGuideline:{get:function(){return E},set:function(c){E=
!!c;a.interactive(!c);a.useVoronoi(!c);b.scatter.interactive(!c)}}});c.utils.inheritOptions(a,b);c.utils.initOptions(a);return a};c.models.sunburst=function(){function a(q){s.reset();q.each(function(a){function q(a){a.x0=a.x;a.dx0=a.dx}function s(a){var b=d3.interpolate(p.domain(),[a.x,a.x+a.dx]),c=d3.interpolate(o.domain(),[a.y,1]),d=d3.interpolate(o.range(),[a.y?20:0,v]);return function(a,e){return e?function(){return n(a)}:function(e){p.domain(b(e));o.domain(c(e)).range(d(e));return n(a)}}}d=d3.select(this);
var t=c.utils.availableWidth(e,d,b),G=c.utils.availableHeight(j,d,b),v=Math.min(t,G)/2,x;c.utils.initSVG(d);var z=d.selectAll(".nv-wrap.nv-sunburst").data(a),F=z.enter().append("g").attr("class","nvd3 nv-wrap nv-sunburst nv-chart-"+i).selectAll("nv-sunburst");z.attr("transform","translate("+t/2+","+G/2+")");d.on("click",function(a,b){r.chartClick({data:a,index:b,pos:d3.event,id:i})});o.range([0,v]);m=m||a;E=a[0];w.value(g[f]||g.count);x=F.data(w.nodes).enter().append("path").attr("d",n).style("fill",
function(a){return k((a.children?a:a.parent).name)}).style("stroke","#FFF").on("click",function(a){B!==m&&m!==a&&(B=m);m=a;x.transition().duration(l).attrTween("d",s(a))}).each(q).on("dblclick",function(a){B.parent==a&&x.transition().duration(l).attrTween("d",s(E))}).each(q).on("mouseover",function(a){d3.select(this).classed("hover",true).style("opacity",0.8);r.elementMouseover({data:a,color:d3.select(this).style("fill")})}).on("mouseout",function(a){d3.select(this).classed("hover",false).style("opacity",
1);r.elementMouseout({data:a})}).on("mousemove",function(a){r.elementMousemove({data:a})})});s.renderEnd("sunburst immediate");return a}var b={top:0,right:0,bottom:0,left:0},e=null,j=null,f="count",g={count:function(){return 1},size:function(a){return a.size}},i=Math.floor(Math.random()*1E4),d=null,k=c.utils.defaultColor(),l=500,r=d3.dispatch("chartClick","elementClick","elementDblClick","elementMousemove","elementMouseover","elementMouseout","renderEnd"),p=d3.scale.linear().range([0,2*Math.PI]),
o=d3.scale.sqrt(),w=d3.layout.partition().sort(null).value(function(){return 1}),n=d3.svg.arc().startAngle(function(a){return Math.max(0,Math.min(2*Math.PI,p(a.x)))}).endAngle(function(a){return Math.max(0,Math.min(2*Math.PI,p(a.x+a.dx)))}).innerRadius(function(a){return Math.max(0,o(a.y))}).outerRadius(function(a){return Math.max(0,o(a.y+a.dy))}),m,B,E,s=c.utils.renderWatch(r);a.dispatch=r;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return e},set:function(a){e=
a}},height:{get:function(){return j},set:function(a){j=a}},mode:{get:function(){return f},set:function(a){f=a}},id:{get:function(){return i},set:function(a){i=a}},duration:{get:function(){return l},set:function(a){l=a}},margin:{get:function(){return b},set:function(a){b.top=a.top!=void 0?a.top:b.top;b.right=a.right!=void 0?a.right:b.right;b.bottom=a.bottom!=void 0?a.bottom:b.bottom;b.left=a.left!=void 0?a.left:b.left}},color:{get:function(){return k},set:function(a){k=c.utils.getColor(a)}}});c.utils.initOptions(a);
return a};c.models.sunburstChart=function(){function a(d){p.reset();p.models(b);d.each(function(d){var e=d3.select(this);c.utils.initSVG(e);var i=c.utils.availableWidth(f,e,j),k=c.utils.availableHeight(g,e,j);a.update=function(){l===0?e.call(a):e.transition().duration(l).call(a)};a.container=this;if(!d||!d.length){c.utils.noData(a,e);return a}e.selectAll(".nv-noData").remove();var o=e.selectAll("g.nv-wrap.nv-sunburstChart").data(d),p=o.enter().append("g").attr("class","nvd3 nv-wrap nv-sunburstChart").append("g"),
q=o.select("g");p.append("g").attr("class","nv-sunburstWrap");o.attr("transform","translate("+j.left+","+j.top+")");b.width(i).height(k);d=q.select(".nv-sunburstWrap").datum(d);d3.transition(d).call(b)});p.renderEnd("sunburstChart immediate");return a}var b=c.models.sunburst(),e=c.models.tooltip(),j={top:30,right:20,bottom:20,left:20},f=null,g=null,i=c.utils.defaultColor();Math.round(Math.random()*1E5);var d=null,k=null,l=250,r=d3.dispatch("stateChange","changeState","renderEnd");e.duration(0);var p=
c.utils.renderWatch(r);e.headerEnabled(false).valueFormatter(function(a){return a});b.dispatch.on("elementMouseover.tooltip",function(a){a.series={key:a.data.name,value:a.data.size,color:a.color};e.data(a).hidden(false)});b.dispatch.on("elementMouseout.tooltip",function(){e.hidden(true)});b.dispatch.on("elementMousemove.tooltip",function(){e()});a.dispatch=r;a.sunburst=b;a.tooltip=e;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{noData:{get:function(){return k},set:function(a){k=
a}},defaultState:{get:function(){return d},set:function(a){d=a}},color:{get:function(){return i},set:function(a){i=a;b.color(i)}},duration:{get:function(){return l},set:function(a){l=a;p.reset(l);b.duration(l)}},margin:{get:function(){return j},set:function(a){j.top=a.top!==void 0?a.top:j.top;j.right=a.right!==void 0?a.right:j.right;j.bottom=a.bottom!==void 0?a.bottom:j.bottom;j.left=a.left!==void 0?a.left:j.left}}});c.utils.inheritOptions(a,b);c.utils.initOptions(a);return a};c.version="1.8.1-dev"})();
